{"version":3,"sources":["components/common/Footer/Footer.module.scss","components/form/FormRow/FormRow.module.scss","components/form/ContentField/ContentField.module.scss","components/project/CreateProject/CreateProject.module.scss","components/common/UserWidget/UserWidget.module.scss","components/project/ProjectMain/ProjectMain.module.scss","components/common/ConfirmWindow/ConfirmWindow.module.scss","components/App/App.module.scss","components/common/Header/Header.module.scss","components/comment/CommentWidget/CommentWidget.module.scss","components/project/ProjectDetail/ProjectDetail.module.scss","components/auth/ConfirmSuccess/ConfirmSuccess.module.scss","components/common/UserPage/UserPage.module.scss","components/Agreement/Agreement.module.scss","components/project/page/PageEdit/PageEdit.module.scss","components/account/AccountForm/AccountForm.module.scss","components/project/ProjectForm/ProjectForm.module.scss","components/project/ProjectWidget/ProjectWidget.module.scss","components/Home/Home.module.scss","components/project/StructureTree/StructureTree.module.scss","store/index.tsx","helpers/constants.ts","api/request.ts","api/user.ts","models/user.ts","hooks/useUser.ts","icons/logo.svg","icons/bell.svg","icons/folder.svg","icons/search.svg","icons/dialog.svg","components/common/Header/Header.tsx","icons/paper.svg","icons/info.svg","components/common/Footer/Footer.tsx","icons/like.svg","icons/comment.svg","components/project/ProjectWidget/ProjectWidget.tsx","components/project/ProjectsList/ProjectsList.tsx","api/project.ts","components/Home/Home.tsx","icons/close.svg","components/common/Popup/Popup.tsx","icons/fb.svg","components/form/FormRow/FormRow.tsx","icons/google.svg","icons/vk.svg","helpers/window.ts","components/auth/SocialAuth/SocialAuth.tsx","components/form/TextField/TextField.tsx","components/auth/LoginForm/LoginForm.tsx","components/auth/RegisterForm/RegisterForm.tsx","components/auth/ForgetPasswordForm/ForgetPasswordForm.tsx","components/auth/ConfirmSuccess/ConfirmSuccess.tsx","components/form/ContentField/ContentField.tsx","components/comment/AddCommentForm/AddCommentForm.tsx","icons/dislike.svg","components/common/ConfirmWindow/ConfirmWindow.tsx","api/comment.ts","components/comment/CommentWidget/CommentWidget.tsx","api/hub.ts","components/comment/Comments/Comments.tsx","components/common/UserPage/UserPage.tsx","components/account/Account/Account.tsx","helpers/string.ts","components/account/AccountForm/AccountForm.tsx","components/account/AccountEdit/AccountEdit.tsx","components/project/ProjectForm/ProjectForm.tsx","components/project/CreateProject/CreateProject.tsx","components/project/MyProjects/MyProjects.tsx","icons/folder_dark.svg","components/common/UserWidget/UserWidget.tsx","icons/doc_dark.svg","icons/star.svg","components/project/StructureTree/StructureTree.tsx","icons/edit.svg","icons/accept.svg","icons/decline.svg","components/project/ProjectMain/ProjectMain.tsx","components/project/EditProject/EditProject.tsx","components/project/page/PageMain/PageMain.tsx","components/project/page/PageEdit/PageEdit.tsx","components/project/page/PageDetail/PageDetail.tsx","components/project/ProjectDetail/ProjectDetail.tsx","components/ErrorBoundary/ErrorBoundary.tsx","components/auth/ResetPassword/ResetPassword.tsx","components/Agreement/Agreement.tsx","components/Search/Search.tsx","components/App/App.tsx","serviceWorker.ts","index.tsx","components/project/MyProjects/MyProjects.module.scss","components/auth/LoginForm/LoginForm.module.scss","components/auth/RegisterForm/RegisterForm.module.scss","components/project/page/PageMain/PageMain.module.scss","components/comment/AddCommentForm/AddCommentForm.module.scss","components/comment/Comments/Comments.module.scss","components/auth/ResetPassword/ResetPassword.module.scss","components/auth/SocialAuth/SocialAuth.module.scss","components/form/TextField/TextField.module.scss","components/project/ProjectsList/ProjectsList.module.scss","components/common/Popup/Popup.module.scss","components/auth/ForgetPasswordForm/ForgetPasswordForm.module.scss","components/Search/Search.module.scss"],"names":["module","exports","UserActionType","initialState","user","userInfo","loginShowed","registerShowed","forgetPasswordShowed","openCommentForm","undefined","events","ProjectActionType","initialProjectState","projects","project","projectUsers","page","comments","myProjects","rootReducer","combineReducers","state","action","type","LOAD_USER_ACTION","payload","LOGIN_VISIBILITY_ACTION","REGISTER_VISIBILITY_ACTION","FORGET_PASSWORD_VISIBILITY_ACTION","LOAD_USER_INFO_ACTION","COMMENT_FORM_OPEN_ACTION","EVENTS_LOADED_ACTION","EVENT_READ_ACTION","index","findIndex","e","_id","$oid","read","LOGOUT_ACTION","LOAD_PROJECTS_ACTION","LOAD_PROJECT_ACTION","LOAD_COMMENTS_ACTION","LOAD_PAGE_ACTION","LOAD_MY_PROJECTS_ACTION","LOAD_PROJECT_USERS_ACTION","middlewares","thunkMiddleware","process","REACT_APP_ENVIRONMENT","store","createStore","composeWithDevTools","applyMiddleware","apiEndpoint","REACT_APP_API_ENDPOINT","staticBase","REACT_APP_STATIC_BASE","request","url","method","data","config","source","axios","CancelToken","newConfig","headers","Authorization","JWT_TOKEN","console","log","withCredentials","cancelToken","token","cancel","reason","jwtRequest","refreshTokenTimerId","setJwtToken","refreshToken","a","clearTimeout","Promise","jwtToken","startRefreshTokenTimer","resolve","error","JSON","parse","atob","split","timeout","Date","exp","getTime","now","setTimeout","authRequest","res","includes","status","dispatch","reject","response","window","onfocus","getAccount","authenticate","email","password","toLowerCase","register","first_name","last_name","language_code","resendConfirmEmail","logout","forgotPassword","validateResetToken","resetPassword","signFb","code","redirectUri","signVk","signGoogle","getUser","userId","getUserInfo","updateUserInfo","name","login","city","education","tags","skills","links","cover","coverFile","formData","FormData","append","tag","link","skill","getEvents","readEvent","eventId","getUserProjects","params","toString","qs","stringify","getUserComments","Role","User","id","role","this","Admin","useUser","useSelector","s","_path","_extends","Object","assign","target","i","arguments","length","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","svgRef","title","props","createElement","width","height","viewBox","fill","ref","d","ForwardRef","forwardRef","_path2","stroke","strokeWidth","strokeLinecap","strokeLinejoin","HeaderCmp","useDispatch","useState","displayMenu","setDisplayMenu","notificationShowed","setNotificationShowed","history","useHistory","eventsListRef","useRef","search","setSearch","location","useLocation","useEffect","document","addEventListener","current","contains","onLogin","useCallback","body","classList","add","withMenu","remove","className","container","area-label","cx","inner","left","menuIcon","onClick","to","logo","authLink","right","onSubmit","preventDefault","push","value","onChange","substring","placeholder","disabled","trim","auth","authIcon","Tooltip","classes","tooltip","filter","n","authIconCount","notifications","stopPropagation","notificationsListTitle","notificationsEmpty","notificationsList","reverse","map","meta","projectId","$numberInt","pageId","comment","notification","unreadNotification","onMouseEnter","projectName","style","backgroundImage","startsWith","overlay","menu","hidden","menuRow","FooterCmp","wrapper","copy","href","placement","ProjectWidget","onLike","draft","text","description","info","values","likes","liked","likesCount","commentsCount","created","moment","utc","local","format","ProjectsList","childClassName","hasMore","onMoreLoad","moreLoading","empty","more","getProjects","searchProjects","q","getMyProjects","projectType","listType","list","getProject","deleteProject","createProject","content","likeProject","getProjectPages","createPage","parentId","getPage","updatePage","files","forEach","f","important","deleteProjectPage","toggleProjectFollowing","following","toggleProjectRequest","set","leaveProject","getFollowers","getRequests","acceptRequest","requestId","declineRequest","removeUser","unFollowUser","saveDraftToPage","saveDraftFromPage","Home","projectLoaded","setProjectLoaded","setMoreLoading","setPage","typeIndex","setTypeIndex","onLoad","guest","guestInner","guestImage","src","alt","guestContent","guestName","guestDesc","guestAction","navigation","active","count","Popup","children","onClose","maxWidth","close","FormRow","maxLength","_rect","rx","fbCodeListeners","setFbCode","l","vkCodeListeners","setVkCode","googleCodeListeners","setGoogleCode","SocialAuth","fbCode","vkCode","googleCode","listenerFb","listenerVk","listenerGoogle","splice","origin","reload","load","screen","top","open","REACT_APP_FACEBOOK_APP_ID","icon","REACT_APP_GOOGLE_APP_ID","REACT_APP_VK_APP_ID","TextField","size","fullWidth","label","invalid","invalidText","input","big","LoginForm","onSave","setEmail","setPassword","errors","setErrors","setError","isLoading","setIsLoading","resend","form","success","message","buttons","bottom","validator","isEmail","RegisterForm","firstName","setFirstName","lastName","setLastName","successEmail","setSuccessEmail","passwordHelp","ForgetPasswordForm","sent","setSent","ConfirmSuccess","replace","ContentField","allowedTags","actions","containerRef","outerRef","internalError","setInternalError","tools","useMemo","embed","Embed","table","Table","marker","Marker","List","Code","image","class","Image","types","uploader","uploadByUrl","file","uploadByFile","post","header","Header","delimiter","Delimiter","field","errorField","onReady","save","api","html","convertToHTML","instanceRef","json","output","blocks","block","level","items","el","caption","rows","row","cells","cell","checklist","item","checked_ext","checked","AddCommentForm","onCancel","parent","setHtml","setData","loading","setLoading","anonymous","setAnonymous","sanitizeHtml","Checkbox","root","getElementById","ConfirmWindow","ok","okText","cancelText","createPortal","getComments","before","createComment","updateComment","commentId","likeComment","CommentWidget","hasLink","deleted","onAnswerAdd","onUpdate","editMode","setEditMode","commentLoading","setCommentLoading","commentUser","displayConfirmDelete","setDisplayConfirmDelete","canDelete","isAdmin","canEdit","highlight","userImage","deletedText","dt","date","dangerouslySetInnerHTML","__html","positiveScore","negativeScore","likeCount","reply","answers","c","answer","addAnswer","connection","waitToken","getConnectionWS","Comments","hideNegative","setHideNegative","init","setInit","useLayoutEffect","hash","loadComments","sorted","ordered","sortBy","result","ch","threadId","filtered","parents","handler","expired","eventName","on","off","onAddComment","commentIndex","addComment","UserPage","currentUser","onEdit","useParams","onLogout","Cookies","Helmet","t","rel","center","Account","w1","w2","isOnlyDigitLetters","withWhiteSpaces","test","retrieveProp","htmlString","from","prop","tmp","innerHTML","elem","getElementsByTagName","AccountForm","onBack","setName","setLogin","setCity","setEducation","setTags","setSkills","setLinks","setCover","newTag","setNewTag","newSkill","setNewSkill","newLink","setNewLink","setUpdated","coverPath","setCoverPath","useDropzone","accept","acceptedFiles","getRootProps","getInputProps","isDragAccept","isDragReject","reset","reader","FileReader","onload","readAsDataURL","account","FromResponse","listTitle","listItem","listForm","isURL","maxFiles","imageDrop","rejectImageDrop","activeImageDrop","imageError","ProjectForm","setDescription","setContent","setDraft","deletedProject","setDeletedProject","setType","err","typesTitle","typesList","Radio","editor","actionsLeft","public","actionsRight","CreateProject","MyProjects","setIndex","UserWidget","RowType","_defs","StructureTree","pages","onAdd","relative","mapData","p","Page","Row","rootRow","Directory","emptyAdd","Deleted","rowName","activeClassName","activeLink","rowLink","rowUnpublished","rowDeleted","importantIcon","addIcon","rowContent","r","_rect2","_rect3","patternContentUnits","xlinkHref","transform","x","y","ProjectMain","usersShowed","setUsersShowed","usersIndex","setUsersIndex","popupUsersIndex","setPopUsersIndex","importantPages","users","find","setUsers","follow","followers","unFollow","u","requested","cancelRequest","leave","participate","edit","centerRight","usersTitle","selectedUsers","slice","adminActions","importantTitle","importantList","importantPage","importantPageImage","popUpUserList","popupUser","popupAdminActions","requests","EditProject","PageMain","filesTitle","filesList","path","PageEdit","displayDeleteConfirm","setDisplayDeleteConfirm","setImportant","published","setPublished","setFiles","newFiles","setNewFiles","displayDraft","setDisplayDraft","draftContent","setDraftContent","popupMessage","setPopupMessage","hasRights","drafts","checkboxes","checkbox","removeFile","popup","popupTitle","popupForm","PageDetail","match","useRouteMatch","exact","component","ProjectDetail","displayArrow","setDisplayArrow","onScroll","scrollY","removeEventListener","loadProject","scrollTo","arrow","arrowVisible","ErrorBoundary","hasError","setState","Sentry","React","Component","ResetPassword","repeatPassword","setRepeatPassword","setToken","URLSearchParams","get","Agreement","Search","App","userLoaded","setUserLoaded","listen","opener","pathname","loadEvents","AccountEdit","Boolean","hostname","dsn","theme","createMuiTheme","breakpoints","xs","sm","md","lg","xl","typography","fontFamily","palette","primary","main","secondary","overrides","ReactDOM","render","StylesProvider","injectFirst","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2c6c3123.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Footer_wrapper__2CTMl\",\"inner\":\"Footer_inner__b0QTt\",\"copy\":\"Footer_copy__1tu-K\",\"links\":\"Footer_links__1QjlD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"FormRow_wrapper__Wkcya\",\"length\":\"FormRow_length__KmV2Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"field\":\"ContentField_field__2WlIF\",\"error\":\"ContentField_error__5uHqP\",\"errorField\":\"ContentField_errorField__WZM7Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CreateProject_wrapper__2y0rJ\",\"title\":\"CreateProject_title__WAWnd\",\"form\":\"CreateProject_form__2KSDW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"UserWidget_user__3Iel3\",\"cover\":\"UserWidget_cover__3CxgH\",\"name\":\"UserWidget_name__GAP4m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ProjectMain_wrapper__oTYE1\",\"spinner\":\"ProjectMain_spinner__30_Hm\",\"info\":\"ProjectMain_info__3qk0u\",\"title\":\"ProjectMain_title__32u8G\",\"cover\":\"ProjectMain_cover__30Q6x\",\"text\":\"ProjectMain_text__1cEyT\",\"important\":\"ProjectMain_important__1s3ls\",\"importantTitle\":\"ProjectMain_importantTitle__2yDBV\",\"importantList\":\"ProjectMain_importantList__2yD7n\",\"importantPage\":\"ProjectMain_importantPage__M5f1C\",\"importantPageImage\":\"ProjectMain_importantPageImage__2Qhyy\",\"content\":\"ProjectMain_content__2rzTe\",\"edit\":\"ProjectMain_edit__2S-6R\",\"actions\":\"ProjectMain_actions__1eT7M\",\"center\":\"ProjectMain_center__3a26J\",\"centerRight\":\"ProjectMain_centerRight__1Ufyx\",\"created\":\"ProjectMain_created__2r6sw\",\"user\":\"ProjectMain_user__1gtaY\",\"likes\":\"ProjectMain_likes__20Yjt\",\"liked\":\"ProjectMain_liked__25ZNh\",\"users\":\"ProjectMain_users__uNwbL\",\"usersTitle\":\"ProjectMain_usersTitle__WF6fr\",\"selectedUsers\":\"ProjectMain_selectedUsers__62duZ\",\"popUpUserList\":\"ProjectMain_popUpUserList__1K4Vv\",\"popupUser\":\"ProjectMain_popupUser__tYs-t\",\"popupAdminActions\":\"ProjectMain_popupAdminActions__sKVPk\",\"menu\":\"ProjectMain_menu__RzVIH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"ConfirmWindow_text__2dgsh\",\"actions\":\"ConfirmWindow_actions__1XYSO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"App_content__11LHs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Header_container__2uQq1\",\"inner\":\"Header_inner__FazNU\",\"left\":\"Header_left__cCG_-\",\"right\":\"Header_right__xmAWc\",\"auth\":\"Header_auth__2Fn_D\",\"link\":\"Header_link__2s6C1\",\"authLink\":\"Header_authLink__X9-i-\",\"authIconCount\":\"Header_authIconCount__3fWzO\",\"authIcon\":\"Header_authIcon__1cK0H\",\"user\":\"Header_user__13xmq\",\"notifications\":\"Header_notifications__SQP6b\",\"notificationsEmpty\":\"Header_notificationsEmpty__3M2MC\",\"notificationsList\":\"Header_notificationsList__D4grE\",\"notification\":\"Header_notification__1eh0k\",\"unreadNotification\":\"Header_unreadNotification__240g0\",\"notificationsListTitle\":\"Header_notificationsListTitle__2WQrk\",\"menuIcon\":\"Header_menuIcon__2Rgyt\",\"overlay\":\"Header_overlay__22cZ4\",\"menu\":\"Header_menu__1k3R4\",\"logo\":\"Header_logo__1Lp4X\",\"search\":\"Header_search__37bW3\",\"links\":\"Header_links__1L87c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CommentWidget_wrapper__2IxFm\",\"name\":\"CommentWidget_name__SJE_1\",\"content\":\"CommentWidget_content__2sJIF\",\"anonymous\":\"CommentWidget_anonymous__23lz6\",\"text\":\"CommentWidget_text__nVlDi\",\"deletedText\":\"CommentWidget_deletedText__PHtVC\",\"bottom\":\"CommentWidget_bottom__2GXAp\",\"date\":\"CommentWidget_date__McPC4\",\"reply\":\"CommentWidget_reply__3gBLo\",\"actions\":\"CommentWidget_actions__7yCml\",\"action\":\"CommentWidget_action__2e7Ph\",\"image\":\"CommentWidget_image__2g_ul\",\"userImage\":\"CommentWidget_userImage__2_RpU\",\"answers\":\"CommentWidget_answers__1Iw5k\",\"answer\":\"CommentWidget_answer__3qQOo\",\"addAnswer\":\"CommentWidget_addAnswer__3hZ2n\",\"likes\":\"CommentWidget_likes__L6hmJ\",\"likeCount\":\"CommentWidget_likeCount__2btFK\",\"loadAnswer\":\"CommentWidget_loadAnswer__2RAfW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ProjectDetail_wrapper__1Cs2c\",\"inner\":\"ProjectDetail_inner__3hUQq\",\"left\":\"ProjectDetail_left__2pDdt\",\"center\":\"ProjectDetail_center__6XJZM\",\"right\":\"ProjectDetail_right__2duKn\",\"actions\":\"ProjectDetail_actions__3mwxI\",\"users\":\"ProjectDetail_users__2VfFG\",\"usersTitle\":\"ProjectDetail_usersTitle__1yeHg\",\"selectedUsers\":\"ProjectDetail_selectedUsers__3wO5_\",\"arrow\":\"ProjectDetail_arrow__1eSq0\",\"arrowVisible\":\"ProjectDetail_arrowVisible__2oY2M\",\"popUpUserList\":\"ProjectDetail_popUpUserList__3dc6G\",\"popupUser\":\"ProjectDetail_popupUser__3vh0e\",\"popupAdminActions\":\"ProjectDetail_popupAdminActions__3gbAQ\",\"adminActions\":\"ProjectDetail_adminActions__3DyrZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ConfirmSuccess_wrapper__2ClS2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"UserPage_wrapper__1O65H\",\"left\":\"UserPage_left__1ZW4-\",\"center\":\"UserPage_center__G6JEK\",\"right\":\"UserPage_right__2Iybv\",\"cover\":\"UserPage_cover__2pAcD\",\"name\":\"UserPage_name__Cm3ZI\",\"info\":\"UserPage_info___UJw2\",\"actions\":\"UserPage_actions__g1A60\",\"row\":\"UserPage_row__RDr8V\",\"rowLabel\":\"UserPage_rowLabel__1OcY4\",\"values\":\"UserPage_values__1rr02\",\"value\":\"UserPage_value__2XKdL\",\"link\":\"UserPage_link__1abmI\",\"projects\":\"UserPage_projects__3MjS-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Agreement_wrapper__10kKT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"PageEdit_wrapper__1EdL8\",\"top\":\"PageEdit_top__iLEHW\",\"input\":\"PageEdit_input__1kESR\",\"name\":\"PageEdit_name__2cgYF\",\"checkboxes\":\"PageEdit_checkboxes__1ymDL\",\"checkbox\":\"PageEdit_checkbox__pU4LF\",\"actions\":\"PageEdit_actions__2zpY-\",\"actionsRight\":\"PageEdit_actionsRight__1iNpP\",\"actionsLeft\":\"PageEdit_actionsLeft__3OW_j\",\"editor\":\"PageEdit_editor__N-B3v\",\"popup\":\"PageEdit_popup__til9w\",\"popupTitle\":\"PageEdit_popupTitle__3lJoA\",\"displayDraft\":\"PageEdit_displayDraft__2fiVJ\",\"filesList\":\"PageEdit_filesList__l5PkF\",\"file\":\"PageEdit_file__-vUar\",\"removeFile\":\"PageEdit_removeFile__3-j2e\",\"imageDrop\":\"PageEdit_imageDrop__2RWEq\",\"activeImageDrop\":\"PageEdit_activeImageDrop__2gNcM\",\"rejectImageDrop\":\"PageEdit_rejectImageDrop__12rSD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AccountForm_wrapper__2X8kB\",\"title\":\"AccountForm_title__R4F-I\",\"form\":\"AccountForm_form__1qDVD\",\"cover\":\"AccountForm_cover__xJ1m9\",\"addLink\":\"AccountForm_addLink__19S7x\",\"link\":\"AccountForm_link__2hmHc\",\"imageError\":\"AccountForm_imageError__1pCRq\",\"actions\":\"AccountForm_actions__25KP3\",\"listTitle\":\"AccountForm_listTitle__2qDFO\",\"list\":\"AccountForm_list__3yoAm\",\"listItem\":\"AccountForm_listItem__GMhPc\",\"listForm\":\"AccountForm_listForm__3kYRI\",\"imageDrop\":\"AccountForm_imageDrop__2Q1wu\",\"activeImageDrop\":\"AccountForm_activeImageDrop__3qrHI\",\"rejectImageDrop\":\"AccountForm_rejectImageDrop__1QO1t\",\"image\":\"AccountForm_image__9TpPu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ProjectForm_image__145d3\",\"inputName\":\"ProjectForm_inputName__2H6y-\",\"input\":\"ProjectForm_input__1zO9s\",\"description\":\"ProjectForm_description__25lrE\",\"upload\":\"ProjectForm_upload__utQse\",\"imageRow\":\"ProjectForm_imageRow__3YcXy\",\"imageError\":\"ProjectForm_imageError__3me_n\",\"editor\":\"ProjectForm_editor__H8lPx\",\"imageDrop\":\"ProjectForm_imageDrop__3rtv9\",\"activeImageDrop\":\"ProjectForm_activeImageDrop__2e7wR\",\"rejectImageDrop\":\"ProjectForm_rejectImageDrop__33kmn\",\"actions\":\"ProjectForm_actions__19Xm4\",\"actionsRight\":\"ProjectForm_actionsRight__2EDz3\",\"actionsLeft\":\"ProjectForm_actionsLeft__2Ky_v\",\"public\":\"ProjectForm_public__21Are\",\"typesList\":\"ProjectForm_typesList__2aQo4\",\"typesTitle\":\"ProjectForm_typesTitle__3Zdkt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ProjectWidget_wrapper__F7R93\",\"cover\":\"ProjectWidget_cover__3XeHL\",\"link\":\"ProjectWidget_link__3L3h-\",\"name\":\"ProjectWidget_name__1fp3b\",\"text\":\"ProjectWidget_text__rwnKj\",\"info\":\"ProjectWidget_info__49Zko\",\"likes\":\"ProjectWidget_likes__3HzH3\",\"liked\":\"ProjectWidget_liked__1ckI_\",\"values\":\"ProjectWidget_values__3EDbt\",\"value\":\"ProjectWidget_value__n4tX-\",\"created\":\"ProjectWidget_created__3OV4G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Home_wrapper__2GHZO\",\"spinner\":\"Home_spinner__3Td27\",\"guest\":\"Home_guest__21Z8s\",\"guestInner\":\"Home_guestInner__3oqXQ\",\"guestImage\":\"Home_guestImage__1ZBSp\",\"guestContent\":\"Home_guestContent__27mYD\",\"guestName\":\"Home_guestName__3hn7b\",\"guestDesc\":\"Home_guestDesc__3ynML\",\"guestAction\":\"Home_guestAction__3kWlD\",\"content\":\"Home_content__2DCEc\",\"title\":\"Home_title__idnpY\",\"navigation\":\"Home_navigation__YXFwa\",\"active\":\"Home_active__-GjTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"StructureTree_wrapper__G04Cc\",\"row\":\"StructureTree_row__2zIqn\",\"rowName\":\"StructureTree_rowName__1kfA6\",\"addIcon\":\"StructureTree_addIcon__3D7FA\",\"importantIcon\":\"StructureTree_importantIcon__3Au-b\",\"emptyAdd\":\"StructureTree_emptyAdd__hMESM\",\"rowLink\":\"StructureTree_rowLink__GfU35\",\"activeLink\":\"StructureTree_activeLink__2QmhF\",\"rowContent\":\"StructureTree_rowContent__kIzWl\",\"rootRow\":\"StructureTree_rootRow__1Z6wh\",\"rowUnpublished\":\"StructureTree_rowUnpublished__15z67\",\"rowDeleted\":\"StructureTree_rowDeleted__LlRzO\"};","import { createStore, applyMiddleware, combineReducers, Middleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\n// import reduxLogger from 'redux-logger';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport { IUserInfo, User } from 'models/user';\nimport { IProject, IPage } from 'models/project';\nimport { IComment } from 'models/comment';\n\nexport interface IUserState {\n  user: User | null;\n  userInfo: IUserInfo | null;\n  loginShowed: boolean;\n  registerShowed: boolean;\n  forgetPasswordShowed: boolean;\n  openCommentForm: IComment | null | undefined;\n  events: any[] | null;\n}\nconst initialState: IUserState = {\n  user: null,\n  userInfo: null,\n  loginShowed: false,\n  registerShowed: false,\n  forgetPasswordShowed: false,\n  openCommentForm: undefined,\n  events: null,\n};\n\nexport enum UserActionType {\n  LOAD_USER_ACTION = 'LOAD_USER',\n  LOAD_USER_INFO_ACTION = 'LOAD_USER_INFO',\n  LOGIN_VISIBILITY_ACTION = 'LOGIN_VISIBILITY_CHANGED',\n  REGISTER_VISIBILITY_ACTION = 'REGISTER_VISIBILITY_CHANGED',\n  FORGET_PASSWORD_VISIBILITY_ACTION = 'FORGET_PASSWORD_VISIBILITY',\n  LOGOUT_ACTION = 'LOGOUT',\n  COMMENT_FORM_OPEN_ACTION = 'COMMENT_FORM_OPEN_ACTION',\n  EVENTS_LOADED_ACTION = 'EVENTS_LOADED_ACTION',\n  EVENT_READ_ACTION = 'EVENT_READ_ACTION',\n}\n\nexport function userReducer(state = initialState, action: { type: UserActionType, payload: any }): IUserState {\n  switch (action.type) {\n    case UserActionType.LOAD_USER_ACTION:\n      return { ...state, user: action.payload };\n    case UserActionType.LOGIN_VISIBILITY_ACTION:\n      return { ...state, loginShowed: action.payload };\n    case UserActionType.REGISTER_VISIBILITY_ACTION:\n      return { ...state, registerShowed: action.payload };\n    case UserActionType.FORGET_PASSWORD_VISIBILITY_ACTION:\n      return { ...state, forgetPasswordShowed: action.payload };\n    case UserActionType.LOAD_USER_INFO_ACTION:\n      return { ...state, userInfo: action.payload };\n    case UserActionType.COMMENT_FORM_OPEN_ACTION:\n      return { ...state, openCommentForm: action.payload };\n    case UserActionType.EVENTS_LOADED_ACTION:\n      return { ...state, events: action.payload };\n    case UserActionType.EVENT_READ_ACTION:\n      const events = state.events || [];\n      const index = events.findIndex(e => e._id.$oid === action.payload._id.$oid);\n      if (index === -1) {\n        return state;\n      }\n      events[index] = { ...action.payload, read: true };\n      return { ...state, events: [...events]};\n    case UserActionType.LOGOUT_ACTION:\n      return { ...initialState, events: null };\n    default:\n      return state;\n  }\n}\n\nexport interface IProjectState {\n  projects: IProject[];\n  project: IProject | null;\n  projectUsers: any;\n  page: IPage | null;\n  comments: IComment[] | null;\n  myProjects: any,\n}\nconst initialProjectState: IProjectState = {\n  projects: [],\n  project: null,\n  projectUsers: null,\n  page: null,\n  comments: null,\n  myProjects: undefined\n};\n\nexport enum ProjectActionType {\n  LOAD_PROJECTS_ACTION = 'LOAD_PROJECTS',\n  LOAD_PROJECT_ACTION = 'LOAD_PROJECT',\n  LOAD_PROJECT_USERS_ACTION = 'LOAD_PROJECT_USERS',\n  LOAD_PAGE_ACTION = 'LOAD_PAGE',\n  LOAD_COMMENTS_ACTION = 'LOAD_COMMENTS',\n  LOAD_MY_PROJECTS_ACTION = 'LOAD_MY_PROJECTS',\n}\n\nexport function projectReducer(state = initialProjectState, action: { type: ProjectActionType | UserActionType, payload: any }): IProjectState {\n  switch (action.type) {\n    case ProjectActionType.LOAD_PROJECTS_ACTION:\n      return { ...state, projects: action.payload };\n    case ProjectActionType.LOAD_PROJECT_ACTION:\n      return { ...state, project: action.payload };\n    case ProjectActionType.LOAD_COMMENTS_ACTION:\n      return { ...state, comments: action.payload };\n      case ProjectActionType.LOAD_PAGE_ACTION:\n        return { ...state, page: action.payload };\n    case ProjectActionType.LOAD_MY_PROJECTS_ACTION:\n        return { ...state, myProjects: action.payload }\n    case ProjectActionType.LOAD_PROJECT_USERS_ACTION:\n      return { ...state, projectUsers: action.payload }\n    case UserActionType.LOGOUT_ACTION:\n        return { ...initialProjectState };\n    \n    default:\n      return state;\n  }\n}\n\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  project: projectReducer,\n});\n\n\nexport type AppState = ReturnType<typeof rootReducer>;\n\nconst middlewares: Middleware[] = [\n  thunkMiddleware,\n];\n\nif (process.env.REACT_APP_ENVIRONMENT === 'development') {\n  // middlewares.push(reduxLogger);\n}\n\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(...middlewares)));\n\nexport default store;\n\n","export const apiEndpoint = process.env.REACT_APP_API_ENDPOINT || 'https://4000-fedoseevsm-cloudfiles-qsf1orvolxy.ws-eu102.gitpod.io';\nexport const staticBase = process.env.REACT_APP_STATIC_BASE  || 'https://4000-fedoseevsm-cloudfiles-qsf1orvolxy.ws-eu102.gitpod.io';\nexport const imageUrlBase = `${staticBase}/images`;","import axios, { AxiosResponse, AxiosRequestConfig } from 'axios';\nimport store, { UserActionType } from 'store';\nimport { apiEndpoint } from 'helpers/constants';\n\ntype IRequestMethod = 'get' | 'post' | 'patch' | 'delete' | 'put' | 'head';\n\ninterface ICancelableRequest<T> extends Promise<AxiosResponse<T>> {\n  cancel?: any;\n}\n\nexport function request<T>(\n  url: string, \n  method: IRequestMethod, \n  data?: any, \n  config?: AxiosRequestConfig\n): ICancelableRequest<T> {\n  const source = axios.CancelToken.source();\n  let request: ICancelableRequest<T>;\n  \n  const newConfig = config ? { ...config } : {};\n  newConfig.headers =  { ...newConfig.headers, Authorization: `Bearer ${JWT_TOKEN}`, \"X-Auth-Token\": \"\" };\n\n  if (method == 'post' || method === 'put' || method === 'patch') {\n    console.log(\"withMethod: \", {data});\n    request = axios[method]<T>(`${apiEndpoint}/${url}`, {data}, { ...newConfig, withCredentials: false, cancelToken: source.token });\n  } else {\n    console.log(\"notMethod\", {data});\n    request = axios[method]<T>(`${apiEndpoint}/${url}`, { ...newConfig, withCredentials: false, cancelToken: source.token });\n  }\n  request.cancel = (reason?: string) => source.cancel(reason || 'Cancel by user');\n  return request;\n}\n\nlet JWT_TOKEN = '';\nlet jwtRequest: any = null\nlet refreshTokenTimerId: any = null;\n\nexport function setJwtToken(token: string) {\n  JWT_TOKEN = token;\n}\n\nexport function getJwtToken() {\n  return JWT_TOKEN;\n}\n\nexport async function refreshToken() {\n  clearTimeout(refreshTokenTimerId);\n  refreshTokenTimerId = null;\n  /**\n   *    ,     .\n   */\n  jwtRequest = new Promise(() => {});\n  try {\n    const { data } = await request<any>('account/refresh-token', 'post', { withCredentials: false });\n    JWT_TOKEN = data.jwtToken;\n    startRefreshTokenTimer();\n    Promise.resolve(jwtRequest);\n    jwtRequest = null;\n  } catch (err) {\n    jwtRequest = null;\n    JWT_TOKEN = '';\n    console.error('Fail refresh token');\n    Promise.resolve(jwtRequest);    \n  } \n}\n\nwindow.onfocus = refreshToken;\n\nfunction startRefreshTokenTimer() {\n  const jwtToken = JSON.parse(atob(JWT_TOKEN.split('.')[1]));\n  const expires = new Date(jwtToken.exp * 1000);\n  const timeout = expires.getTime() - Date.now() - (60 * 1000);\n  refreshTokenTimerId = setTimeout(refreshToken, timeout);\n}\n\nexport async function authRequest<T>(\n  url: string, \n  method: IRequestMethod, \n  data?: any, \n  config?: AxiosRequestConfig\n): Promise<AxiosResponse<T>> {\n  if (jwtRequest) {\n    await jwtRequest;\n  }\n  const newConfig = config ? { ...config } : {};\n  newConfig.headers =  { ...newConfig.headers, Authorization: `Bearer ${JWT_TOKEN}` };\n  try {\n    const res = await request<T>(url, method, data, newConfig);\n    if ([401, 403].includes(res.status)) {\n      store.dispatch({ type: UserActionType.LOGOUT_ACTION, payload: null });\n      return Promise.reject(res);\n    }\n    return Promise.resolve(res);\n  } catch (err) {\n    return Promise.reject(err.response);\n  }\n  \n}","import { request, authRequest } from 'api/request';\nimport { IProject } from 'models/project';\nimport { IComment } from 'models/comment';\nimport { IUser, IUserInfo } from 'models/user';\nimport qs from 'query-string';\n\n\nexport async function getAccount() {\n  return authRequest<IUser>('account', 'get');\n}\n\nexport async function authenticate(email: string, password: string) {\n  return request<IUser>('api/user/login', 'post', { email: email.toLowerCase(), password: password });\n}\n\nexport async function register(first_name: string, last_name: string, email: string, password: string, language_code: string = \"ru-ru\") {\n  return request<any>('api/user', 'post', { first_name: first_name, last_name: last_name, email: email.toLowerCase(), password: password, language_code: language_code });\n}\n\nexport async function resendConfirmEmail(email: string, password: string) {\n  return request<IUser>('account/resend-confirm-email', 'post', { email: email.toLowerCase(), password });\n}\n\nexport async function logout() {\n  return authRequest<IUser>('account/revoke-token', 'post', {});\n}\n\nexport async function forgotPassword(email: string) {\n  return request<IUser>('account/forgot-password', 'post', { email: email.toLowerCase() });\n}\n\nexport async function validateResetToken(token: string) {\n  return request<IUser>('account/validate-reset-token', 'post', { token });\n}\n\nexport async function resetPassword(password: string, token: string) {\n  return request<any>('account/reset-password', 'post', { token, password });\n}\n\nexport async function signFb(code: string, redirectUri: string) {\n  return request<any>(`account/fb?code=${code}&redirect_uri=${redirectUri}`, 'get',);\n}\n\nexport async function signVk(code: string, redirectUri: string) {\n  return request<any>(`account/vk?code=${code}&redirect_uri=${redirectUri}`, 'get',);\n}\n\nexport async function signGoogle(code: string, redirectUri: string) {\n  return request<any>(`account/google?code=${code}&redirect_uri=${redirectUri}`, 'get',);\n}\n\nexport async function getUser(userId: number) {\n  return authRequest<IUser>(`users/${userId}`, 'get');\n}\n\nexport async function getUserInfo(userId?: number) {\n  const url = userId ? `users/${userId}/info` : 'account/info';\n  return authRequest<IUserInfo>(url, 'get');\n}\n\ninterface IAccountPayload {\n  name: string; \n  login: string; \n  city: string;\n  education: string;\n  tags: string[];\n  skills: string[];\n  links: string[];\n  cover: string | null;\n  coverFile: File | null;\n  userId?: number;\n}\n\nexport function updateUserInfo(payload: IAccountPayload) {\n  const { userId, name, login, city, education, tags, skills, links, cover, coverFile } = payload;\n  const url = userId ? `user/{userId}/info` : 'account/info';\n  const formData = new FormData();\n  if (coverFile) {\n    formData.append('coverFile', coverFile);\n  }\n  if (!coverFile && cover) {\n    formData.append('cover', cover);\n  }\n  formData.append('name', name);\n  formData.append('login', login);\n  formData.append('city', city);\n  formData.append('education', education);\n  \n  for (let tag of tags) {\n    formData.append('tags[]', tag);\n  }\n\n  for (let link of links) {\n    formData.append('links[]', link);\n  }\n\n  for (let skill of skills) {\n    formData.append('skills[]', skill);\n  }\n  \n  return authRequest<any>(url, 'put', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\n}\n\nexport async function getEvents() {\n  return authRequest<string[]>('events', 'get');\n}\n\nexport async function readEvent(eventId: number) {\n  return authRequest<IUser>(`events/${eventId}`, 'put');\n}\n\nexport async function getUserProjects(userId: number, page?: number) {\n  const params: { [key: string]: any } = {};\n  params.user = userId.toString();\n  if (page) {\n    params.page = page;\n  }\n  return request<any>(`projects?${qs.stringify(params)}`, 'get',);\n}\n\nexport async function getUserComments(userId: number) {\n  const url = `comments/?user=${userId}`;\n  return authRequest<IComment[]>(url, 'get');\n}","export interface IUser {\n  id: number;\n  name: string;\n  login: string;\n  jwtToken: string;\n  role: Role;\n  cover: string;\n}\n\nexport interface IUserInfo {\n  city: string;\n  education: string;\n  updated: Date;\n  tags: string[];\n  links: string[];\n  skills: string[];\n}\n\nexport enum Role {\n  Admin = 'Admin',\n  User = 'User',\n}\n\nexport class User implements IUser {\n  constructor(\n    public id: number, \n    public name: string, \n    public jwtToken: string, \n    public role: Role,\n    public login: string,\n    public cover: string,\n  ) {}\n\n  static FromResponse(data: any) {\n    return new User(data.id, data.name, data.jwtToken, data.role, data.login, data.cover);\n  }\n  \n  public get isAdmin(): boolean {\n    return this.role === Role.Admin\n  }\n}\n","import { useSelector } from 'react-redux';\nimport { AppState } from 'store';\n\nexport default function useUser() {  \n  const { user, loginShowed, registerShowed, forgetPasswordShowed, events } = useSelector((s: AppState) => s.user);\n  return { user, loginShowed, registerShowed, forgetPasswordShowed, events }\n}","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 266,\n    height: 48,\n    viewBox: \"0 0 266 48\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.85 38V3.1H17.35C18.9833 3.1 20.45 3.38333 21.75 3.95C23.05 4.48333 24.15 5.23333 25.05 6.2C25.9833 7.16666 26.7 8.35 27.2 9.75C27.7 11.1167 27.95 12.6167 27.95 14.25C27.95 15.9167 27.7 17.4333 27.2 18.8C26.7 20.1667 25.9833 21.3333 25.05 22.3C24.15 23.2667 23.05 24.0333 21.75 24.6C20.45 25.1333 18.9833 25.4 17.35 25.4H8.45V38H0.85ZM8.45 18.8H16.45C17.5833 18.8 18.4667 18.5167 19.1 17.95C19.7667 17.35 20.1 16.4833 20.1 15.35V13.15C20.1 12.0167 19.7667 11.1667 19.1 10.6C18.4667 10 17.5833 9.7 16.45 9.7H8.45V18.8ZM32.7742 38V11.75H40.1742V17.45H40.4242C40.5576 16.7167 40.7909 16.0167 41.1242 15.35C41.4576 14.65 41.8909 14.0333 42.4242 13.5C42.9909 12.9667 43.6576 12.55 44.4242 12.25C45.1909 11.9167 46.0909 11.75 47.1242 11.75H48.4242V18.65H46.5742C44.4076 18.65 42.7909 18.9333 41.7242 19.5C40.6909 20.0667 40.1742 21.1167 40.1742 22.65V38H32.7742ZM63.3949 38.6C61.4616 38.6 59.7283 38.2833 58.1949 37.65C56.6949 37.0167 55.4116 36.1 54.3449 34.9C53.3116 33.7 52.5116 32.25 51.9449 30.55C51.3783 28.85 51.0949 26.95 51.0949 24.85C51.0949 22.75 51.3783 20.85 51.9449 19.15C52.5116 17.45 53.3116 16.0167 54.3449 14.85C55.4116 13.65 56.6949 12.7333 58.1949 12.1C59.7283 11.4667 61.4616 11.15 63.3949 11.15C65.3283 11.15 67.0449 11.4667 68.5449 12.1C70.0783 12.7333 71.3616 13.65 72.3949 14.85C73.4616 16.0167 74.2783 17.45 74.8449 19.15C75.4116 20.85 75.6949 22.75 75.6949 24.85C75.6949 26.95 75.4116 28.85 74.8449 30.55C74.2783 32.25 73.4616 33.7 72.3949 34.9C71.3616 36.1 70.0783 37.0167 68.5449 37.65C67.0449 38.2833 65.3283 38.6 63.3949 38.6ZM63.3949 32.75C64.8616 32.75 65.9949 32.3 66.7949 31.4C67.5949 30.5 67.9949 29.2167 67.9949 27.55V22.2C67.9949 20.5333 67.5949 19.25 66.7949 18.35C65.9949 17.45 64.8616 17 63.3949 17C61.9283 17 60.7949 17.45 59.9949 18.35C59.1949 19.25 58.7949 20.5333 58.7949 22.2V27.55C58.7949 29.2167 59.1949 30.5 59.9949 31.4C60.7949 32.3 61.9283 32.75 63.3949 32.75ZM80.9676 11.75H88.3676V40.8C88.3676 43.1333 87.7842 44.9167 86.6176 46.15C85.4509 47.3833 83.5676 48 80.9676 48H77.0676V42.25H80.9676V11.75ZM84.6676 8.95C83.1676 8.95 82.0676 8.61667 81.3676 7.95C80.7009 7.25 80.3676 6.36666 80.3676 5.3V4.2C80.3676 3.13333 80.7009 2.26667 81.3676 1.6C82.0676 0.899999 83.1676 0.549999 84.6676 0.549999C86.1676 0.549999 87.2509 0.899999 87.9176 1.6C88.6176 2.26667 88.9676 3.13333 88.9676 4.2V5.3C88.9676 6.36666 88.6176 7.25 87.9176 7.95C87.2509 8.61667 86.1676 8.95 84.6676 8.95ZM106.224 38.6C104.224 38.6 102.441 38.2833 100.874 37.65C99.3076 36.9833 97.9742 36.0667 96.8742 34.9C95.8076 33.7 94.9909 32.25 94.4242 30.55C93.8909 28.85 93.6242 26.95 93.6242 24.85C93.6242 22.7833 93.8909 20.9167 94.4242 19.25C94.9576 17.55 95.7409 16.1 96.7742 14.9C97.8409 13.7 99.1409 12.7833 100.674 12.15C102.208 11.4833 103.958 11.15 105.924 11.15C108.091 11.15 109.941 11.5167 111.474 12.25C113.041 12.9833 114.308 13.9667 115.274 15.2C116.274 16.4333 116.991 17.8667 117.424 19.5C117.891 21.1 118.124 22.7833 118.124 24.55V26.75H101.274V27.15C101.274 28.8833 101.741 30.2667 102.674 31.3C103.608 32.3 105.074 32.8 107.074 32.8C108.608 32.8 109.858 32.5 110.824 31.9C111.791 31.2667 112.691 30.5167 113.524 29.65L117.224 34.25C116.058 35.6167 114.524 36.6833 112.624 37.45C110.758 38.2167 108.624 38.6 106.224 38.6ZM106.074 16.6C104.574 16.6 103.391 17.1 102.524 18.1C101.691 19.0667 101.274 20.3667 101.274 22V22.4H110.474V21.95C110.474 20.35 110.108 19.0667 109.374 18.1C108.674 17.1 107.574 16.6 106.074 16.6ZM133.95 38.6C131.984 38.6 130.234 38.2833 128.7 37.65C127.167 36.9833 125.884 36.0667 124.85 34.9C123.817 33.7 123.034 32.25 122.5 30.55C121.967 28.85 121.7 26.95 121.7 24.85C121.7 22.75 121.967 20.8667 122.5 19.2C123.034 17.5 123.817 16.05 124.85 14.85C125.884 13.65 127.167 12.7333 128.7 12.1C130.234 11.4667 131.984 11.15 133.95 11.15C136.617 11.15 138.834 11.75 140.6 12.95C142.4 14.15 143.684 15.8333 144.45 18L138.45 20.6C138.217 19.6 137.734 18.75 137 18.05C136.267 17.35 135.25 17 133.95 17C132.45 17 131.317 17.5 130.55 18.5C129.784 19.4667 129.4 20.7833 129.4 22.45V27.35C129.4 29.0167 129.784 30.3333 130.55 31.3C131.317 32.2667 132.45 32.75 133.95 32.75C135.284 32.75 136.334 32.4 137.1 31.7C137.9 30.9667 138.484 30.0167 138.85 28.85L144.6 31.35C143.734 33.85 142.384 35.6833 140.55 36.85C138.75 38.0167 136.55 38.6 133.95 38.6ZM158.38 38C155.814 38 153.864 37.35 152.53 36.05C151.23 34.75 150.58 32.85 150.58 30.35V17.5H146.88V11.75H148.73C149.73 11.75 150.414 11.5167 150.78 11.05C151.147 10.55 151.33 9.85 151.33 8.95V4.65H157.98V11.75H163.18V17.5H157.98V32.25H162.78V38H158.38ZM191.688 38.6C187.121 38.6 183.738 37.0167 181.538 33.85C179.338 30.6833 178.238 26.25 178.238 20.55C178.238 14.85 179.338 10.4167 181.538 7.25C183.738 4.08333 187.121 2.5 191.688 2.5C196.254 2.5 199.638 4.08333 201.838 7.25C204.038 10.4167 205.138 14.85 205.138 20.55C205.138 26.25 204.038 30.6833 201.838 33.85C199.638 37.0167 196.254 38.6 191.688 38.6ZM191.688 32.25C193.688 32.25 195.071 31.5167 195.838 30.05C196.604 28.5833 196.988 26.5167 196.988 23.85V17.25C196.988 14.5833 196.604 12.5167 195.838 11.05C195.071 9.58333 193.688 8.85 191.688 8.85C189.688 8.85 188.304 9.58333 187.538 11.05C186.771 12.5167 186.388 14.5833 186.388 17.25V23.85C186.388 26.5167 186.771 28.5833 187.538 30.05C188.304 31.5167 189.688 32.25 191.688 32.25ZM234.218 38H209.518V31.15L220.268 21.95C221.235 21.1167 222.051 20.3667 222.718 19.7C223.385 19 223.918 18.3333 224.318 17.7C224.751 17.0333 225.051 16.3833 225.218 15.75C225.418 15.1167 225.518 14.4333 225.518 13.7V13C225.518 12.3333 225.385 11.75 225.118 11.25C224.851 10.75 224.501 10.3333 224.068 10C223.635 9.66666 223.135 9.41666 222.568 9.25C222.035 9.08333 221.485 9 220.918 9C220.085 9 219.351 9.13333 218.718 9.4C218.118 9.66667 217.585 10.0333 217.118 10.5C216.685 10.9333 216.318 11.45 216.018 12.05C215.718 12.6167 215.485 13.2333 215.318 13.9L208.768 11.4C209.168 10.2 209.718 9.06667 210.418 8C211.118 6.9 211.985 5.95 213.018 5.15C214.085 4.31667 215.335 3.66666 216.768 3.2C218.201 2.73333 219.818 2.5 221.618 2.5C223.518 2.5 225.201 2.76667 226.668 3.3C228.135 3.83333 229.368 4.56666 230.368 5.5C231.401 6.43333 232.185 7.55 232.718 8.85C233.251 10.1167 233.518 11.5 233.518 13C233.518 14.5 233.268 15.8667 232.768 17.1C232.268 18.3333 231.585 19.5 230.718 20.6C229.885 21.6667 228.901 22.6833 227.768 23.65C226.635 24.6167 225.451 25.6 224.218 26.6L217.718 31.7H234.218V38ZM241.348 38V31.95H250.748V8.55H250.298L243.198 17.85L238.398 14.1L246.748 3.1H258.248V31.95H265.648V38H241.348Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.0c1f04e8.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgBell = function SvgBell(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 27,\n    height: 30,\n    viewBox: \"0 0 27 30\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.6243 30C14.6188 30 15.5726 29.6049 16.2758 28.9017C16.979 28.1985 17.3741 27.2447 17.3741 26.2502H9.87449C9.87449 27.2447 10.2696 28.1985 10.9728 28.9017C11.676 29.6049 12.6298 30 13.6243 30ZM15.4898 2.06215C15.516 1.80146 15.4872 1.53817 15.4054 1.28927C15.3235 1.04037 15.1904 0.811389 15.0147 0.617091C14.8389 0.422792 14.6243 0.267491 14.3849 0.161203C14.1454 0.0549148 13.8863 0 13.6243 0C13.3623 0 13.1032 0.0549148 12.8637 0.161203C12.6242 0.267491 12.4097 0.422792 12.2339 0.617091C12.0581 0.811389 11.925 1.04037 11.8432 1.28927C11.7614 1.53817 11.7326 1.80146 11.7588 2.06215C9.6396 2.49319 7.73452 3.64337 6.36611 5.31791C4.99771 6.99246 4.25007 9.08847 4.24979 11.251C4.24979 13.3097 3.31235 22.5004 0.5 24.3753H26.7486C23.9362 22.5004 22.9988 13.3097 22.9988 11.251C22.9988 6.71377 19.7739 2.92648 15.4898 2.06215Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBell, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bell.cc2ac6aa.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgFolder = function SvgFolder(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 38,\n    height: 30,\n    viewBox: \"0 0 38 30\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 27.8125C0 28.3927 0.230468 28.9491 0.640704 29.3593C1.05094 29.7695 1.60734 30 2.1875 30H35.3125C35.8927 30 36.4491 29.7695 36.8593 29.3593C37.2695 28.9491 37.5 28.3927 37.5 27.8125V11.25H0V27.8125ZM37.5 4.6875C37.5 4.10734 37.2695 3.55094 36.8593 3.1407C36.4491 2.73047 35.8927 2.5 35.3125 2.5H15.3781L11.6281 0H2.1875C1.60734 0 1.05094 0.230468 0.640704 0.640704C0.230468 1.05094 0 1.60734 0 2.1875V8.75H37.5V4.6875Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFolder, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/folder.3257850a.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgSearch = function SvgSearch(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 18,\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.82996 14.6599C11.602 14.6599 14.6599 11.602 14.6599 7.82996C14.6599 4.05788 11.602 1 7.82996 1C4.05788 1 1 4.05788 1 7.82996C1 11.602 4.05788 14.6599 7.82996 14.6599Z\",\n    stroke: \"black\",\n    strokeWidth: 1.06244,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.9528 12.9526L16.9369 16.9368\",\n    stroke: \"black\",\n    strokeWidth: 1.06244,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSearch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/search.c2703a14.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgDialog = function SvgDialog(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 30,\n    viewBox: \"0 0 30 30\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M27 0H3C2.20435 0 1.44129 0.31607 0.87868 0.87868C0.31607 1.44129 0 2.20435 0 3V30L6 24H27C27.7956 24 28.5587 23.6839 29.1213 23.1213C29.6839 22.5587 30 21.7956 30 21V3C30 2.20435 29.6839 1.44129 29.1213 0.87868C28.5587 0.31607 27.7956 0 27 0ZM9 18H6V15H9V18ZM9 13.5H6V10.5H9V13.5ZM9 9H6V6H9V9ZM19.5 18H12V15H19.5V18ZM24 13.5H12V10.5H24V13.5ZM24 9H12V6H24V9Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgDialog, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dialog.c5bf2597.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useState, useEffect, useRef } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport cx from 'classnames';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport useUser from 'hooks/useUser';\nimport { useDispatch } from 'react-redux';\nimport { UserActionType } from 'store';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { staticBase } from 'helpers/constants';\nimport { readEvent } from 'api/user';\n\nimport { ReactComponent as Logo } from 'icons/logo.svg';\nimport { ReactComponent as Bell } from 'icons/bell.svg';\nimport { ReactComponent as Folder } from 'icons/folder.svg';\nimport { ReactComponent as Search } from 'icons/search.svg';\n\nimport s from './Header.module.scss';\n\nexport default function HeaderCmp() {\n  const dispatch = useDispatch();\n  const { user, events } = useUser();\n  const [displayMenu, setDisplayMenu] = useState(false);\n  const [notificationShowed, setNotificationShowed] = useState(false);\n  const history = useHistory();\n  const eventsListRef = useRef<any>(null);\n  const [search, setSearch] = useState('');\n\n  const location = useLocation();\n\n  useEffect(\n    () => {\n      document.addEventListener('click', e => {\n        if (eventsListRef.current && eventsListRef.current.contains(e.target)) {\n          return;\n        }\n        setNotificationShowed(false);\n      })\n    },\n    []\n  );\n\n  useEffect(() => {\n    setDisplayMenu(false);\n  }, [location]);\n\n  const onLogin = useCallback(\n    () => {\n      dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true })\n    },\n    [], // eslint-disable-line\n  );\n\n  useEffect(\n    () => {\n      setNotificationShowed(false);\n    },\n    [user]\n  );\n\n  useEffect(\n    () => {\n      if (!displayMenu) {\n        document.body.classList.remove(s.withMenu);\n      } else {\n        document.body.classList.add(s.withMenu);\n      }\n    },\n    [displayMenu]\n  )\n\n\n  return (\n    <div className={s.container} area-label=\"Project 021\">\n      <div className={cx('content', s.inner)}>\n        <div className={s.left}>\n          <MenuIcon\n            className={s.menuIcon}\n            onClick={() => setDisplayMenu(!displayMenu)}\n          />\n          <Link to=\"/\">\n            <Logo className={s.logo} />\n          </Link>\n          <div className={s.links}>\n            <Link to=\"/create-project\" className={cx(s.link, s.authLink)}>\n              \n            </Link>\n          </div>\n          <span ></span>\n        </div>\n        <div className={s.right}>\n          <form\n            className={s.search}\n            onSubmit={e => {\n              e.preventDefault();\n              history.push(`/search?q=${search}`);\n              setSearch('');\n            }}\n          >\n            <input value={search} onChange={e => setSearch(e.target.value.substring(0, 100))} placeholder=\"...\" />\n            <button type=\"submit\" disabled={search.trim().length === 0}>\n              <Search />\n            </button>\n          </form>\n          {user ? (\n            <div className={s.auth}>\n              <div className={s.authIcon} ref={eventsListRef} onClick={() => setNotificationShowed(!notificationShowed)}>\n                <Tooltip classes={{ tooltip: 'tooltip' }} title=\"\">\n                  <Bell />\n                </Tooltip>\n                {events && (events.filter(n => !n.read).length > 0 && <div className={s.authIconCount} />)}\n\n                {notificationShowed && events && (\n                  <div className={s.notifications} onClick={e => e.stopPropagation()}>\n                  <div className={s.notificationsListTitle}></div>\n                    {events.length === 0 && (\n                      <div className={s.notificationsEmpty}> </div>\n                    )}\n                    {events.length > 0 && (\n                      <div className={s.notificationsList}>\n                        {[...events].reverse().map(n => {\n                          let link = '';\n                          console.log(n);\n                          if (n.type === 'comment') {\n                            link = `/project/${n.meta.projectId.$numberInt}${n.meta.pageId ? `/${n.meta.pageId.$numberInt}` : ``}#comment${n.meta.comment.id.$numberInt}`;\n                          }\n\n                          if (n.type === 'newRequest') {\n                            link = `/project/${n.meta.projectId.$numberInt}`;\n                          }\n\n                          if (n.type === 'newFollower') {\n                            link = `/project/${n.meta.projectId.$numberInt}`;\n                          }\n                          if (n.type === 'likeComment') {\n                            link = `/project/${n.meta.projectId.$numberInt}${n.meta.pageId ? `/${n.meta.pageId.$numberInt}` : ``}#comment${n.meta.comment.id.$numberInt}`;\n                          }\n                          if (n.type === 'likeProject') {\n                            link = `/project/${n.meta.projectId.$numberInt}`;\n                          }\n                          if (n.type === 'editPage') {\n                            link = `/project/${n.meta.projectId.$numberInt}/${n.meta.pageId.$numberInt}/edit`;\n                          }\n                          return (\n                            <div \n                              key={n._id.$oid}\n                              className={cx(s.notification, { [s.unreadNotification]: !n.read })}\n                              onClick={() => {\n                                setNotificationShowed(false);\n                                history.push(link);\n                              }}\n                              onMouseEnter={async () => {\n                                if (n.read) {\n                                  return;\n                                }\n                                try {\n                                  await readEvent(n._id.$oid);\n                                  dispatch({\n                                    type: UserActionType.EVENT_READ_ACTION,\n                                    payload: n,\n                                  });\n                                } catch (err) {\n                                  console.error(err)\n                                }\n                              }}\n                            >\n                              {n.type === 'comment' && (\n                                <><b>{n.meta.user.name}</b>  {n.meta.projectName ? <>   <b>{n.meta.projectName}</b></> : ''}</>\n                              )}\n                              {n.type === 'newRequest' && (\n                                <><b>{n.meta.user.name}</b>  {n.meta.projectName ? <>   <b>{n.meta.projectName}</b></> : ''}</>\n                              )}\n                              {n.type === 'newFollower' && (\n                                <><b>{n.meta.user.name}</b> {n.meta.projectName ? <>   <b>{n.meta.projectName}</b></> : ''}</>\n                              )}\n                              {n.type === 'likeComment' && (\n                                <><b>{n.meta.user.name}</b>   </>\n                              )}\n                              {n.type === 'likeProject' && (\n                                <><b>{n.meta.user.name}</b>  {n.meta.projectName ? <>  <b>{n.meta.projectName}</b></> : ''}</>\n                              )}\n                              {n.type === 'editPage' && (\n                                <><b>{n.meta.user.name}</b>   {n.meta.projectName ? <>   <b>{n.meta.projectName}</b></> : ''}</>\n                              )}\n                            </div>\n                          )\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n                \n              </div>\n              <div className={s.authIcon}>\n                <Link to=\"/my-projects\">\n                  <Tooltip classes={{ tooltip: 'tooltip' }} title=\" \">\n                    <Folder /> \n                  </Tooltip>\n                </Link>\n              </div>\n              <Link\n                to=\"/account\" \n                className={s.user}\n                style={{ backgroundImage: user.cover && `url(${user.cover.startsWith('images/') ? `${staticBase}/${user.cover}` : user.cover})` }}\n              />\n            </div>\n          ) : (<span className={s.link} onClick={onLogin}></span>)}\n            \n          \n        </div>\n      </div>\n      {displayMenu && (\n        <>\n          <div className={s.overlay} onClick={() => setDisplayMenu(false)} />\n          <div className={cx(s.menu, { [s.hidden]: !displayMenu })}>\n            <Link to=\"/\">\n              <Logo className={s.logo} />\n            </Link>\n            <form\n              className={s.search}\n              onSubmit={e => {\n                e.preventDefault();\n                history.push(`/search?q=${search}`);\n                setSearch('');\n              }}\n            >\n              <input value={search} onChange={e => setSearch(e.target.value.substring(0, 100))} placeholder=\"...\" />\n              <button type=\"submit\" disabled={search.trim().length === 0}>\n                <Search />\n              </button>\n            </form>\n            <ul>\n              <li className={s.menuRow}>\n                <Link to=\"/create-project\" className={cx(s.link, s.authLink)}>\n                  \n                </Link>\n              </li>\n              <li className={s.menuRow}>\n                <Link to=\"/my-projects\" className={cx(s.link, s.authLink)}>\n                  M \n                </Link>\n              </li>\n              \n              \n            </ul>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgPaper = function SvgPaper(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 34,\n    height: 30,\n    viewBox: \"0 0 34 30\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.4315 21.0087H6.48892V4.45602C6.4897 1.98943 8.46829 0 10.9214 0H28.8872C28.966 0 29.0456 0 29.1245 0.0396332C31.5776 0.31862 33.3189 2.50699 33.0816 4.97358C32.8444 7.04228 31.2221 8.71386 29.1245 8.95244C29.0456 8.95244 28.966 8.99207 28.8872 8.99207H28.6499V25.544V25.5836C28.6105 28.0106 26.6319 30 24.2182 30H4.74916H4.63013H4.43227C1.97913 30 0.000537872 28.0106 0.000537872 25.544C-0.0396538 22.9981 1.97835 21.0087 4.4315 21.0087ZM28.6499 6.56512V6.52549C29.7969 6.52549 30.7073 5.61004 30.7073 4.45602C30.7073 3.30199 29.7969 2.38732 28.6499 2.38732H14.8392C15.5116 3.70065 15.5116 5.25179 14.8392 6.56512H28.6499ZM9.65544 22.8388H25.8799V20.4515H9.65544V22.8388ZM9.65544 18.0642H25.8799V15.6769H9.65544V18.0642ZM9.65544 13.2896H25.8799V10.9022H9.65544V13.2896ZM4.39208 27.5334C5.53982 27.5334 6.44951 26.618 6.44951 25.4647V23.396H4.39208C3.24434 23.396 2.33465 24.3115 2.33465 25.4647C2.33465 26.6187 3.24434 27.5334 4.39208 27.5334Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPaper, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/paper.699bcde2.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgInfo = function SvgInfo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 30,\n    viewBox: \"0 0 30 30\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.5 10.5H13.5V7.5H16.5V10.5ZM16.5 22.5H13.5V13.5H16.5V22.5ZM15 0C13.0302 0 11.0796 0.387987 9.25975 1.14181C7.43986 1.89563 5.78628 3.00052 4.3934 4.3934C1.58035 7.20644 0 11.0218 0 15C0 18.9782 1.58035 22.7936 4.3934 25.6066C5.78628 26.9995 7.43986 28.1044 9.25975 28.8582C11.0796 29.612 13.0302 30 15 30C18.9782 30 22.7936 28.4196 25.6066 25.6066C28.4196 22.7936 30 18.9782 30 15C30 13.0302 29.612 11.0796 28.8582 9.25975C28.1044 7.43986 26.9995 5.78628 25.6066 4.3934C24.2137 3.00052 22.5601 1.89563 20.7403 1.14181C18.9204 0.387987 16.9698 0 15 0Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInfo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/info.e7f1c0a4.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport cx from 'classnames';\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as Dialog } from 'icons/dialog.svg';\nimport { ReactComponent as Paper } from 'icons/paper.svg';\nimport { ReactComponent as Info } from 'icons/info.svg';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport s from './Footer.module.scss';\n\nexport default function FooterCmp() {\n  return (\n    <div className={s.wrapper}>\n      <div className={cx('content', s.inner)}>\n        <div className={s.copy}>Project021.org (c) 2020</div>\n        <div className={s.links}>\n          <a href=\"https://project021.org\" target=\"_blank\">\n            <Tooltip classes={{ tooltip: 'tooltip' }} title=\" \" placement=\"top\">\n              <Info />\n            </Tooltip>\n          </a>\n          <Link to=\"/agreement\">\n            <Tooltip classes={{ tooltip: 'tooltip' }} title=\"\" placement=\"top\">\n              <Paper />\n            </Tooltip>\n          </Link>\n          <a href=\"https://t.me/Community021\" target=\"_blank\">\n            <Tooltip classes={{ tooltip: 'tooltip' }} title=\" \" placement=\"top\">\n              <Dialog />\n            </Tooltip>\n          </a>\n        </div>\n      </div>\n      \n    </div>\n  );\n}","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgLike = function SvgLike(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 10,\n    height: 10,\n    viewBox: \"0 0 10 10\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9 3H6.194L6.7555 1.3165C6.8565 1.0125 6.8055 0.6755 6.618 0.4155C6.4305 0.1555 6.1265 0 5.806 0H5C4.8515 0 4.711 0.0659999 4.6155 0.18L2.2655 3H1C0.4485 3 0 3.4485 0 4V8.5C0 9.0515 0.4485 9.5 1 9.5H7.6535C7.85694 9.49932 8.05539 9.43692 8.22261 9.32104C8.38982 9.20516 8.51793 9.04125 8.59 8.851L9.9685 5.1755C9.98943 5.11936 10.0001 5.05991 10 5V4C10 3.4485 9.5515 3 9 3ZM1 4H2V8.5H1V4ZM9 4.9095L7.6535 8.5H3V3.681L5.234 1H5.807L5.026 3.3415C5.00065 3.41666 4.99357 3.49678 5.00537 3.57521C5.01717 3.65365 5.04749 3.72814 5.09383 3.79252C5.14017 3.8569 5.20119 3.9093 5.27182 3.94538C5.34246 3.98146 5.42068 4.00019 5.5 4H9V4.9095Z\",\n    fill: \"currentColor\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLike, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/like.c15cb6b2.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgComment = function SvgComment(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 13,\n    height: 13,\n    viewBox: \"0 0 13 13\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.96969 3.61715H9.95008V4.81323H3.96969V3.61715ZM3.96969 6.00931H8.15596V7.20538H3.96969V6.00931Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.7442 0.626953H2.17557C1.51593 0.626953 0.979492 1.16339 0.979492 1.82303V12.5877L4.16884 10.1956H11.7442C12.4038 10.1956 12.9403 9.65914 12.9403 8.9995V1.82303C12.9403 1.16339 12.4038 0.626953 11.7442 0.626953ZM11.7442 8.9995H3.77054L2.17557 10.1956V1.82303H11.7442V8.9995Z\",\n    fill: \"black\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgComment, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/comment.64d1ab5e.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport cx from 'classnames';\nimport moment from 'moment-timezone';\nimport { Link } from 'react-router-dom';\nimport { IProject } from 'models/project';\nimport { staticBase } from 'helpers/constants';\nimport { ReactComponent as Like } from 'icons/like.svg';\nimport { ReactComponent as CommentIcon } from 'icons/comment.svg';\nimport s from './ProjectWidget.module.scss';\n\n\ninterface IProps {\n  project: IProject;\n  className?: string;\n  onLike?: any;\n}\n\nexport default function ProjectWidget({ project, className, onLike }: IProps) {\n  return (\n    <div className={cx(s.wrapper, { [className!]: !!className })}>\n      <Link className={s.link} to={`/project/${project.id}`}>\n        <div className={s.cover} style={{ backgroundImage: `url(${staticBase}/${project.cover.startsWith('images/') ? project.cover : `images/${project.cover}`})` }} />\n        <div title={s.name} className={s.name}>{project.name}{project.draft ? ' (unpublished)' : ''}</div>\n        <div className={s.text}>{project.description.substring(0, 300)}{project.description.length > 300 && '...'}</div>\n        <div className={s.info}>\n          <div className={s.values}>\n            <div\n              className={cx(s.value, s.likes, { [s.liked]: project.liked })}\n              onClick={(e: any) => {\n                e.preventDefault();\n                e.stopPropagation();\n                onLike(project);\n              }}\n            >\n              <Like />\n              <span>\n                {project.likesCount}\n              </span>\n            </div>\n            <div className={s.value}>\n              <CommentIcon />\n              <span>\n                {project.commentsCount}\n              </span>\n            </div>\n          </div>\n          <div className={s.created}>\n            {moment.utc(project.created).local().format('DD.MM.YYYY')}\n          </div>\n        </div>\n      </Link>\n    </div>\n  )\n}","import React from 'react';\nimport cx from 'classnames';\nimport { IProject } from 'models/project';\nimport ProjectWidget from 'components/project/ProjectWidget/ProjectWidget';\nimport s from './ProjectsList.module.scss'\n\ninterface IProps {\n  projects: IProject[];\n  className?: string;\n  childClassName?: string;\n  hasMore?: boolean;\n  onMoreLoad?: any;\n  disabled?: boolean;\n  onLike?: any;\n  moreLoading?: boolean;\n\n}\nexport default function ProjectsList({ projects, className, childClassName, hasMore, onMoreLoad, disabled, onLike, moreLoading }: IProps) {\n  return (\n    <div className={s.wrapper}>\n      {projects.length ? (\n        <div className={cx(s.projects, { [className!]: !!className })}>\n          {projects.map(project => (\n            <ProjectWidget \n              className={cx(s.project, { [childClassName!]: !!childClassName })}\n              key={project.id}\n              project={project} \n              onLike={onLike}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className={s.empty}></div>\n      )}\n      {hasMore && (\n        <div className={s.more}>\n          <button className={cx('button', 'button-primary')} disabled={disabled} onClick={onMoreLoad}> </button>\n        </div>\n      )}\n    </div>\n  )\n}","import { request, authRequest } from 'api/request';\nimport qs from 'query-string';\nimport { IPage, IProject } from 'models/project';\n\nexport function getProjects(type: number, page?: number) {\n  const params: { [key: string]: any } = {};\n  params.type = type;\n  if (page) {\n    params.page = page;\n  }\n  \n  return request<any>(`projects?${qs.stringify(params)}`, 'get',);\n}\n\nexport function searchProjects(q: string, page?: number) {\n  const params: { [key: string]: any } = {};\n  params.q = q;\n  if (page) {\n    params.page = page;\n  }\n  \n  return request<any>(`projects?${qs.stringify(params)}`, 'get',);\n}\n\n\n\n\nexport function getMyProjects(projectType: number, listType: number, page?: number) {\n  const params: { [key: string]: any } = {};\n  params.type = projectType;\n  params.list = listType;\n  if (page) {\n    params.page = page;\n  }\n  return request<any>(`account/projects?${qs.stringify(params)}`, 'get');\n}\n\nexport async function getProject(projectId: number) {\n  return request<any>(`projects/${projectId}`, 'get');\n}\n\nexport async function deleteProject(projectId: number) {\n  return authRequest<any>(`projects/${projectId}`, 'delete');\n}\n\nexport function createProject(name: string, description: string, content: string, data: any, cover: File, draft: boolean, type: number) {\n  const formData = new FormData();\n  formData.append('cover', cover!);\n  formData.append('name', name);\n  formData.append('description', description);\n  formData.append('content', content);\n  formData.append('data', JSON.stringify(data));\n  formData.append('draft', draft.toString());\n  formData.append('type', type.toString());\n  // return authRequest<IProject>('api/project/new', 'post', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\n  return authRequest<IProject>('api/project/new', 'post', {name: name, description: description} );\n}\n\nexport async function updateProject(id: number, name: string, description: string, content: string, data: any, cover: File | null, draft: boolean) {\n  const formData = new FormData();\n  if (cover) {\n    formData.append('cover', cover!);\n  }\n  formData.append('name', name);\n  formData.append('description', description);\n  formData.append('content', content);\n  formData.append('data', JSON.stringify(data));\n  formData.append('draft', draft.toString());\n  return authRequest<IProject>(`projects/${id}`, 'put', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\n}\n\nexport function likeProject(projectId: number) {\n  return authRequest<any>(`projects/${projectId}/like`, 'post');\n}\n\nexport function getProjectPages(projectId: number) {\n  return request<IPage[]>(`projects/${projectId}/pages`, 'get');\n}\n\nexport function createPage(projectId: number, parentId?: number) {\n  return authRequest<IPage>(`projects/${projectId}/pages${parentId ? `?parent=${parentId}` : ''}`, 'post');\n}\n\nexport async function getPage(projectId: number, pageId: number) {\n  return request<IPage>(`projects/${projectId}/pages/${pageId}`, 'get');\n}\n\nexport async function updatePage(page: IPage, data: any, files?: File[]) {\n  const formData = new FormData();\n  if (files) {\n    files.forEach(f => {\n      formData.append('newFiles', f);    \n    })\n  }\n  if (page.files) {\n    page.files.forEach(f => {\n      formData.append('files', f.id.toString());    \n    })\n  }\n  formData.append('name', page.name);\n  formData.append('data', JSON.stringify(data));\n  formData.append('content', page.content);\n  formData.append('important', page.important!.toString());\n  formData.append('draft', page.draft!.toString());\n  return authRequest<IProject>(`projects/${page.projectId}/pages/${page.id}`, 'put', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\n}\n\nexport async function deleteProjectPage(projectId: number, pageId: number) {\n  return authRequest<IProject>(`projects/${projectId}/pages/${pageId}`, 'delete');\n}\n\n\nexport function toggleProjectFollowing(projectId: number, following: boolean) {\n  return authRequest<IPage>(`projects/${projectId}/follow?value=${+following}`, 'post');\n}\n\nexport function toggleProjectRequest(projectId: number, following: boolean) {\n  const formData = new FormData();\n  formData.set('following', following.toString());\n  return authRequest<IPage>(`projects/${projectId}/request?value=${+following}`, 'post');\n}\n\nexport function leaveProject(projectId: number) {\n  return authRequest<IPage>(`projects/${projectId}/leave`, 'post');\n}\n\nexport function getUsers(projectId: number) {\n  return authRequest<IPage>(`projects/${projectId}/users`, 'get');\n}\n\nexport function getFollowers(projectId: number) {\n  return authRequest<IPage>(`projects/${projectId}/followers`, 'get');\n}\n\nexport function getRequests(projectId: number) {\n  return authRequest<IPage>(`projects/${projectId}/requests`, 'get');\n}\n\nexport function acceptRequest(projectId: number, requestId: number) {\n  return authRequest<IPage>(`projects/${projectId}/requests/${requestId}`, 'post');\n}\n\nexport function declineRequest(projectId: number, requestId: number) {\n  return authRequest<IPage>(`projects/${projectId}/requests/${requestId}`, 'delete');\n}\n\nexport function removeUser(projectId: number, userId: number) {\n  return authRequest<IPage>(`projects/${projectId}/users/${userId}`, 'delete');\n}\n\n\nexport function unFollowUser(projectId: number, userId: number) {\n  return authRequest<IPage>(`projects/${projectId}/followers/${userId}`, 'delete');\n}\n\nexport function getDraft(projectId: number, pageId: number) {\n  return authRequest<IPage>(`projects/${projectId}/pages/${pageId}/drafts`, 'get');\n}\n\nexport async function updateDraft(projectId: number, pageId: number, content: string) {\n  const formData = new FormData();\n  formData.append('content', content);\n  \n  return authRequest<IProject>(`projects/${projectId}/pages/${pageId}/drafts`, 'post', formData);\n}\n\nexport async function saveDraftToPage(projectId: number, pageId: number) {\n  return authRequest<IProject>(`projects/${projectId}/pages/${pageId}/drafts/to`, 'post');\n}\n\nexport async function saveDraftFromPage(projectId: number, pageId: number) {\n  return authRequest<IProject>(`projects/${projectId}/pages/${pageId}/drafts/from`, 'post');\n}\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AppState, ProjectActionType } from 'store';\nimport ProjectsList from 'components/project/ProjectsList/ProjectsList';\nimport { getProjects, likeProject } from 'api/project';\nimport { UserActionType } from 'store';\nimport { IProject } from 'models/project';\nimport useUser from 'hooks/useUser';\nimport cx from 'classnames';\nimport s from './Home.module.scss';\n\nexport default function Home() {\n  const [projectLoaded, setProjectLoaded] = useState(false);\n  const [moreLoading, setMoreLoading] = useState(false);\n  const dispatch = useDispatch();\n  const { user } = useUser();\n  const [page, setPage] = useState(0);\n  const [typeIndex, setTypeIndex] = useState(-1);\n  const { projects } = useSelector((s: AppState) => s.project);\n\n\n  useEffect(\n    () => {\n      let request: any = null;\n      const onLoad = async () => {\n        setProjectLoaded(false);\n        try {\n          request = getProjects(typeIndex);\n          const { data } = await request;\n          dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: data });\n        } catch(err) {\n          console.error(err);\n          dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n        }\n        request = null;\n        setProjectLoaded(true);\n      }\n      onLoad();\n      return () => {\n        if (request) {\n          request.cancel();\n        }\n        dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n      }\n    },\n    [user, typeIndex], // eslint-disable-line\n  );\n\n  // TODO: listen to updates\n  // useEffect(\n  //   () => {\n      \n  //     const projectsChangedHandler = async () => {\n  //       try {\n  //         const { data } = await getProjects();\n  //         dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: data });\n  //       } catch(err) {\n          \n  //       }\n  //     };\n  //     hub.on('ProjectDeleted', projectsChangedHandler);\n  //     hub.on('ProjectCreated', projectsChangedHandler);\n  //     hub.on('ProjectUpdated', projectsChangedHandler);\n  //     addReconnectedHandler(projectsChangedHandler);\n  //     return () => {\n  //       hub.off('ProjectDeleted', projectsChangedHandler);\n  //       hub.off('ProjectCreated', projectsChangedHandler);\n  //       hub.off('ProjectUpdated', projectsChangedHandler);\n  //       removeReconnectedHandler(projectsChangedHandler);\n  //     }\n      \n  //   },\n  //   [],\n  // );\n  return (\n    <div>\n      {!user && (\n        <div className={s.guest}>\n          <div className={cx('content', s.guestInner)}>\n            <div className={s.guestImage}>\n              <img src={`${process.env.PUBLIC_URL}/home.png`} alt=\"\" />\n            </div>\n            <div className={s.guestContent}>\n              <div className={s.guestName}>     </div>\n              <div className={s.guestDesc}>     :  ,  ,  ,  .</div>\n            </div>\n            <div className={s.guestAction}>\n              <button onClick={() => dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true })}></button>\n            </div>\n          </div>\n        </div>\n      )}\n      <div className={cx('content', s.content)}>\n        <div className={s.navigation}>\n          <span\n            className={cx({ [s.active]: typeIndex === -1 })}\n            onClick={() => setTypeIndex(-1)}\n          ></span>\n          <i>/</i>\n          <span\n            className={cx({ [s.active]: typeIndex === 1 })}\n            onClick={() => setTypeIndex(1)}\n          ></span>\n          <i>/</i>\n          <span\n            className={cx({ [s.active]: typeIndex === 0 })}\n            onClick={() => setTypeIndex(0)}\n          ></span>\n          <i>/</i>\n          <span\n            className={cx({ [s.active]: typeIndex === 2 })}\n            onClick={() => setTypeIndex(2)}\n          ></span>\n        </div>\n        {projectLoaded ? (\n          <ProjectsList\n            projects={projects}\n            hasMore={projects.length >= (page + 1) * 8}\n            disabled={moreLoading}\n            onMoreLoad={async () => {\n              try {\n                setMoreLoading(true);\n                const { data } = await getProjects(typeIndex, page + 1);\n                setPage(page + 1);\n                dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects, ...data] });\n              } catch(err) {\n                console.error(err);\n              }\n              setMoreLoading(false);\n            }}\n            onLike={async (project: IProject) => {\n              if (!user) {\n                dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                return;\n              }\n              try {\n                const { data: { count, liked } } = await likeProject(project.id);\n                const index = projects.indexOf(project);\n                projects[index] = { ...project, likesCount: count, liked };\n                dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects] });\n                \n              } catch(err) {\n\n              }\n            }}\n          />\n        ) : (\n          <div className=\"spinner overlay-spinner\" />\n        )}\n      </div>\n    </div>\n  )\n}\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 25,\n    height: 25,\n    viewBox: \"0 0 25 25\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.9097 17.9099L7.30314 7.3033M17.9097 7.3033L7.30314 17.9099L17.9097 7.3033Z\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.ef64c0ce.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport cx from 'classnames';\nimport { ReactComponent as Close } from 'icons/close.svg';\n\nimport s from './Popup.module.scss';\n\n\ninterface IProps {\n  children?: any;\n  onClose?(): any;\n  title?: string;\n  width?: any;\n  className?: string;\n}\n\nexport default function Popup({ title, children, onClose, width, className }: IProps) {\n  return (\n    <>\n      <div className={s.overlay} />\n      <div className={cx(s.wrapper, { [className!]: !!className })} style={{ maxWidth: width }}>\n        {title && <div className={s.title}>{title}</div>}\n        <div className={s.content}>{children}</div>\n        {onClose && <Close onClick={onClose} className={s.close} />}\n      </div>\n    </>\n  )\n};\n\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgFb = function SvgFb(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 40,\n    viewBox: \"0 0 40 40\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M40 20C40 8.95312 31.0469 0 20 0C8.95312 0 0 8.95312 0 20C0 29.9844 7.3125 38.2578 16.875 39.7578V25.7812H11.7969V20H16.875V15.5938C16.875 10.582 19.8594 7.8125 24.4297 7.8125C26.6172 7.8125 28.9062 8.20312 28.9062 8.20312V13.125H26.3828C23.8984 13.125 23.125 14.668 23.125 16.25V20H28.6719L27.7852 25.7812H23.125V39.7578C32.6875 38.2578 40 29.9844 40 20Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M27.7852 25.7812L28.6719 20H23.125V16.25C23.125 14.668 23.8984 13.125 26.3828 13.125H28.9062V8.20312C28.9062 8.20312 26.6172 7.8125 24.4297 7.8125C19.8594 7.8125 16.875 10.582 16.875 15.5938V20H11.7969V25.7812H16.875V39.7578C17.8945 39.918 18.9375 40 20 40C21.0625 40 22.1055 39.918 23.125 39.7578V25.7812H27.7852Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFb, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/fb.e6e6ef68.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport cx from 'classnames';\n\nimport s from './FormRow.module.scss';\n\ninterface IProps {\n  children: any;\n  className?: string;\n  maxLength?: number;\n  length?: number;\n}\n\nexport default function FormRow({ children, maxLength, length, className }: IProps) {\n  return (\n    <div className={cx(s.wrapper, { [className!]: !!className }) }>\n      {children}\n      {maxLength && (\n        <div className={cx(s.length, { [s.error]: length! > maxLength! } )}>\n          {length || 0} / {maxLength}\n        </div>\n      )}\n    </div>\n  )\n}","var _rect, _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgGoogle = function SvgGoogle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 40,\n    viewBox: \"0 0 40 40\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 40,\n    height: 40,\n    rx: 2,\n    fill: \"black\"\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 21.7V18.4H28.4C28.5 19 28.6 19.5 28.6 20.2C28.6 25.3 25.2 29 20 29C15 29 11 25 11 20C11 15 15 11 20 11C22.4 11 24.5 11.9 26 13.3L23.4 15.8C22.8 15.2 21.6 14.5 19.9 14.5C16.9 14.5 14.5 17 14.5 20C14.5 23 16.9 25.5 19.9 25.5C23.3 25.5 24.6 23.1 24.8 21.7H20Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgGoogle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/google.ff9964d2.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgVk = function SvgVk(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 40,\n    viewBox: \"0 0 40 40\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 19.1667C0 10.1667 0 5.58333 2.83333 2.83333C5.66667 0.0833334 10.1667 0 19.1667 0H20.8333C29.8333 0 34.4167 0 37.1667 2.83333C40 5.58333 40 10.1667 40 19.1667V20.8333C40 29.8333 40 34.4167 37.1667 37.1667C34.4167 40 29.8333 40 20.8333 40H19.1667C10.1667 40 5.58333 40 2.83333 37.1667C0 34.4167 0 29.8333 0 20.8333V19.1667Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.8332 12.5H7.9165C7.08317 12.5 6.9165 12.9167 6.9165 13.3333C6.9165 14.0833 7.9165 17.9167 11.4998 23C13.9165 26.5 17.3332 28.3333 20.4165 28.3333C22.2498 28.3333 22.4998 27.9167 22.4998 27.1667V24.5833C22.4998 23.75 22.6665 23.5833 23.2498 23.5833C23.6665 23.5833 24.4165 23.8333 26.1665 25.5C28.1665 27.5 28.4998 28.3333 29.5832 28.3333H32.4998C33.3332 28.3333 33.7498 27.9167 33.4998 27.0833C33.2498 26.25 32.3332 25.0833 30.9998 23.6667C30.3332 22.8333 29.3332 22 28.9998 21.5833C28.5832 21 28.6665 20.75 28.9998 20.25C28.9998 20.25 32.5832 15.25 32.9165 13.5833C33.0832 13 32.9165 12.5 31.9998 12.5H29.1665C28.4165 12.5 28.0832 12.9167 27.9165 13.3333C27.9165 13.3333 26.4165 16.9167 24.3332 19.3333C23.6665 20 23.3332 20.25 22.9998 20.25C22.8332 20.25 22.5832 20 22.5832 19.4167V13.6667C22.5832 12.9167 22.3332 12.5833 21.7498 12.5833H17.1665C16.6665 12.5833 16.4165 12.9167 16.4165 13.25C16.4165 13.9167 17.4998 14.0833 17.5832 16.0833V20.4167C17.5832 21.3333 17.4165 21.5 17.0832 21.5C16.0832 21.5 13.6665 17.8333 12.2498 13.75C11.8332 12.8333 11.5832 12.5 10.8332 12.5Z\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgVk, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/vk.fe7312de.svg\";\nexport { ForwardRef as ReactComponent };","/**\n *    any  .\n */\nexport const fbCodeListeners: any = [];\n\n(window as any).setFbCode = function(code: string) {\n  fbCodeListeners.forEach((l: any) => l(code))\n}\n\n\nexport const vkCodeListeners: any = [];\n\n(window as any).setVkCode = function(code: string) {\n  vkCodeListeners.forEach((l: any) => l(code))\n}\n\nexport const googleCodeListeners: any = [];\n\n(window as any).setGoogleCode = function(code: string) {\n  googleCodeListeners.forEach((l: any) => l(code))\n}","import React, { useEffect, useState } from 'react';\nimport { ReactComponent as LogoFacebook } from 'icons/fb.svg';\nimport { ReactComponent as LogoGoogle } from 'icons/google.svg'\nimport { ReactComponent as LogoVk } from 'icons/vk.svg'\nimport { fbCodeListeners, vkCodeListeners, googleCodeListeners } from 'helpers/window';\nimport { signFb, signVk, signGoogle } from 'api/user';\n\nimport s from './SocialAuth.module.scss';\n\nconst fbLoginUri = 'https://www.facebook.com/v8.0/dialog/oauth';\nconst vkLoginUri = 'https://oauth.vk.com/authorize';\nconst googleLoginUri = 'https://accounts.google.com/o/oauth2/v2/auth';\n\n\nexport default function SocialAuth() {\n  const [fbCode, setFbCode] = useState('');\n  const [vkCode, setVkCode] = useState('');\n  const [googleCode, setGoogleCode] = useState('');\n  useEffect(\n    () => {\n      const listenerFb = (code: string) => {\n        setFbCode(code);\n      };\n      const listenerVk = (code: string) => {\n        setVkCode(code);\n      };\n      const listenerGoogle = (code: string) => {\n        setGoogleCode(code);\n      };\n      fbCodeListeners.push(listenerFb);\n      vkCodeListeners.push(listenerVk);\n      googleCodeListeners.push(listenerGoogle);\n      return () => {\n        fbCodeListeners.splice(fbCodeListeners.indexOf(listenerFb), 1);\n        vkCodeListeners.splice(vkCodeListeners.indexOf(listenerVk), 1);\n        googleCodeListeners.splice(googleCodeListeners.indexOf(listenerGoogle), 1);\n      }\n    },\n    [], // eslint-disable-line\n  );\n\n  useEffect(\n    () => {\n      const load = async () => {\n        if (fbCode) {\n          try {\n            await signFb(fbCode, window.location.origin + '/fb/');\n            window.location.reload();\n          } catch(err) {\n            \n          }\n        }\n      }\n      load();\n    },\n    [fbCode]\n  );\n  useEffect(\n    () => {\n      const load = async () => {\n        if (vkCode) {\n          try {\n            await signVk(vkCode, window.location.origin + '/vk/');\n            window.location.reload();\n          } catch(err) {\n            \n          }\n        }\n      }\n      load();\n    },\n    [vkCode]\n  );\n  useEffect(\n    () => {\n      const load = async () => {\n        if (googleCode) {\n          try {\n            await signGoogle(googleCode, window.location.origin + '/google/');\n            window.location.reload();\n          } catch(err) {\n            \n          }\n        }\n      }\n      load();\n    },\n    [googleCode]\n  );\n\n  const openFbWindow = () => {\n    const left = (window.screen.width / 2) - (800 / 2);\n    const top = (window.screen.height / 2) - (600 / 2);\n    window.open(\n      `${fbLoginUri}?client_id=${process.env.REACT_APP_FACEBOOK_APP_ID}&redirect_uri=${window.location.origin}/fb/&scope=email`,\n      'Facebook',\n      `width=800,height=600,top=${top},left=${left}`,\n    );\n  }\n\n  const openVkWindow = () => {\n    const left = (window.screen.width / 2) - (800 / 2);\n    const top = (window.screen.height / 2) - (600 / 2);\n    window.open(\n      `${vkLoginUri}?client_id=${process.env.REACT_APP_VK_APP_ID}&display=popup&response_type=code&state=reg&redirect_uri=${window.location.origin}/vk/&scope=email`,\n      'Vkontakte',\n      `width=800,height=600,top=${top},left=${left}`,\n    );\n  }\n\n  const openGoogleWindow = () => {\n    const left = (window.screen.width / 2) - (800 / 2);\n    const top = (window.screen.height / 2) - (600 / 2);\n    window.open(\n      `${googleLoginUri}?client_id=${process.env.REACT_APP_GOOGLE_APP_ID}&response_type=code&redirect_uri=${window.location.origin}/google/&scope=openid%20profile%20email`,\n      'Google',\n      `width=800,height=600,top=${top},left=${left}`,\n    );\n  }\n  return (\n    <div className={s.wrapper}>\n      <span \n        onClick={openFbWindow}\n        className={s.link}\n      >\n        <LogoFacebook  className={s.icon} />\n      </span>\n      <span\n        className={s.link}\n        onClick={openGoogleWindow}\n      >\n        <LogoGoogle className={s.icon} />\n      </span> \n      <span\n        className={s.link}\n        onClick={openVkWindow}\n      >\n        <LogoVk className={s.icon} />\n      </span> \n    </div>\n  );\n}\n","import React, { ChangeEventHandler } from 'react';\nimport cx from 'classnames';\n\nimport s from './TextField.module.scss';\n\ninterface IProps {\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n  label?: string;\n  name?: string;\n  className?: string;\n  type?: string;\n  value?: string;\n  invalid?: boolean;\n  invalidText?: string;\n  fullWidth?: boolean;\n  size?: 'bg' | 'sm'\n}\n\nexport default function TextField({ size, fullWidth, onChange, label, name, className, type, value, invalid, invalidText }: IProps) {\n  return (\n    <div className={cx(s.wrapper, { [s.fullWidth]: fullWidth, [s.invalid]: invalid })}>\n      {label && <div className={s.label}>{label}</div>}\n      <input\n        className={cx(s.input, { [s.big]: size === 'bg', [className!]: !!className })}\n        type={type}\n        onChange={onChange}\n        value={value}\n        id={name}\n        name={name}\n      />\n      {invalid && invalidText && (\n        <div className={s.invalidText}>{invalidText}</div>\n      )}\n    </div>\n  )\n}","import React, { useState } from 'react';\nimport validator from 'validator';\nimport cx from 'classnames';\nimport { useDispatch } from 'react-redux';\nimport { setJwtToken } from 'api/request';\nimport { authenticate, resendConfirmEmail } from 'api/user';\nimport { UserActionType } from 'store';\nimport { IUser } from 'models/user';\nimport Popup from 'components/common/Popup/Popup';\nimport FormRow from 'components/form/FormRow/FormRow';\nimport SocialAuth from 'components/auth/SocialAuth/SocialAuth';\nimport TextField from 'components/form/TextField/TextField';\n\nimport s from './LoginForm.module.scss';\n\ninterface IProps {\n  onSave(user: IUser): any;\n  onClose(): any;\n}\n\nexport default function LoginForm({ onSave, onClose }: IProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [error, setError] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(false);\n  const dispatch = useDispatch();\n  const [resend, setResend] = useState(false);\n\n  return (\n    <Popup onClose={onClose} title=\"\">\n      <div\n        className={s.form}\n      >\n        {resend ? (\n          <div className={s.success}>\n            <div className={s.message}>Email  .    .</div>\n            <div className={s.buttons}>\n              <button\n                className={cx('button', 'button-secondary')}\n                onClick={onClose}\n              ></button>\n              <button\n                className={cx('button', 'button-primary')}\n                onClick={async () => {\n                  if (isLoading) {\n                    return;\n                  }\n                  setIsLoading(true);\n                  await resendConfirmEmail(email, password);\n                  setIsLoading(false);\n                }}\n              >\n                  \n              </button>\n            </div>\n          </div>\n        ) : (\n          <div>\n            <FormRow>\n              <TextField\n                fullWidth\n                name=\"email\"\n                type=\"email\"\n                value={email}\n                invalid={!!errors.email}\n                invalidText={errors.email}\n                label=\"Email\"\n                onChange={e => {\n                  setEmail(e.target.value.trim());\n                }}\n              />\n            </FormRow>\n            <FormRow>\n              <TextField\n                fullWidth\n                name=\"password\"\n                type=\"password\"\n                value={password}\n                invalid={!!errors.password}\n                invalidText={errors.password}\n                label=\"\"\n                onChange={e => {\n                  setPassword(e.target.value.trim());\n                }}\n              />\n            </FormRow>\n            {error && <div className={s.error}>{error}</div>}\n            <div className={s.bottom}>\n\n              <SocialAuth />\n              <div className={s.links}>\n                <div className={s.link}>\n                  <span\n                    onClick={() => {\n                      dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: false });\n                      dispatch({ type: UserActionType.REGISTER_VISIBILITY_ACTION, payload: true });\n                    }}> </span>\n\n                </div>\n                <div className={s.link}>\n                  <span\n                    onClick={() => {\n                      dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: false });\n                      dispatch({ type: UserActionType.FORGET_PASSWORD_VISIBILITY_ACTION, payload: true });\n                    }}> ?</span>\n                </div>\n              </div>\n            </div>\n            <div className={s.buttons}>\n              <button\n                className={cx('button', 'button-secondary')}\n                onClick={onClose}\n              ></button>\n              <button\n                className={cx('button', 'button-primary')}\n                onClick={\n                  async () => {\n                    setError('');\n                    const errors: { [key: string]: string } = {};\n                    if (!validator.isEmail(email)) {\n                      errors.email = ' email';\n                    }\n                    if (password.trim().length === 0) {\n                      errors.password = ' ';\n                    }\n                    setErrors(errors);\n                    if (Object.keys(errors).length === 0) {\n                      setIsLoading(true);\n                      try {\n                        const res = await authenticate(email, password);\n                        console.log(res.status);\n                        if (res.status === 202) {\n                        setJwtToken(res.headers[\"x-auth-token\"]);\n                        console.log(\"response: \", res);\n                        console.log(\"token: \", res.headers[\"x-auth-token\"]);\n                        onSave(res.data);\n                        }\n                      } catch (err) {\n                        console.log(err);\n\n                        // if (err.response.data.message === 'Email  ') {\n                        //   setResend(true);\n                        // } else {\n                        //   setError(err.response.data.message);\n                        // }  \n                      }\n                      setIsLoading(false);\n                    }\n                  }\n                }\n              ></button>\n            </div>\n          </div>\n        )}\n\n      </div>\n    </Popup>\n  );\n}","import React, { useState } from 'react';\nimport validator from 'validator';\nimport { register, resendConfirmEmail } from 'api/user';\nimport { useDispatch } from 'react-redux';\nimport { setJwtToken } from 'api/request';\nimport cx from 'classnames';\nimport { UserActionType } from 'store';\nimport FormRow from 'components/form/FormRow/FormRow'\nimport SocialAuth from 'components/auth/SocialAuth/SocialAuth';\nimport Popup from 'components/common/Popup/Popup';\nimport TextField from 'components/form/TextField/TextField';\n\nimport s from './RegisterForm.module.scss';\n\ninterface IProps {\n  onClose(): any;\n}\n\nexport default function RegisterForm({ onClose }: IProps) {\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [successEmail, setSuccessEmail] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [error, setError] = useState<string>('');\n  const dispatch = useDispatch();\n\n\n  return (\n    <Popup onClose={onClose} title=\" \">\n      <div\n        className={s.form}\n      >\n        {successEmail ? (\n          <div className={s.success}>\n            <div className={s.message}>       .</div>\n            <div className={s.buttons}>\n              <button\n                className={cx('button', 'button-secondary')}\n                onClick={onClose}\n              ></button>\n              <button\n                className={cx('button', 'button-primary')}\n                onClick={async () => {\n                  if (isLoading) {\n                    return;\n                  }\n                  setIsLoading(true);\n                  await resendConfirmEmail(email, password);\n                  setIsLoading(false);\n                }}\n              >\n                  \n              </button>\n            </div>\n          </div>\n        ) : (\n          <div>\n            <FormRow maxLength={20} length={firstName.trim().length}>\n              <TextField\n                fullWidth\n                name=\"first_name\"\n                value={firstName}\n                invalid={!!errors.first_name}\n                invalidText={errors.first_name}\n                label=\"\"\n                onChange={e => {\n                  setFirstName(e.target.value.trim());\n                }}\n              />\n            </FormRow>\n            <FormRow maxLength={20} length={lastName.trim().length}>\n              <TextField\n                fullWidth\n                name=\"last_name\"\n                value={lastName}\n                invalid={!!errors.last_name}\n                invalidText={errors.last_name}\n                label=\"\"\n                onChange={e => {\n                  setLastName(e.target.value.trim());\n                }}\n              />\n            </FormRow>\n            <FormRow>\n              <TextField\n                fullWidth\n                name=\"email\"\n                type=\"email\"\n                value={email}\n                invalid={!!errors.email}\n                invalidText={errors.email}\n                label=\"Email\"\n                onChange={e => {\n                  setEmail(e.target.value.trim());\n                }}\n              />\n            </FormRow>\n            <FormRow maxLength={20} length={password.trim().length}>\n              <TextField\n                fullWidth\n                name=\"password\"\n                type=\"password\"\n                value={password}\n                invalid={!!errors.password}\n                invalidText={errors.password}\n                label=\"\"\n                onChange={e => {\n                  setPassword(e.target.value.trim());\n                }}\n              />\n              <div className={s.passwordHelp}>\n                 , 8-20 \n              </div>\n            </FormRow>\n            {error && <div className={s.error}>{error}</div>}\n            <div className={s.bottom}>\n\n              <SocialAuth />\n              <div className={s.links}>\n                <div className={s.link}>\n                  <span\n                    onClick={() => {\n                      dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                      dispatch({ type: UserActionType.REGISTER_VISIBILITY_ACTION, payload: false });\n                    }}>  ?</span>\n\n                </div>\n              </div>\n            </div>\n            <div className={s.buttons}>\n              <button\n                className={cx('button', 'button-secondary')}\n                onClick={onClose}\n              ></button>\n              <button\n                className={cx('button', 'button-primary')}\n                onClick={\n                  async () => {\n                    setError('');\n                    const errors: { [key: string]: string } = {};\n                    if (!validator.isEmail(email)) {\n                      errors.email = ' Email';\n                    }\n                    if (firstName.trim().length < 3) {\n                      errors.first_name = '  ';\n                    }\n                    if (lastName.trim().length < 3) {\n                      errors.last_name = '  ';\n                    }\n                    // const passReg = new RegExp(\"^((?!.*[\\s]).{8,20})$\");\n                    if (password.trim().length < 8 || password.trim().length > 20) {\n                      errors.password = ' ';\n                    }\n\n                    setErrors(errors);\n                    if (Object.keys(errors).length === 0) {\n                      setIsLoading(true);\n                      try {\n                        const res = await register(firstName, lastName, email, password);\n                        console.log(res.status);\n                        if (res.status === 202) {\n                          setJwtToken(res.headers[\"x-auth-token\"]);\n                          console.log(\"response: \", res);\n                          console.log(\"token: \", res.headers[\"x-auth-token\"]);\n                          setSuccessEmail(email);\n                        }\n                      } catch (err) {\n                        console.log(err)\n                      //   if (err.response.status === 409) {\n                      //     setErrors(err.response.data as any);\n                      //   } else {\n                          \n                      //     setError('  .   ')\n                      //   }\n\n                      }\n                      setIsLoading(false);\n                    }\n                  }\n                }\n              ></button>\n            </div>\n          </div>\n        )}\n\n      </div>\n    </Popup>\n  );\n}","import React, { useState } from 'react';\nimport validator from 'validator';\nimport cx from 'classnames';\nimport { forgotPassword } from 'api/user';\nimport FormRow from 'components/form/FormRow/FormRow';\nimport Popup from 'components/common/Popup/Popup';\nimport TextField from 'components/form/TextField/TextField';\n\nimport s from './ForgetPasswordForm.module.scss';\n\ninterface IProps {\n  onClose(): any;\n}\n\nexport default function ForgetPasswordForm({onClose }: IProps) {\n  const [email, setEmail] = useState('');\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [error, setError] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [sent, setSent] = useState(false);\n\n  return (\n    <Popup onClose={onClose} title=\" ?\">\n      <div \n        className={s.form}\n      >\n        {sent ? (\n          <div className={s.success}>\n            <div className={s.message}>        .</div>\n          </div>\n        ) : (\n          <div>\n            <FormRow>\n              <TextField\n                fullWidth\n                name=\"email\"\n                type=\"email\"\n                value={email}\n                invalid={!!errors.email}\n                invalidText={errors.email}\n                label=\"Email\"\n                onChange={e => {\n                  setEmail(e.target.value.trim());\n                }}\n              />\n            </FormRow>\n            {error && <div className={s.error}>{error}</div>}\n            <div className={s.buttons}>\n              <button\n                className={cx('button', 'button-secondary')}\n                onClick={onClose}\n              ></button>\n              <button\n                className={cx('button', 'button-primary')}\n                onClick={\n                  async () => {\n                    setError('');\n                    const errors: { [key: string]: string } = {};\n                    if (!validator.isEmail(email)) {\n                      errors.email = ' email';\n                    }\n                    setErrors(errors);\n                    if (Object.keys(errors).length === 0) {\n                      setIsLoading(true);\n                      try {\n                        await forgotPassword(email);\n                        setSent(true);\n                      } catch (err) {\n                        setError(err.response.data.message);\n                      }\n                      setIsLoading(false);\n                    }\n                  }\n                }\n              ></button>\n            </div>\n          </div>\n        )}\n        \n      </div>\n    </Popup>\n  );\n}","import React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport { useDispatch } from 'react-redux';\n\nimport useUser from 'hooks/useUser';\nimport { UserActionType } from 'store';\nimport s from './ConfirmSuccess.module.scss';\n\n\nexport default function ConfirmSuccess() {\n  const { user } = useUser();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  useEffect(\n    () => {\n      if (user) {\n        history.replace('/');\n      }\n    },\n    [user], // eslint-disable-line\n  );\n  if (user) {\n    return null;\n  }\n  return (\n    <div \n      className={s.wrapper}\n    >\n      Verification successful, you can now <span onClick={() => dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true })}>sign in</span>\n    </div>\n  )\n}","import React, { useEffect, useRef, useMemo, useState } from 'react';\nimport { getJwtToken } from 'api/request';\nimport EditorJs from 'react-editor-js';\nimport axios from 'axios';\nimport Embed from \"@editorjs/embed\";\nimport Table from \"@editorjs/table\";\nimport List from \"@editorjs/list\";\n// import Underline from '@editorjs/underline';\n// import Warning from \"@editorjs/warning\";\nimport Code from \"@editorjs/code\";\nimport Marker from \"@editorjs/marker\";\nimport Image from \"@editorjs/image\";\nimport Header from \"@editorjs/header\";\nimport Delimiter from \"@editorjs/delimiter\";\nimport Popup from 'components/common/Popup/Popup';\n\nimport cx from 'classnames';\n\nimport { staticBase, apiEndpoint } from 'helpers/constants';\n\n\nimport s from './ContentField.module.scss';\n\ninterface IProps {\n  value: any;\n  onChange(data: any, html: string): any;\n  allowedTags?: string[];\n  actions?: string[];\n  placeholder?: string;\n  className?: string;\n  outerRef?: any;\n  error?: string;\n}\n\n\nexport default function ContentField({ error, allowedTags, actions, onChange, value, placeholder, className, outerRef }: IProps) {\n\n  const containerRef = useRef<any>(null);\n  const [data, setData] = useState<any | undefined>(value);\n  const [internalError, setInternalError] = useState('');\n\n  const tools = useMemo(\n    () => {\n      return {\n        embed: Embed,\n        table: Table,\n        marker: Marker,\n        list: List,\n        // warning: Warning,\n        code: Code,\n        // linkTool: LinkTool,\n        // hyperlink: {\n        //   class: Hyperlink,\n        //   config: {\n        //     target: '_blank',\n        //     rel: 'nofollow',\n        //     availableTargets: ['_blank', '_self'],\n        //     availableRels: ['noreferrer'],\n        //     validate: false,\n        //   }\n        // },\n        // paragraph: {\n        //   class: Paragraph,\n        //   config: {\n        //     placeholder: placeholder || 'Start writing here'\n        //   }\n        // },\n        image: {\n          class: Image,\n          config: {\n            types: 'image/png, image/jpg, image/gif, image/jpeg',\n            uploader: {\n              uploadByUrl: async (url: string) => {\n                return { \n                  success: 1,\n                  file: {\n                    url,\n                  }\n                };\n              },\n              uploadByFile: async (file: File) => {\n                if (file.size / 1000000 > 10) {\n                  setInternalError('   (10 .)');\n                  return {\n                    success: 0,\n                  };\n                }\n                const formData = new FormData();\n                formData.append('file', file)\n      \n                const config: any = {\n                  headers: {\n                    'Content-Type': 'multipart/form-data',\n                    Authorization: `Bearer ${getJwtToken()}`\n                  },\n                };\n                const { data: { url }} = await axios.post(`${apiEndpoint}/files`, formData, config);\n                return { \n                  success: 1,\n                  file: {\n                    url: `${staticBase}${url}`,\n                  }\n                };\n              }\n            }\n          }\n        },\n        // raw: Raw,\n        header: Header,\n        // quote: Quote,\n        // checklist: CheckList,\n        delimiter: Delimiter,\n        // inlineCode: InlineCode,\n        // simpleImage: SimpleImage\n      };\n    },\n    []\n  );\n\n  return (\n    <div \n      className={cx(s.field, { [s.errorField]: !!error, [className!]: !!className })}\n    >\n      <EditorJs \n        tools={tools}\n        data={data}\n        onReady={() => {\n          if (containerRef.current) {\n            containerRef.current.save();\n          }\n        }}\n        // @ts-ignore\n        onChange={async (api: any, data: any) => {\n          console.log(containerRef.current);\n          if (containerRef.current) {\n            await containerRef.current.save();\n          }\n          const html = convertToHTML(data);\n          onChange(data, html);\n        }}\n        instanceRef={ref => containerRef.current = ref}\n      />\n      {error && (\n        <div className={s.error}>{error}</div>\n      )}\n      {internalError && <Popup onClose={() => setInternalError('')} title=\"\">\n        {internalError}\n      </Popup>}\n    </div>\n  );\n}\n\nfunction convertToHTML(json: any) {\n  var output = '';\n\n  json.blocks.forEach((block: any) => {\n    console.log(block);\n    switch(block.type) {\n      case 'header':\n        output += '<div class=\"ce-block\"><div class=\"ce-block__content\"><h'\n              + block.data.level + ' class=\"ce-header\">'\n              + block.data.text + '</h'\n              + block.data.level + '></div></div>';\n        break;\n      case 'list':\n        output += '<div class=\"ce-block\"><div class=\"ce-block__content\">';\n        output += `<ul class=\"cdx-block cdx-list cdx-list--${block.data.style === 'unordered' ? 'un' : ''}ordered\">`;\n        block.data.items.forEach((el: any) => {\n          output += `<li class=\"cdx-list__item\">${el}</li>`\n        })\n        output += `</ul>`;\n        output += '</div></div>'\n        break;\n      case 'paragraph':\n        output += '<div class=\"ce-block\"><div class=\"ce-block__content\"><div class=\"ce-paragraph cdx-block\">'\n              + block.data.text + '</div></div></div>\\n';\n        break;\n      case 'image':\n        if (block.data.file?.url) {\n          output += '<div class=\"ce-block\"><div class=\"ce-block__content\"><div class=\"image-tool image-tool--filled cdx-block\">';\n          output += '<div class=\"image-tool__image\">';\n          output += `<img class=\"image-tool__image-picture\" src=\"${block.data.file.url}\" >`;\n          output += `</div>`;\n          if (block.data.caption) {\n            output += `<div class=\"ce-paragraph cdx-block\" data-placeholder=\"Caption\">${block.data.caption}</div>`\n          }\n          output += '</div></div></div>';\n        }\n        break;\n      case 'delimiter':\n        output += '<div class=\"ce-block\"><div class=\"ce-block__content\"><div class=\"ce-delimiter cdx-block\"></div></div></div>';\n        break;\n      case 'code':\n        output += '<div class=\"ce-block\"><div class=\"ce-block__content\"><div class=\"ce-code cdx-block\">';\n        output += `<textarea readonly class=\"ce-code__textarea\">${block.data.code}</textarea>`;\n        output += '</div></div></div>';\n        break;\n      case 'table':\n        var rows = '';\n        block.data.content.map((row: any) => {\n            var cells = '';\n            row.forEach( (cell: any) => {\n                cells += '<td class=\"tc-table__cell\"><div class=\"tc-table__area\">'\n                + cell + '</div></td>\\n';\n            });\n            rows += '<tr>' + cells + '</tr>\\n';\n        });\n        output += '<div class=\"ce-block\"><div class=\"ce-block__content\"><div class=\"tc-editor cdx-block\">'\n        + '<div class=\"tc-table__wrap\"><table class=\"tc-table\"><tbody>'\n        + rows + '</tbody></table></div></div></div></div>\\n';\n        break;\n      case 'checklist':\n          var checklist = '';\n          block.data.items.map((item: any) => {\n              var checked_ext = '';\n              if ( item.checked ) {\n                  checked_ext = '--checked'\n              }\n              checklist += '<div class=\"cdx-checklist__item cdx-checklist__item'\n              + checked_ext + '\"><span class=\"cdx-checklist__item-checkbox\"></span><div class=\"cdx-checklist__item-text\">'\n              + item.text + '</div></div>';\n          });\n          output += '<div class=\"ce-block\"><div class=\"ce-block__content\"><div class=\"cdx-block cdx-checklist\">'\n          + checklist + '</div></div></div>\\n';\n          break;\n      case 'embed':\n        if (block.data.embed || block.data.source) {\n          output += `<div class=\"ce-block\"><div class=\"ce-block__content\"><div class=\"cdx-block embed-tool\"><iframe style=\"width:100%;\" height=\"320\" frameborder=\"0\" allowfullscreen=\"\" src=\"${block.data.embed || block.data.source}\" class=\"embed-tool__content\"></iframe></div></div></div>`;\n        }\n        break;\n    }\n  })\n\n  output += '';\n  return output;\n}","import React, { useState } from 'react';\nimport sanitizeHtml from 'sanitize-html';\nimport cx from 'classnames';\nimport useUser from 'hooks/useUser';\nimport { useDispatch } from 'react-redux';\nimport { UserActionType } from 'store';\nimport { IComment } from 'models/comment';\nimport ContentField from 'components/form/ContentField/ContentField';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport s from './AddCommentForm.module.scss';\ninterface IProps {\n  onSave(content: string, data: any, anonymous?: boolean): any;\n  disabled?: boolean;\n  comment?: IComment;\n  onCancel?(): any;\n  parent?: IComment;\n}\n\nexport default function AddCommentForm({ onSave, disabled, comment, onCancel, parent }: IProps) {\n  const [html, setHtml] = useState(comment?.text || '');\n  const [data, setData] = useState(JSON.parse(comment?.data || '{}'));\n  const [loading, setLoading] = useState(false);\n  const [anonymous, setAnonymous] = useState(false);\n  const { user } = useUser();\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const dispatch = useDispatch();\n  \n  if (!user) {\n    return (\n      <div className={s.guest}>\n        <span\n          onClick={() => \n            dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true })\n          }\n        >Sign in</span> to comment\n      </div>\n    );\n  }\n\n  return (\n    <div className={s.wrapper}>\n      {!comment && <div className={s.title}>{parent ? '  ' : ' '}</div>}\n      {loading ? \n        (<div />)\n        : (\n          <>\n            <ContentField\n              className={s.field}\n              value={data}\n              onChange={(data, html) => { \n                setHtml(html); \n                setData(data);\n              }}\n              placeholder=\"Start writing here (1000 max)\"\n            />\n            \n            {Object.keys(errors).length > 0 && (\n              <div className={s.errors}>\n                {errors.html && (\n                  <div className={s.error}>{errors.html}</div>\n                )}\n                {errors.image && (\n                  <div className={s.error}>{errors.image}</div>\n                )}\n              </div>\n            )}\n            <div className={s.bottom}>\n              <button\n                className={cx('button', 'button-primary')}\n                disabled={disabled}\n                onClick={async () => {\n                  const errors: { [key: string]: string } = {};\n                  const text = sanitizeHtml(html, { allowedTags: [] }).trim();\n                  if (text.length === 0) {\n                    errors.html = ' ';\n                  } else if (text.length > 1000) {\n                    errors.html = '  ';\n                  }\n                  setErrors(errors);\n                  if (Object.keys(errors).length > 0) {\n                    return;\n                  }\n                  setLoading(true);\n                  if (await onSave(html, data, anonymous)) {\n                    setHtml('');\n                    setAnonymous(false);\n                    \n                  }\n                  setLoading(false);\n                }}\n              >{comment ? '' : ''}</button>\n              {onCancel && (\n                <button \n                  className={cx('button', 'button-secondary')}\n                  disabled={disabled}\n                  onClick={onCancel}\n                >Cancel</button>)}\n              {!comment && (\n                <div className={s.anonymous}>\n                  <Checkbox\n                    checked={anonymous}\n                    \n                    id=\"anonymous\" \n                    onChange={e => {\n                      setAnonymous(e.target.checked);\n                    }}\n                  />\n                  <span></span>\n                </div>\n              )}\n            </div>\n          </>\n        )}\n    </div>\n  )\n}","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgDislike = function SvgDislike(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 10,\n    height: 10,\n    viewBox: \"0 0 10 10\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1 6.5L3.806 6.5L3.2445 8.1835C3.1435 8.4875 3.1945 8.8245 3.382 9.0845C3.5695 9.3445 3.8735 9.5 4.194 9.5L5 9.5C5.1485 9.5 5.289 9.434 5.3845 9.32L7.7345 6.5L9 6.5C9.5515 6.5 10 6.0515 10 5.5L10 1C10 0.448501 9.5515 9.14465e-07 9 8.66252e-07L2.3465 2.84584e-07C2.14306 0.000675468 1.94461 0.0630801 1.77739 0.178962C1.61018 0.294844 1.48207 0.458746 1.41 0.649L0.0315013 4.3245C0.010571 4.38064 -9.77861e-05 4.44009 1.39079e-06 4.5L1.30337e-06 5.5C1.25515e-06 6.0515 0.448502 6.5 1 6.5ZM9 5.5L8 5.5L8 1L9 1L9 5.5ZM1 4.5905L2.3465 1L7 1L7 5.819L4.766 8.5L4.193 8.5L4.974 6.1585C4.99935 6.08334 5.00643 6.00322 4.99463 5.92479C4.98283 5.84635 4.95251 5.77185 4.90617 5.70748C4.85983 5.6431 4.79881 5.5907 4.72818 5.55462C4.65754 5.51854 4.57932 5.49981 4.5 5.5L1 5.5L1 4.5905Z\",\n    fill: \"black\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgDislike, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dislike.9bf041c9.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport cx from 'classnames';\nimport Popup from 'components/common/Popup/Popup';\n\nimport s from './ConfirmWindow.module.scss';\n\ninterface IProps {\n  text?: string;\n  title?: string;\n  ok: any;\n  cancel: any;\n  okText?: string;\n  cancelText?: string;\n}\n\nconst root = document.getElementById('modal')!;\n\nexport default function ConfirmWindow({ text, ok, cancel, okText, cancelText, title }: IProps) {\n  useEffect(\n    () => {\n      document.body.classList.add('disabled');\n      return () => {\n        document.body.classList.remove('disabled');\n      }\n    }\n  );\n  return createPortal(\n    <Popup title={title}>\n      <div className={s.text}>\n        {text}\n      </div>\n      <div className={s.actions}>\n        <button className={cx('button', 'button-primary')} onClick={ok}>{okText || ''}</button>\n        <button className={cx('button', 'button-secondary')} onClick={cancel}>{cancelText || ''}</button> \n      </div>\n    </Popup>,\n    root,\n  );\n}","import { request, authRequest } from 'api/request';\nimport qs from 'query-string';\nimport { IComment } from 'models/comment';\n\nexport async function getComments(projectId?: number, pageId?: number, userId?: number, before?: Date) {\n  const params: { [key: string]: any } = {};\n  \n  if (projectId) {\n    params.project = projectId;\n  }\n\n  if (userId) {\n    params.user = userId;\n  }\n  \n  if (pageId) {\n    params.page = pageId;\n  }\n  \n  if (before) {\n    params.before = before;\n  }\n  \n  return request<IComment[]>(`comments?${qs.stringify(params)}`, 'get',);\n}\n\nexport function createComment(projectId: number, text: string, data: any, pageId?: number, anonymous?: boolean, parentId?: number) {\n  const formData = new FormData();\n  formData.append('text', text);\n  formData.append('data', JSON.stringify(data));\n  formData.append('projectId', projectId.toString());\n  if (pageId) {\n    formData.append('pageId', pageId.toString());\n  }\n  if (anonymous) {\n    formData.append('anonymous', anonymous.toString());\n  }\n  if (parentId) {\n    formData.append('parentId', parentId.toString());\n  }\n  return authRequest<IComment>('comments', 'post', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\n}\n\n\n\nexport function updateComment(commentId: number, text: string, data: any) {\n  const formData = new FormData();\n  formData.append('text', text);\n  formData.append('data', JSON.stringify(data));\n  return authRequest<IComment>(`comments/${commentId}`, 'patch', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\n}\n\nexport function removeComment(commentId: number) {\n  return authRequest<IComment>(`comments/${commentId}`, 'delete');\n}\n\nexport function likeComment(commentId: number, type: number) {\n  return authRequest<IComment>(`comments/${commentId}/like?type=${type}`, 'post');\n}","import React, { useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport cx from 'classnames';\nimport { IComment } from 'models/comment';\nimport moment from 'moment-timezone';\nimport useUser from 'hooks/useUser';\nimport { staticBase } from 'helpers/constants';\nimport { UserActionType, AppState } from 'store';\nimport s from './CommentWidget.module.scss';\nimport AddCommentForm from 'components/comment/AddCommentForm/AddCommentForm';\nimport { ContentRenderer } from 'components/form/ContentInput/ContentInput';\nimport ConfirmWindow from 'components/common/ConfirmWindow/ConfirmWindow';\nimport { createComment, likeComment, removeComment, updateComment } from 'api/comment';\nimport { ReactComponent as Like } from 'icons/like.svg';\nimport { ReactComponent as Dislike } from 'icons/dislike.svg';\n\ninterface IProps {\n  comment: IComment;\n  className?: string;\n  onAnswerRemove?: any;\n  onAnswerAdd?: any;\n  onUpdate?: any;\n  deleted?: boolean;\n  level: number;\n  disabled?: boolean;\n  hasLink?: boolean;\n}\n\nexport default function CommentWidget({ disabled, hasLink, deleted, comment, className, level, onAnswerAdd, onUpdate }: IProps) {\n  const { user } = useUser();\n  const [editMode, setEditMode] = useState(false);\n  const [commentLoading, setCommentLoading] = useState(false);\n  const dispatch = useDispatch();\n  const { openCommentForm } = useSelector((s: AppState) => s.user);\n  const anonymous = comment.anonymous;\n  const commentUser = comment.user;\n  const [displayConfirmDelete, setDisplayConfirmDelete] = useState(false);\n  const canDelete = user && ((commentUser && user.id === commentUser.id) || user.isAdmin);\n  const canEdit = user && commentUser && user.id === commentUser.id;\n  const html = useMemo(\n    () => {\n      return comment.text;\n    }, \n    [comment.text]\n  );\n  \n  return (\n    <div>\n      <div className={cx(s.wrapper, { [s.highlight]: !!comment.highlight, [className!]: !!className })}>\n        {deleted ? (\n          <>\n            <span className={s.userImage} />\n            <div className={s.content}>\n              <div className={s.deletedText}> </div>\n            </div>\n          </>\n        ) : (\n          editMode ? (\n            <AddCommentForm \n              comment={comment} \n              disabled={commentLoading}\n              onSave={async (text: string, dt: any) => {\n                setCommentLoading(true);\n                try {\n                  const { data } = await updateComment(comment.id, text, dt);\n                  onUpdate(data);\n                  setEditMode(false);\n                } catch(err) {\n                  console.error(err);\n                }\n                setCommentLoading(false);\n              }}\n              onCancel={() => setEditMode(false)}\n            />\n          ) : (\n            <>\n              {anonymous ? (\n                <span className={s.userImage} />\n              ) : (\n                hasLink ? (\n                  <Link \n                    to={`/users/${commentUser!.id}`}\n                    className={s.userImage}\n                    style={{ backgroundImage: (commentUser!.cover ? `url(${commentUser!.cover.startsWith('images/') ? `${staticBase}/${commentUser!.cover}` : commentUser!.cover})` : '') }}\n                  />\n                ) : (\n                  <div \n                    className={s.userImage}\n                    style={{ backgroundImage: (commentUser!.cover ? `url(${commentUser!.cover.startsWith('images/') ? `${staticBase}/${commentUser!.cover}` : commentUser!.cover})` : '') }}\n                  />\n                )\n                \n              )}\n              \n              <div className={s.content}>\n                {anonymous ? (  \n                  <span className={s.anonymous}> </span>\n                ) : (\n                  hasLink ? (\n                    <Link\n                      to={`/users/${commentUser!.id}`} \n                      className={s.name}\n                    >\n                      {commentUser!.name}\n                    </Link>\n                  ) : (\n                    <div\n                      className={s.name}\n                    >\n                      {commentUser!.name}\n                    </div>\n                  )\n                  \n                )}\n                <div className={s.date}>\n                  {moment.utc(comment.created).local().format('kk:mm D MMM YYYY')}\n                </div>\n                <div className={cx('trix-content', s.text)} dangerouslySetInnerHTML={{ __html: html }}  />\n                <div className={s.bottom}>\n                  <div className={s.likes}>\n                    \n                      <Like\n                        onClick={async () => {\n                          if (!user) {\n                            dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                            return;\n                          }\n                          const { data: { positiveScore, negativeScore } } = await likeComment(comment.id, 1);\n                          onUpdate!({ ...comment, positiveScore, negativeScore });\n                        }}\n                      />\n                      \n                    \n                    <div className={s.likeCount}>{comment.positiveScore - comment.negativeScore}</div>\n                    \n                      <Dislike \n                        onClick={async () => {\n                          if (!user) {\n                            dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                            return;\n                          }\n                          const { data: { positiveScore, negativeScore } } = await likeComment(comment.id, 2);\n                          onUpdate!({ ...comment, positiveScore, negativeScore });\n                        }}\n                      />\n                      \n                    \n                  </div>\n                  {!disabled && (\n                    <div\n                      onClick={() => {\n                        if (!user) {\n                          dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                          return;\n                        }\n                        dispatch({ type: UserActionType.COMMENT_FORM_OPEN_ACTION, payload: comment });\n                      }} \n                      className={s.reply} \n                    ></div>\n                  )}\n                  \n                </div>\n                <div className={s.actions}>\n                  {canEdit && <span onClick={() => setEditMode(true)} className={s.action}></span>}\n                  {canDelete && <span onClick={() => setDisplayConfirmDelete(true)} className={s.action}></span>}\n                </div>\n              </div>\n            </>\n          )\n        )}\n        \n        \n      </div>\n      {/* {!comment.threadId && comment.answersCount > 0 && (\n        <div className={s.loadAnswer}>\n          <span>Show answers ({comment.answersCount - ((comment.children && comment.children.length) || 0)})</span>\n        </div>\n      )} */}\n      {comment.children && comment.children.length ? (\n        <div className={s.answers}>\n          {comment.children.map(c => (\n            <CommentWidget \n              onUpdate={onUpdate}\n              deleted={c.deleted}\n              level={level + 1}\n              className={s.answer} \n              onAnswerAdd={onAnswerAdd}\n              comment={c} \n              key={c.id}\n              hasLink={hasLink}\n            />\n          ))}\n        </div>\n      ) : null}\n      {openCommentForm && openCommentForm.id === comment.id && user && (\n        <div className={s.addAnswer}>\n          <AddCommentForm\n            disabled={commentLoading}\n            parent={openCommentForm}\n            onSave={async (text: string, dt: any, anonymous?: boolean) => {\n              setCommentLoading(true);\n              try {\n                const { data } = await createComment(comment.projectId, text, dt, comment.pageId, anonymous, comment.id);\n                onAnswerAdd && onAnswerAdd(data);\n                dispatch({ type: UserActionType.COMMENT_FORM_OPEN_ACTION, payload: undefined });\n                setCommentLoading(false);\n                return true;\n              } catch(err) {\n                console.error(err);\n                setCommentLoading(false);\n                return false;\n              }\n            }}\n          />\n        </div>\n      )}\n\n      {displayConfirmDelete && (\n        <ConfirmWindow\n          title=\" ?\"\n          ok={async () => {\n            await removeComment(comment.id);\n            onUpdate({ ...comment, deleted: true });\n            setDisplayConfirmDelete(false);\n          }}\n          cancel={() => setDisplayConfirmDelete(false)}\n          okText=\"\"\n        />\n      )}\n    </div>\n  )\n}","import * as SignalR from '@microsoft/signalr';\nimport { apiEndpoint } from 'helpers/constants';\n\nvar connection: SignalR.HubConnection | undefined;\n\n\nlet waitToken: any;\n\nexport async function connectWS(userId?: number) {\n  var cn = new SignalR.HubConnectionBuilder()\n  .withUrl(`${apiEndpoint}/ws/profile?user=${userId}`)\n  .withAutomaticReconnect()\n  .build();\n  waitToken = new Promise(async resolve => {\n    await cn!.start();\n    // console.log('started', cn);\n    resolve(true);\n  });\n  await waitToken;\n  waitToken = undefined;\n  connection = cn;\n  // console.log('waited', connection);\n  return cn;\n}\nexport async function getConnectionWS() {\n  if (waitToken) {\n    await waitToken;\n  }\n  return connection;\n}\n\nexport async function disconnectWS() {\n  if (waitToken) {\n    await waitToken;\n  }\n  // console.log('stopped', connection);\n  await connection?.stop();\n  connection = undefined;\n  return true;\n}\n","import React, { useEffect, useState, useMemo, useLayoutEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as SignalR from '@microsoft/signalr';\nimport cx from 'classnames';\nimport { useLocation } from 'react-router-dom';\nimport sortBy from 'lodash/sortBy';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport { AppState, ProjectActionType } from 'store';\nimport CommentWidget from 'components/comment/CommentWidget/CommentWidget';\nimport AddCommentForm from 'components/comment/AddCommentForm/AddCommentForm';\nimport { getComments, createComment } from 'api/comment';\nimport { IComment } from 'models/comment';\nimport { UserActionType } from 'store';\nimport useUser from 'hooks/useUser';\nimport { getConnectionWS } from 'api/hub';\n\nimport s from './Comments.module.scss';\ninterface IProps {\n  projectId?: number;\n  pageId?: number;\n  count?: number;\n  userId?: number;\n}\n\nexport default function Comments({ projectId, pageId, userId }: IProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const dispatch = useDispatch();\n  const { comments } = useSelector((s: AppState) => s.project);\n  const { openCommentForm } = useSelector((s: AppState) => s.user);\n  const { user } = useUser();\n  const [hideNegative, setHideNegative] = useState(true);\n  const [init, setInit] = useState(false);\n  const location = useLocation();\n\n\n  useLayoutEffect(\n    () => {\n      if (comments && !init) {\n        const hash = location.hash;\n        if (hash.indexOf('#comment') !== -1) {\n          const id = +hash.replace('#comment', '');\n          if (id) {\n            const index = comments.findIndex(c => c.id === id);\n            if (index !== -1 && !comments[index].highlight) {\n              comments[index] = { ...comments[index], highlight: true };\n              dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: [...comments] });\n            }\n          }\n        }\n        setInit(true);\n      }\n    },\n    [comments], // eslint-disable-line\n  );\n\n  useEffect(\n    () => {\n      dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: null });\n      const loadComments = async (projectId?: number, pageId?: number, userId?: number) => {\n        try {\n          setIsLoading(true);\n          const res = await getComments(projectId, pageId, userId);\n          dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: res.data });\n        } catch (err) {\n          dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: [] });\n        }\n        setIsLoading(false);\n      }\n      \n      loadComments(projectId, pageId, userId);\n      return () => {\n        dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: [] });\n        dispatch({ type: UserActionType.COMMENT_FORM_OPEN_ACTION, payload: undefined });\n      }\n    },\n    [projectId, userId], // eslint-disable-line\n  );\n  const sorted = useMemo(\n    () => {\n      if (!comments) {\n        return [];\n      }\n      const ordered = sortBy(comments, ['depth']).reverse();\n      let result: any = [];\n      \n      ordered.forEach(c => {\n        const children = ordered.filter(ch => ch.threadId === c.id || ch.parentId === c.id);\n        if (!c.deleted || children.filter(c => !c.deleted).length > 0) {\n          if (!hideNegative || (c.positiveScore - c.negativeScore) >= 0 || children.filter(ch => (ch.positiveScore - ch.negativeScore) >= 0).length > 0) {\n            result.push(c);\n          }\n        }\n      });\n      const filtered = sortBy(result, ['id']).map(c => ({ ...c }));\n      const parents = filtered.filter(c => !c.parentId);\n      filtered.forEach(c => {\n        c.children = filtered.filter(a => a.parentId === c.id)\n      });      \n      return parents;\n    },\n    [comments, hideNegative],\n  );\n\n\n  useEffect(\n    () => {\n      if (userId) {\n        return;\n      }\n      const handler = async () => {\n        try {  \n          const res = await getComments(projectId, pageId, undefined);\n          dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: res.data });\n        } catch (err) {\n\n        }\n      };\n      let expired = false;\n      let connection: SignalR.HubConnection | undefined;\n      const eventName = `CommentsChanged:${projectId}${pageId ? `:${pageId}` : ''}`;\n      const onLoad = async () => {\n        connection = await getConnectionWS();\n        if (!expired && connection)\n          connection.on(eventName, handler);\n      }\n\n      onLoad();\n      return () => {\n        expired = true;\n        if (connection) {\n          connection.off(eventName, handler);\n          connection = undefined;\n        }\n      }\n    },\n    [projectId, pageId, userId, user] // eslint-disable-line\n  );\n\n  if (!comments) {\n    return <div className=\"spinner\" />;\n  }\n\n  const onAddComment = async (comment: string, data: any, anonymous?: boolean) => {\n    if (!projectId) {\n      return;\n    }\n    setIsLoading(true);\n    try {\n      const res = await createComment(projectId, comment, data, pageId, anonymous);\n      dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: [...comments!, { ...res.data, children: [] }] });\n      dispatch({ type: UserActionType.COMMENT_FORM_OPEN_ACTION, payload: undefined });\n      setIsLoading(false);\n      return true;\n    } catch(err) {\n      setIsLoading(false);\n      console.error(err);\n      return false;\n    }\n  }\n\n  return (\n    <div className={s.wrapper}>\n        <div className={s.top}>\n          <div className={s.title}>\n             ({sorted.length}):\n          </div>\n          <div className={s.hideNegative}>\n            <Checkbox \n              checked={!hideNegative}\n              onChange={e => {\n                setHideNegative(!e.target.checked);\n              }}\n            />\n            <span> </span>\n          </div>\n        </div>\n        <div className={s.list}>\n          {sorted.length === 0 && (\n            <div className={s.empty}> </div>\n          )}\n          {sorted.map(comment => (\n            <CommentWidget \n              level={1}\n              onAnswerAdd={(data: IComment) => {\n                dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: [...comments, data] });\n              }}\n              className={s.comment}\n              comment={comment}\n              deleted={comment.deleted}\n              disabled={!projectId}\n              key={comment.id}\n              hasLink={!userId}\n              onUpdate={(data: IComment) => {\n                const commentIndex = comments.findIndex(c => c.id === data.id);\n                comments[commentIndex] = { ...data };\n                dispatch({ type: ProjectActionType.LOAD_COMMENTS_ACTION, payload: [...comments] });\n              }}\n            />\n          ))}\n      </div>\n\n      {projectId && (\n        openCommentForm === null ? (\n          <AddCommentForm\n            disabled={isLoading}\n            onSave={onAddComment}\n          />\n        ) : (\n          <div\n            onClick={() => {\n              if (!user) {\n                dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                return;\n              }\n              dispatch({ type: UserActionType.COMMENT_FORM_OPEN_ACTION, payload: null });\n            }} \n            className={cx(s.reply, s.addComment)} \n          > </div>\n        ))\n      }\n    </div>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport { useParams , useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AppState, ProjectActionType } from 'store';\nimport { getProjects, likeProject } from 'api/project';\nimport { UserActionType } from 'store';\nimport useUser from 'hooks/useUser';\nimport { refreshToken, setJwtToken } from 'api/request';\nimport { logout } from 'api/user';\nimport Cookies from 'js-cookie';\nimport { Helmet } from 'react-helmet';\nimport cx from 'classnames';\nimport { IProject } from 'models/project';\nimport Comments from 'components/comment/Comments/Comments';\n\nimport { getUserInfo, getUser, getUserProjects, getUserComments } from 'api/user';\nimport { IUser } from 'models/user';\nimport { staticBase } from 'helpers/constants';\nimport ProjectsList from 'components/project/ProjectsList/ProjectsList';\n\nimport s from './UserPage.module.scss';\n\n\ninterface IProps {\n  user?: IUser;\n  onEdit?(): any;\n}\n\nexport default function UserPage({ user: currentUser, onEdit }: IProps) {\n  const [data, setData] = useState<any>(null);\n  const history = useHistory();\n  const params = useParams<{ id: string }>();\n  const id = +(currentUser ? currentUser.id : params.id);\n  const [moreLoading, setMoreLoading] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const dispatch = useDispatch();\n  const { user } = useUser();\n  const [page, setPage] = useState(0);\n  const { projects } = useSelector((s: AppState) => s.project);\n\n  useEffect(\n    () => {\n      const onLoad = async () => {\n        setIsLoading(true);\n        setData(null);\n        if (id) {\n          try {\n            const { data: user } = await getUser(+id);\n            const { data: info } = await getUserInfo(+id);\n            const { data: projects } = await getUserProjects(+id);\n            const { data: comments } = await getUserComments(+id);\n            dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects] });\n            setData({...user, ...info});\n          } catch (err) {\n            console.error(err);\n            history.replace('/');\n          }\n        }\n        setIsLoading(false);\n      }\n      onLoad();\n      return () => {\n        dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n      }\n    },\n    [id] // eslint-disable-line\n  );\n  const onLogout = async () => {\n    try {\n      await logout();\n    } catch (err) {}\n    Cookies.remove('refreshToken');\n    // document.cookie = '';\n    setJwtToken('');\n    dispatch({ type: UserActionType.LOGOUT_ACTION, payload: true });\n    refreshToken();\n  };\n  \n  if (!data || isLoading) {\n    return <div className=\"spinner overlay-spinner\" />;\n  }\n\n  \n  return (\n    <div className={cx('content', s.wrapper)}>\n      <Helmet>\n        <title>Projects & protocols repository: {data.name}</title>\n      </Helmet>\n      <div className={s.left}>\n        {data.cover && (\n          <div\n            className={s.cover} \n            style={{ backgroundImage: `url(${data.cover.startsWith('images/') ? `${staticBase}/${data.cover}` : data.cover})` }}\n            />\n        )}\n\n        <div className={s.name}>\n          {data.name}\n        </div>\n        {(data.city || data.education) && (\n          <div className={s.info}>\n            {data.city && <div>{data.city}</div>}\n            {data.education && <div>{data.education}</div>}\n          </div>\n        )}\n\n        {user && user.id === data.id && (\n          <div className={s.actions}>\n            <button onClick={onEdit} className={cx('button', 'button-primary')}></button>\n            <button onClick={onLogout} className={cx('button', 'button-primary')}></button>\n          </div>\n        )}\n        \n        {data.tags && data.tags.length > 0 && (\n          <div className={s.row}>\n            <div className={s.label}> :</div>\n            <div className={s.values}>\n              {data.tags.map((t: string) => (<div className={s.value} key={t}>{t}</div>))}\n            </div>\n          </div>\n        )}\n\n        {data.skills && data.skills.length > 0 && (\n          <div className={s.row}>\n            <div className={s.label}>:</div>\n            <div className={s.values}>\n              {data.skills.map((t: string) => (<div className={s.value} key={t}>{t}</div>))}\n            </div>\n          </div>\n        )}\n\n        {data.links && data.links.length > 0 && (\n          <div className={s.row}>\n            <div className={s.label}>:</div>\n            <div className={s.values}>\n              {data.links.map((t: string) => (\n                <div  className={s.link} key={t}>\n                  <a href={t} target=\"_blank\" rel=\"noopener noreferrer\">{t}</a>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n      <div className={cx('content', s.center)}>\n        {projects && projects.length > 0 && (\n          <div className={s.projects}>\n            <ProjectsList\n              projects={projects}\n              className={s.projects}\n              hasMore={projects.length >= (page + 1) * 8}\n              disabled={moreLoading}\n              onMoreLoad={async () => {\n                try {\n                  setMoreLoading(true);\n                  const { data } = await getUserProjects(+id, page + 1);\n                  setPage(page + 1);\n                  dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects, ...data] });\n                } catch(err) {\n                  // dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n                }\n                setMoreLoading(false);\n              }}\n              onLike={async (project: IProject) => {\n                if (!user) {\n                  dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                  return;\n                }\n                try {\n                  const { data: { count, liked } } = await likeProject(project.id);\n                  const index = projects.indexOf(project);\n                  projects[index] = { ...project, likesCount: count, liked };\n                  dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects] });\n                  \n                } catch(err) {\n\n                }\n              }}\n            />\n          </div>\n        )}\n        <div className={s.comments}>\n          <Comments userId={id} />\n        </div>\n      </div>\n      <div className={s.right}></div>\n    </div>\n  )\n}","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Page from 'components/common/Page/Page';\nimport useUser from 'hooks/useUser';\nimport UserPage from 'components/common/UserPage/UserPage';\n\n\nimport s from './Account.module.scss';\n\n\nexport default function Account() {\n  const { user } = useUser();\n  const history = useHistory();\n  useEffect(\n    () => {\n      if (!user) {\n        history.replace('/');\n        return;\n      }\n    },\n    [user], // eslint-disable-line\n  );\n\n  if (!user) {\n    return null;\n  }\n  return <UserPage user={user} onEdit={() => history.push('/account/edit')} />;\n}","const w1 = /^(?:[A-Za-z--\\d\\s]+)$/;\nconst w2 = /^(?:[A-Za-z--\\d]+)$/\n\nexport function isOnlyDigitLetters(value: string, withWhiteSpaces = true) {\n  return (withWhiteSpaces ? w1 : w2).test(value)\n}\n\n\nexport function urlify(text: string) {\n  var urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n  return text.replace(urlRegex, '<a href=\"$1\" target=\"_blank\">$1</a>');\n}\n\nexport function retrieveProp(htmlString: string, from: string, prop: string) {\n  const tmp = document.createElement('div');\n  tmp.innerHTML = htmlString;\n  const elem: any = tmp.getElementsByTagName(from)[0];\n  return elem ? elem[prop] : '';\n}","import React, { useEffect, useState, useCallback } from 'react';\nimport cx from 'classnames';\nimport { useHistory } from 'react-router-dom';\nimport validator from 'validator';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AppState, UserActionType } from 'store';\nimport FormRow from 'components/form/FormRow/FormRow';\nimport { getUserInfo, updateUserInfo } from 'api/user';\nimport useUser from 'hooks/useUser';\nimport { User } from 'models/user';\nimport { staticBase } from 'helpers/constants';\nimport { isOnlyDigitLetters } from 'helpers/string';\nimport TextField from 'components/form/TextField/TextField';\nimport { ReactComponent as Close } from 'icons/close.svg';\nimport { useDropzone } from 'react-dropzone';\n\nimport s from './AccountForm.module.scss';\n\ninterface IProps {\n  onBack(): any;\n}\n\nexport default function AccountForm({ onBack }: IProps) {\n  const { user } = useUser();\n  const { userInfo } = useSelector((s: AppState) => s.user);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [name, setName] = useState('');\n  const [login, setLogin] = useState('');\n  const [city, setCity] = useState('');\n  const [education, setEducation] = useState('');\n  const [tags, setTags] = useState<string[]>([]);\n  const [skills, setSkills] = useState<string[]>([]);\n  const [links, setLinks] = useState<string[]>([]);\n  const [cover, setCover] = useState<any>(null);\n  const [newTag, setNewTag] = useState('');\n  const [newSkill, setNewSkill] = useState('');\n  const [newLink, setNewLink] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [updated, setUpdated] = useState(false);\n  const [coverPath, setCoverPath] = useState('');\n\n  const { acceptedFiles, getRootProps, getInputProps, isDragAccept, isDragReject } = useDropzone({ accept: 'image/png, image/jpg, image/gif, image/jpeg' })\n  \n  const reset = useCallback(\n    () => {\n      \n      if (userInfo && user) {\n        setLinks(userInfo.links || []);\n        setSkills(userInfo.skills || []);\n        setTags(userInfo.tags || []);\n        setEducation(userInfo.education  || '');\n        setCity(userInfo.city || '');\n        setName(user.name || '');\n        setCoverPath(user.cover ? (user.cover.startsWith('images/') ? `${staticBase}/${user.cover}` : user.cover) : '');\n        setLogin(user.login || '');\n        setNewTag('');\n        setNewSkill('');\n        setNewLink('');\n      }\n    },\n    [userInfo, user]\n  );\n  useEffect(\n    () => {\n      if (!user) {\n        history.replace('/');\n        return;\n      }\n      setIsLoading(true);\n      const onLoad = async () => {\n        try {\n          const { data: payload } = await getUserInfo();\n          dispatch({ type: UserActionType.LOAD_USER_INFO_ACTION, payload });\n        } catch(err) {\n          history.replace('/');\n        }\n        setIsLoading(false);\n      };\n      onLoad();\n    },\n    [user], // eslint-disable-line\n  );\n\n  useEffect(\n    () => {\n      reset();\n    },\n    [reset]\n  );\n  useEffect(\n    () => {\n      if (acceptedFiles.length > 0) {\n        setCover(acceptedFiles[0]);\n      }\n    },\n    [acceptedFiles.length]\n  );\n\n  useEffect(\n    () => {\n      if (!cover) {\n        return;\n      }\n      const reader  = new FileReader();\n      reader.onload = (e:any) =>  {\n        setCoverPath(e.target.result);\n      }\n      reader.readAsDataURL(cover);\n    },\n    [cover]\n  );\n  \n\n  if (!user) {\n    return null;\n  }\n\n  const save = async () => {\n    const errors: { [key: string]: string } = {};\n    if (name.trim().length === 0) {\n      errors.name = ' ';\n    } else if (name.trim().length > 120) {\n      errors.name = '  ';\n    } else if (!(/\\p{L}/u.test(name.replace(/\\s/g,'')))) {\n      errors.name = ' ';\n    }\n    \n    if (login.trim().length > 0 && !isOnlyDigitLetters(login.trim(), false)) {\n      errors.login = ' ';\n    } else if (login.trim().length > 120) {\n      errors.login = '  ';\n    }\n    \n    if (cover && cover.size / 1000000 > 10) {\n      errors.cover = '   (10 .)';\n    }\n    \n    setErrors(errors);\n    if (Object.keys(errors).length === 0) {\n      setIsLoading(true);\n      setUpdated(false);\n      try {\n        \n        const { data: { account, info } } = await updateUserInfo({ name, login, city, education, tags, skills, links, cover: coverPath, coverFile: cover });\n        dispatch({ \n          type: UserActionType.LOAD_USER_ACTION, \n          payload: User.FromResponse(account),\n        });\n        dispatch({ \n          type: UserActionType.LOAD_USER_INFO_ACTION, \n          payload: info, \n      });\n      onBack();\n      setUpdated(true);\n      } catch (err) {\n        console.error(err);\n        setErrors(JSON.parse(err.data.message));\n      }\n      setIsLoading(false);\n    }\n  }\n  \n\n  return (\n    <div className={s.wrapper}>\n      <div className={s.title}> </div>\n      <div className={s.form}>\n        <FormRow maxLength={120} length={name.trim().length}>\n          <TextField\n            fullWidth\n            size=\"bg\"\n            name=\"name\"\n            value={name}\n            label=\"\"\n            invalid={!!errors.name}\n            invalidText={errors.name}\n            onChange={e => {\n              setName(e.target.value);\n            }}\n          />  \n        </FormRow>\n        <FormRow maxLength={120} length={login.trim().length}>\n          <TextField\n            fullWidth\n            label=\"\"\n            name=\"login\"\n            size=\"bg\"\n            value={login}\n            invalid={!!errors.login}\n            invalidText={errors.login}\n            onChange={e => {\n              setLogin(e.target.value);\n            }}\n          />  \n        </FormRow>\n        <FormRow maxLength={120} length={city.trim().length}>\n          <TextField\n            fullWidth\n            label=\"\"\n            size=\"bg\"\n            name=\"city\"\n            value={city}\n            invalid={!!errors.city}\n            invalidText={errors.city}\n            onChange={e => {\n              setCity(e.target.value);\n            }}\n          />  \n        </FormRow>\n        <FormRow maxLength={120} length={city.trim().length}>\n          <TextField\n            fullWidth\n            label=\"\"\n            size=\"bg\"\n            name=\"education\"\n            value={education}\n            invalid={!!errors.education}\n            invalidText={errors.education}\n            onChange={e => {\n              setEducation(e.target.value);\n            }}\n          /> \n        </FormRow>\n        <FormRow maxLength={20} length={tags.length}>\n          <div className={s.listTitle}>\n            :\n          </div>\n          <div className={s.list}>\n            {tags.map((tag, i) => (\n              <div \n                key={i}\n                className={s.listItem}\n              >\n                <span>{tag}</span>\n                <Close onClick={() => setTags(tags.filter(t => t !== tag))} />\n              </div>\n            ))}\n          </div>\n          {tags.length < 20 && (\n            <div className={s.listForm}>\n              <TextField\n                size=\"bg\"\n                value={newTag}\n                name=\"newTag\"\n                invalid={newTag.trim().length > 0 && !isOnlyDigitLetters(newTag.trim())}\n                onChange={e => {\n                  setNewTag(e.target.value)\n                }}\n              />\n              <button\n                disabled={newTag.trim().length === 0 || !isOnlyDigitLetters(newTag.trim())}\n                onClick={() => {\n                  setTags([...tags, newTag.trim()]);\n                  setNewTag('');\n                }} \n                className={cx('button', 'button-primary')}>\n                \n              </button>\n            </div>\n          )}\n        </FormRow>\n\n        <FormRow maxLength={20} length={skills.length}>\n          <div className={s.listTitle}>\n            :\n          </div>\n          <div className={s.list}>\n            {skills.map((skill, i) => (\n              <div \n                key={i}\n                className={s.listItem}\n              >\n                <span>{skill}</span>\n                <Close onClick={() => setSkills(skills.filter(t => t !== skill))} />\n              </div>\n            ))}\n          </div>\n          {skills.length < 20 && (\n            <div className={s.listForm}>\n              <TextField\n                size=\"bg\"\n                value={newSkill}\n                name=\"newSkill\"\n                invalid={newSkill.trim().length > 0 && !isOnlyDigitLetters(newSkill.trim())}\n                onChange={e => {\n                  setNewSkill(e.target.value)\n                }}\n              />\n              <button\n                disabled={newSkill.trim().length === 0 || !isOnlyDigitLetters(newSkill.trim())}\n                onClick={() => {\n                  setSkills([...skills, newSkill.trim()]);\n                  setNewSkill('');\n                }} \n                className={cx('button', 'button-primary')}>\n                \n              </button>\n            </div>\n          )}\n        </FormRow>\n\n        <FormRow maxLength={20} length={links.length}>\n          <div className={s.listTitle}>\n          :\n          </div>\n          <div className={s.list}>\n            {links.map((link, i) => (\n              <div \n                key={i}\n                className={s.listItem}\n              >\n                <span>{link}</span>\n                <Close onClick={() => setLinks(links.filter(t => t !== link))} />\n              </div>\n            ))}\n          </div>\n          {links.length < 20 && (\n            <div className={s.listForm}>\n              <TextField\n                size=\"bg\"\n                value={newLink}\n                name=\"newLink\"\n                invalid={newLink.trim().length > 0 && !validator.isURL(newLink.trim())}\n                onChange={e => {\n                  setNewLink(e.target.value)\n                }}\n              />\n              <button\n                disabled={newLink.trim().length === 0 || !validator.isURL(newLink.trim())}\n                onClick={() => {\n                  setLinks([...links, newLink.trim().toLowerCase()]);\n                  setNewLink('');\n                }} \n                className={cx('button', 'button-primary')}>\n                \n              </button>\n            </div>\n          )}\n        </FormRow>\n        \n        {coverPath ? (\n          <div className={s.image}>\n            <img src={coverPath} alt=\"\" />\n            <button\n              className={cx('button', 'button-danger')}\n              disabled={isLoading}\n              onClick={() => {\n                setCover(null);\n                setCoverPath('');\n              }}\n            ></button>\n          </div>\n        ) : (\n          <div \n          {...getRootProps({\n            maxFiles: 1,\n            className: cx('dropzone', s.imageDrop, { [s.rejectImageDrop]: isDragReject, [s.activeImageDrop]: isDragAccept }),\n          })}\n        >\n          <input {...getInputProps()} />\n          <p>  </p>\n        </div>\n        )}\n        {errors.cover && <div className={s.imageError}>{errors.cover}</div>}\n\n        <div className={s.actions}>\n          <button disabled={isLoading} className={cx('button', 'button-primary')} onClick={save}></button>\n          <button disabled={isLoading} className={cx('button', 'button-secondary')} onClick={onBack}></button>\n        </div>\n      </div>\n    </div>\n  );\n\n}","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport useUser from 'hooks/useUser';\nimport AccountForm from 'components/account/AccountForm/AccountForm';\n\n\nimport s from './AccountEdit.module.scss';\n\n\nexport default function Account() {\n  const { user } = useUser();\n  const history = useHistory();\n\n  useEffect(\n    () => {\n      if (!user) {\n        history.replace('/');\n        return;\n      }\n    },\n    [user], // eslint-disable-line\n  );\n\n  if (!user) {\n    return null;\n  }\n  return (\n    <AccountForm onBack={() => history.push('/account')} />\n  );\n  \n  \n}","import React, { useState, useEffect } from 'react';\nimport cx from 'classnames';\nimport Radio from '@material-ui/core/Radio';\nimport { IProject } from 'models/project';\nimport { createProject, updateProject } from 'api/project';\nimport ContentField from 'components/form/ContentField/ContentField';\nimport ConfirmWindow from 'components/common/ConfirmWindow/ConfirmWindow';\nimport FormRow from 'components/form/FormRow/FormRow';\nimport { deleteProject } from 'api/project';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { ProjectActionType } from 'store';\nimport { useDropzone } from 'react-dropzone';\nimport TextField from 'components/form/TextField/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { staticBase } from 'helpers/constants';\n\nimport s from './ProjectForm.module.scss';\ninterface IProps {\n  onSave?(project: IProject): any;\n  onCancel?(): any;\n  project?: IProject;\n  className?: string;\n}\n\nexport default function ProjectForm({ className, project, onSave, onCancel }: IProps) {\n  const [name, setName] = useState<any>('');\n  const [description, setDescription] = useState<any>('');\n  const [content, setContent] = useState<any>(null);\n  const [dt, setData] = useState<any>(null);\n  const [draft, setDraft] = useState<any>(true);\n  const [cover, setCover] = useState<File | null>(null);\n  const [coverPath, setCoverPath] = useState('');\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [deletedProject, setDeletedProject] = useState<IProject | null>(null);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [type, setType] = useState(0);\n\n  const { acceptedFiles, getRootProps, getInputProps, isDragAccept, isDragReject } = useDropzone({ accept: 'image/png, image/jpg, image/jpeg, image/gif' })\n\n  useEffect(\n    () => {\n      if (!project) {\n        setName('');\n        setDescription('');\n        setContent('');\n        setData({});\n        setDraft(true);\n        return;\n      };\n      setName(project.name);\n      setDescription(project.description);\n      setContent(project.content || '');\n      setDraft(!!project.draft);\n      setCoverPath(`${staticBase}/images/${project.cover}`);\n      try {\n        setData(JSON.parse(project.data || '{}'));\n      } catch (err) {\n        setData({});\n      }\n    },\n    [project]\n  );\n\n  useEffect(\n    () => {\n      if (acceptedFiles.length > 0) {\n        setCover(acceptedFiles[0]);\n      }\n    },\n    [acceptedFiles.length]\n  )\n  \n\n  useEffect(\n    () => {\n      if (!cover) {\n        return;\n      }\n      const reader  = new FileReader();\n      reader.onload = (e:any) =>  {\n        setCoverPath(e.target.result);\n      }\n      reader.readAsDataURL(cover);\n    },\n    [cover]\n  );\n\n  if (content === null) {\n    return null;\n  }\n\n  const save = async () => {\n    const errors: { [key: string]: string } = {};\n    // if (name.trim().length === 0) {\n    //   errors.name = ' ';\n    // } else if (name.trim().length > 120) {\n    //   errors.name = '  ';\n    // }\n    // if (description.trim().length === 0) {\n    //   errors.description = ' ';\n    // } else if (description.trim().length > 5000) {\n    //   errors.description = '  ';\n    // }\n    \n    // if (!cover && !project) {\n    //   errors.cover = ' ';\n    // } else if (cover && (cover.size / 1000000) > 10) {\n    //   errors.cover = '   (10 .)';\n    // }\n\n    // if (content.trim().length === 0) {\n    //   errors.content = ' ';\n    // } else if (content.trim().length > 15000) {\n    //   errors.content = '  ';\n    // }\n    \n    setErrors(errors);\n    // if (Object.keys(errors).length === 0) {\n      setIsLoading(true);\n      try {\n        // const res = await (project \n        //   ? updateProject(project.id, name, description, content, dt, cover, draft)\n        //   : createProject(name, description, content, dt, cover!, draft, type)\n        // );\n        console.log(\"project: \", {name, description, content, dt, cover, draft, type})\n        const res = await createProject(name, description, content, dt, cover!, draft, type)\n        \n        console.log(\"response: \", res);\n        \n        if (onSave) {\n          onSave(res?.data);\n        }\n      } catch (err) {\n        console.log(err);\n        \n        // setErrors(JSON.parse(err.data.message));\n      }\n      // setIsLoading(false);\n    // }\n  }\n\n  const onDelete = () => {\n    if (project) {\n      setDeletedProject(project);\n    }\n  };\n\n  \n  \n  \n  return (\n      <div className={cx(s.container, { [className!]: !!className })}>\n        <div className={s.top}>\n          {!project && (\n            <div className={s.types}>\n              <div className={s.typesTitle}>:</div>\n              <div className={s.typesList}>\n                <div>\n                  <Radio\n                    checked={type === 0}\n                    onChange={(e: any) => setType(+e.target.value)}\n                    value={0}\n                  /><span></span>\n                </div>\n                <div>\n                  <Radio\n                    checked={type === 1}\n                    onChange={(e: any) => setType(+e.target.value)}\n                    value={1}\n                  /><span></span>\n                </div>\n                <div>\n                  <Radio\n                    checked={type === 2}\n                    onChange={(e: any) => setType(+e.target.value)}\n                    value={2}\n                  /><span></span>\n                </div>\n              </div>\n            </div>\n          )}\n          <FormRow maxLength={120} length={name.trim().length} className={s.row}>\n              <TextField\n                fullWidth\n                size=\"bg\"\n                name=\"name\"\n                value={name}\n                invalid={!!errors.name}\n                invalidText={errors.name}\n                label=\"\"\n                onChange={e => {\n                  setName(e.target.value);\n                }}\n              />\n          </FormRow>\n          <FormRow maxLength={5000} length={description.trim().length} className={s.row}>\n            <TextField\n                fullWidth\n                size=\"bg\"\n                name=\"description\"\n                value={description}\n                invalid={!!errors.description}\n                invalidText={errors.description}\n                label=\"\"\n                onChange={e => {\n                  setDescription(e.target.value);\n                }}\n              />\n          </FormRow>\n        </div>\n        \n        {coverPath ? (\n          <div className={s.image}>\n            <img src={coverPath} alt=\"\" />\n            <button\n              className={cx('button', 'button-danger')}\n              disabled={isLoading}\n              onClick={() => {\n                setCover(null);\n                setCoverPath('');\n              }}\n            ></button>\n          </div>\n        ) : (\n          <div \n          {...getRootProps({\n            maxFiles: 1,\n            className: cx('dropzone', s.imageDrop, { [s.rejectImageDrop]: isDragReject, [s.activeImageDrop]: isDragAccept }),\n          })}\n        >\n          <input {...getInputProps()} />\n          <p>  </p>\n        </div>\n        )}\n        {errors.cover && <div className={s.imageError}>{errors.cover}</div>}\n        \n        <FormRow maxLength={15000} length={content.trim().length} className={s.row}>\n          <ContentField \n            className={s.editor} \n            value={dt} \n            onChange={(data, html) => {\n              setData(data);\n              setContent(html);\n            }}\n            error={errors.content}\n          />\n        </FormRow>\n        <div className={s.actions}>\n          <div className={s.actionsLeft}>\n            <button\n              disabled={isLoading}\n              onClick={save}\n              className={cx('button', 'button-primary')}\n            >\n              {project ? '' : ''}\n            </button>\n            <div className={s.public}>\n              <Checkbox\n                checked={!draft}\n                \n                id=\"draft\" \n                onChange={e => {\n                  setDraft(!e.target.checked);\n                }}\n              />\n              <span></span>\n            </div>\n          </div>\n          {project && (\n            <div className={s.actionsRight}>\n              <button\n                disabled={isLoading}\n                onClick={onCancel}\n                className={cx('button', 'button-secondary')}\n              >\n                \n              </button>\n                <button\n                disabled={isLoading}\n                onClick={onDelete}\n                className={cx('button', 'button-danger')}\n              >\n                \n              </button>\n            </div>\n          )}\n          \n        </div>\n        {deletedProject && (\n          <ConfirmWindow\n            text=\" ?\"\n            ok={async () => {\n              await deleteProject(deletedProject.id);\n              dispatch({ type: ProjectActionType.LOAD_PROJECT_ACTION, payload: null });\n              history.replace('/');\n            }}\n            cancel={() => setDeletedProject(null)}\n            okText=\"\"\n            cancelText=\"\"\n          />\n        )}\n      </div>\n  );\n}","import React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport { useDispatch } from 'react-redux';\nimport { UserActionType } from 'store';\nimport ProjectForm from 'components/project/ProjectForm/ProjectForm';\nimport cx from 'classnames';\n\nimport useUser from 'hooks/useUser';\n\nimport s from './CreateProject.module.scss';\n\nexport default function CreateProject() {\n  const { user } = useUser();\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  useEffect(\n    () => {\n      if (!user) {\n        dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n        history.replace('/');\n        \n      }\n    },\n    [user], // eslint-disable-line\n  );\n  return (\n    <div className={cx('content', s.wrapper)}>\n      <div className={s.title}> </div>\n      <ProjectForm\n        className={s.form} \n        onSave={project => {\n          history.push(`/project/${project.id}`);\n        }} \n      />\n    </div>\n  );\n}","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport cx from 'classnames';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AppState, ProjectActionType } from 'store';\nimport ProjectsList from 'components/project/ProjectsList/ProjectsList';\nimport Page from 'components/common/Page/Page';\nimport { getMyProjects, likeProject } from 'api/project';\nimport useUser from 'hooks/useUser';\nimport { Helmet } from 'react-helmet';\nimport { UserActionType } from 'store';\nimport { IProject } from 'models/project';\n\nimport s from './MyProjects.module.scss';\n\nexport default function MyProjects() {\n  const [projectLoaded, setProjectLoaded] = useState(false);\n  const dispatch = useDispatch();\n  const { user } = useUser();\n  const { projects } = useSelector((s: AppState) => s.project);\n  const history = useHistory();\n  const [page, setPage] = useState(0);\n\n  const [index, setIndex] = useState(0);\n  const [typeIndex, setTypeIndex] = useState(-1);\n  const [moreLoading, setMoreLoading] = useState(false);\n\n  \n\n  // useEffect(\n  //   () => {\n  //     setTypeIndex(-1);\n  //   },\n  //   [index],\n  // );\n\n  useEffect(\n    () => {\n      setPage(0);\n    },\n    [typeIndex],\n  );\n\n  useEffect(\n    () => {\n      if (!user) {\n        history.replace('/');\n        return;\n      }\n      let request: any = null;\n      const onLoad = async () => {\n        setProjectLoaded(false);\n        try {\n          request = getMyProjects(typeIndex, index, page);\n          const { data } = await request;\n          dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: data });\n        } catch(err) {\n          console.error(err);\n          dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n        }\n        request = null;\n        setProjectLoaded(true);\n      }\n      onLoad();\n      return () => {\n        if (request) {\n          request.cancel();\n        }\n        dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n      }\n    },\n    [user, index, typeIndex, page] // eslint-disable-line\n  );\n\n\n  return (\n    <div className={cx(s.wrapper, 'content')}>\n      <Helmet>\n        <title>Projects & protocols repository:  </title>\n      </Helmet>\n      <div className={s.navigation}>\n        <span\n          className={cx({ [s.active]: index === 0 })}\n          onClick={() => setIndex(0)}\n        ></span>\n        <i>/</i>\n        <span \n          className={cx({ [s.active]: index === 1 })}\n          onClick={() => setIndex(1)}\n        ></span>\n        <i>/</i>\n        <span\n          className={cx({ [s.active]: index === 2 })}\n          onClick={() => setIndex(2)}\n        ></span>\n      </div>\n      <div className={s.navigation}>\n        <span\n          className={cx({ [s.active]: typeIndex === -1 })}\n          onClick={() => setTypeIndex(-1)}\n        ></span>\n        <i>/</i>\n        <span\n          className={cx({ [s.active]: typeIndex === 1 })}\n          onClick={() => setTypeIndex(1)}\n        ></span>\n        <i>/</i>\n        <span\n          className={cx({ [s.active]: typeIndex === 0 })}\n          onClick={() => setTypeIndex(0)}\n        ></span>\n        <i>/</i>\n        <span\n          className={cx({ [s.active]: typeIndex === 2 })}\n          onClick={() => setTypeIndex(2)}\n        ></span>\n      </div>\n      {projectLoaded ? (\n        <div className={s.content}>\n          <ProjectsList \n            projects={projects} \n            hasMore={projects.length >= (page + 1) * 8} \n            disabled={moreLoading}\n            onMoreLoad={async () => {\n              try {\n                setMoreLoading(true);\n                const { data } = await getMyProjects(typeIndex, index, page + 1);\n                setPage(page + 1);\n                dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects, ...data] });\n              } catch(err) {\n                console.error(err);\n              }\n              setMoreLoading(false);\n            }}\n            onLike={async (project: IProject) => {\n              if (!user) {\n                dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                return;\n              }\n              try {\n                const { data: { count, liked } } = await likeProject(project.id);\n                const index = projects.indexOf(project);\n                projects[index] = { ...project, likesCount: count, liked };\n                dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects] });\n                \n              } catch(err) {\n\n              }\n            }}\n          />\n        </div>\n      ) : (\n        <div className=\"spinner overlay-spinner\" />\n      )}\n    </div>\n  )\n}\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgFolderDark = function SvgFolderDark(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 15,\n    height: 12,\n    viewBox: \"0 0 15 12\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 11.125C0 11.3571 0.0921872 11.5796 0.256282 11.7437C0.420376 11.9078 0.642936 12 0.875 12H14.125C14.3571 12 14.5796 11.9078 14.7437 11.7437C14.9078 11.5796 15 11.3571 15 11.125V4.5H0V11.125ZM15 1.875C15 1.64294 14.9078 1.42038 14.7437 1.25628C14.5796 1.09219 14.3571 1 14.125 1H6.15125L4.65125 0H0.875C0.642936 0 0.420376 0.0921873 0.256282 0.256282C0.0921872 0.420376 0 0.642936 0 0.875V3.5H15V1.875Z\",\n    fill: \"black\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFolderDark, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/folder_dark.80cf59d5.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport cx from 'classnames';\nimport { Link } from 'react-router-dom';\nimport { IUser } from 'models/user';\nimport { staticBase } from 'helpers/constants';\n\nimport s from './UserWidget.module.scss';\n\ninterface IProps {\n  user: IUser;\n  className?: string;\n}\n\nexport default function UserWidget({ user, className }: IProps) {\n  return (\n    <div className={cx(s.user, { [className!]: !!className })}>\n      <Link className={s.cover} to={`/users/${user.id}`} style={user.cover ? { backgroundImage: `url(${user.cover.startsWith('images/') ? `${staticBase}/${user.cover}` : user.cover})` } : undefined } />\n      <Link className={s.name} to={`/users/${user.id}`}>{user.name}</Link>\n    </div>\n  );\n}","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgDocDark = function SvgDocDark(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 15,\n    viewBox: \"0 0 12 15\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.35714 6.16071V0H0.401786C0.295226 0 0.19303 0.0423308 0.11768 0.11768C0.0423308 0.19303 0 0.295226 0 0.401786V14.5982C0 14.7048 0.0423308 14.807 0.11768 14.8823C0.19303 14.9577 0.295226 15 0.401786 15H11.3839C11.4905 15 11.5927 14.9577 11.668 14.8823C11.7434 14.807 11.7857 14.7048 11.7857 14.5982V6.42857H5.625C5.55396 6.42857 5.48583 6.40035 5.4356 6.35012C5.38536 6.29988 5.35714 6.23175 5.35714 6.16071Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.42857 0.324442V5.22321C6.42857 5.25873 6.44268 5.2928 6.4678 5.31792C6.49291 5.34303 6.52698 5.35714 6.5625 5.35714H11.4613C11.4745 5.35715 11.4874 5.35324 11.4985 5.34591C11.5095 5.33857 11.5181 5.32814 11.5231 5.31592C11.5282 5.30371 11.5296 5.29026 11.527 5.27727C11.5245 5.26429 11.5181 5.25235 11.5088 5.24297L6.54275 0.276897C6.53336 0.267569 6.52142 0.26123 6.50844 0.25868C6.49546 0.25613 6.48201 0.257484 6.46979 0.26257C6.45758 0.267657 6.44714 0.276248 6.43981 0.28726C6.43247 0.298272 6.42856 0.31121 6.42857 0.324442Z\",\n    fill: \"black\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgDocDark, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/doc_dark.d46e6324.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgStar = function SvgStar(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 17,\n    viewBox: \"0 0 18 17\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.52447 0.463525C8.67415 0.00287008 9.32585 0.00287008 9.47553 0.463525L11.1329 5.56434C11.1998 5.77035 11.3918 5.90983 11.6084 5.90983H16.9717C17.4561 5.90983 17.6575 6.52964 17.2656 6.81434L12.9266 9.96681C12.7514 10.0941 12.678 10.3198 12.745 10.5258L14.4023 15.6266C14.552 16.0873 14.0248 16.4704 13.6329 16.1857L9.29389 13.0332C9.11865 12.9059 8.88135 12.9059 8.70611 13.0332L4.3671 16.1857C3.97524 16.4704 3.448 16.0873 3.59768 15.6266L5.25503 10.5258C5.32197 10.3198 5.24864 10.0941 5.07339 9.96681L0.734384 6.81434C0.342527 6.52964 0.543915 5.90983 1.02828 5.90983H6.39159C6.6082 5.90983 6.80018 5.77035 6.86712 5.56434L8.52447 0.463525Z\",\n    fill: \"#E10000\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStar, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/star.01f0bc56.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useMemo, } from 'react';\nimport cx from 'classnames';\nimport { NavLink } from 'react-router-dom';\nimport { ReactComponent as Folder }  from 'icons/folder_dark.svg'\nimport { ReactComponent as Doc }  from 'icons/doc_dark.svg'\nimport { ReactComponent as Star }  from 'icons/star.svg'\nimport sortBy from 'lodash/sortBy';\nimport { IProject } from 'models/project';\n\nimport s from './StructureTree.module.scss';\n\nenum RowType {\n  Directory = 1,\n  Published = 2,\n  Unpublished = 3,\n  Deleted = 4,\n  Page = 5,\n}\n\ninterface IRowDataProps {\n  name: string,\n  type: RowType,\n  to: string,\n  important: boolean,\n  id?: number;\n  draft?: boolean;\n  children?: Array<IRowDataProps>;\n  content?: string;\n}\n\ninterface IRowProps extends IRowDataProps {\n  onAdd?(parentId?: number): any;\n  canEdit: boolean;\n  className?: string;\n  level: number;\n}\n\ninterface IProps {\n  project: IProject;\n  onAdd?(parentId?: number): any;\n  canEdit: boolean;\n  pages?: Array<{\n    id?: number;\n    name: string;\n    content?: string;\n    important?: boolean;\n    deleted?: boolean;\n    draft?: boolean;\n    children?: any;\n  }>;\n  relative?: boolean;\n}\nfunction mapData(data: any, project: IProject, onAdd: any): any[] {\n  return (sortBy((data || []), ['id']) as any[]).map(\n    (p: any) => ({\n      id: p.id,\n      name: p.name,\n      draft: p.draft,\n      type: RowType.Page,\n      to: `/project/${project.id}/${p.id}`,\n      important: p.important,\n      onAdd: () => onAdd(p.id),\n      children: mapData(p.children, project, onAdd),\n      content: p.content,\n    })\n  );\n}\nexport default function StructureTree({ project, pages, canEdit, onAdd, relative }: IProps) {\n  const data: IRowDataProps[] | undefined = useMemo(\n    () => mapData(pages, project, onAdd),\n    [project, pages],\n  );\n    \n  return (\n    <div className={s.wrapper}>\n      <Row\n        name={project.name}\n        className={s.rootRow}\n        type={RowType.Directory}\n        to={`/project/${project.id}`}\n        important={false}\n        children={data}\n        onAdd={onAdd}\n        canEdit={canEdit}\n        draft={project.draft}\n        level={1}\n      />\n      {!pages || (pages.length === 0 && canEdit) ? (\n        <div>\n          <span className={s.emptyAdd} onClick={() => onAdd && onAdd()}>Add page</span>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nfunction Row({ content = '', id, className, important, type, name, to, children, canEdit, onAdd, level, draft }: IRowProps) {\n  const deleted = type === RowType.Deleted;\n  return (\n    <div key={id} className={cx(s.row, { [className!]: !!className })}>\n      <div className={s.rowName}>\n        <NavLink\n          activeClassName={s.activeLink}\n          className={cx(s.rowLink, { \n            [s.rowUnpublished]: !!draft,\n            [s.rowDeleted]: deleted,\n          })}\n          to={to}\n        >\n          {type === RowType.Directory ? <Folder /> : <Doc />}\n          <span>{important && <Star className={s.importantIcon} />}{name}{!!draft ? ` (${level === 1 ? '' : ''})` : null}</span>\n        </NavLink>\n        {!deleted && level < 5 && canEdit && <span onClick={() => onAdd && onAdd()} className={s.addIcon}>+</span>}\n      </div>\n      {children && children.length > 0 && (\n        <div className={s.rowContent}>\n          {children.map((r, i) => <Row {...r} level={level + 1} canEdit={canEdit} />)}\n        </div>\n      )}\n    </div>\n  );\n}\n","var _rect, _defs;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgEdit = function SvgEdit(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24,\n    fill: \"url(#pattern0)\"\n  })), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"pattern\", {\n    id: \"pattern0\",\n    patternContentUnits: \"objectBoundingBox\",\n    width: 1,\n    height: 1\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#image0\",\n    transform: \"scale(0.02)\"\n  })), /*#__PURE__*/React.createElement(\"image\", {\n    id: \"image0\",\n    width: 50,\n    height: 50,\n    xlinkHref: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABCElEQVRoge3VMU7DMBSA4U+IORLH6QALC9dg4xCIU9BDcAo2usBJ2EBsSGUhUoc4Ka2D86r3S1YGR1Y+OYnJsixaHR5/r2HrsMEWr7ho+ziHtYvoRzjMECIcZgwRCrPCl3HIFi8C/AAu8WkaE2JnwmE63Bbmru33mq3nf8zxdj/sh8I9UzvT/FsZ+juVMFeGMYtE/BWzaMS+mBCIftwX1lgJhJjamWYdglgc5hhEP0rnzL9VA9H85E6ERNSrBiLUYZeIOUuERNQrERJRr5NAwJMTQMCzQIizGdbc4AYfM6xdrDakCYK6kGYI6kGaIqgDaY7geMgiEHA+MveG75H5d9xZACLLsixePyADtt5Y47hVAAAAAElFTkSuQmCC\"\n  }))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEdit, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/edit.ea0aac8c.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _rect2, _rect3;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgAccept = function SvgAccept(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 15,\n    height: 15,\n    viewBox: \"0 0 15 15\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 15,\n    height: 15,\n    rx: 2,\n    fill: \"currentColor\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 3,\n    y: 7.5,\n    width: 1,\n    height: 6,\n    rx: 0.5,\n    transform: \"rotate(-30 3 7.5)\",\n    fill: \"white\"\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 10.8735,\n    y: 3,\n    width: 1,\n    height: 10.6905,\n    rx: 0.5,\n    transform: \"rotate(30 10.8735 3)\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAccept, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/accept.a7806716.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _rect2, _rect3;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgDecline = function SvgDecline(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 15,\n    height: 15,\n    viewBox: \"0 0 15 15\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 15,\n    height: 15,\n    rx: 2,\n    fill: \"#E10000\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 3,\n    y: 3.70703,\n    width: 1,\n    height: 12,\n    rx: 0.5,\n    transform: \"rotate(-45 3 3.70703)\",\n    fill: \"white\"\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 11.7783,\n    y: 3,\n    width: 1,\n    height: 12,\n    rx: 0.5,\n    transform: \"rotate(45 11.7783 3)\",\n    fill: \"white\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgDecline, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/decline.826fc323.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useMemo, useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport cx from 'classnames';\nimport sortBy from 'lodash/sortBy';\nimport moment from 'moment-timezone';\n\nimport { staticBase } from 'helpers/constants';\nimport { retrieveProp } from 'helpers/string';\nimport useUser from 'hooks/useUser';\nimport { ProjectActionType, UserActionType, AppState } from 'store';\nimport { ReactComponent as Like } from 'icons/like.svg';\nimport { \n  likeProject, createPage, toggleProjectFollowing, toggleProjectRequest, leaveProject,\n  acceptRequest, declineRequest, removeUser, unFollowUser,\n } from 'api/project';\n import UserWidget from 'components/common/UserWidget/UserWidget';\n import StructureTree from 'components/project/StructureTree/StructureTree';\nimport Comments from 'components/comment/Comments/Comments';\nimport Popup from 'components/common/Popup/Popup';\nimport { ReactComponent as Edit } from 'icons/edit.svg';\nimport { ReactComponent as Accept } from 'icons/accept.svg';\nimport { ReactComponent as Decline } from 'icons/decline.svg';\n\nimport s from './ProjectMain.module.scss';\n\n\nexport default function ProjectMain() {\n  const store = useSelector((s: AppState) => s.project);\n  const project = store.project!;\n  const projectUsers = store.projectUsers;\n  const { user } = useUser();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const isAdmin = !!(user && (user.id === project!.user.id  || user.isAdmin));\n  const [usersShowed, setUsersShowed] = useState(false);\n\n  const [usersIndex, setUsersIndex] = useState(0);\n  const [popupUsersIndex, setPopUsersIndex] = useState(0);\n\n  const importantPages = useMemo(\n    () => project.pages ? project.pages.filter(p => !p.draft && p.important).map(p => ({ ...p, image: retrieveProp(p.content, 'img', 'src') })) : [],\n    [project.pages]\n  );\n\n  useEffect(\n    () => {\n      setPopUsersIndex(0);\n    },\n    [usersShowed]\n  );\n\n  const content = project!.content;\n\n  const projectId = project.id;\n\n  const users = projectUsers;\n\n  const pages = useMemo(\n    () => {\n      const list = project?.pages?.map(p => ({ \n        id: p.id,\n        name: p.name,\n        parentId: p.parentId,\n        important: p.important,\n        draft: !!p.draft,\n        children: [] as any[],\n        content: p.content,\n      }));\n      if (list) {\n        list.forEach(page => {\n          if (page.parentId) {\n            const parent = list.find(p => p.id === page.parentId);\n            parent?.children.push(page);\n          }\n        });\n        return list.filter(p => !p.parentId);\n      }\n    },\n    [project?.pages]\n  );\n\n  const setUsers = useCallback(\n    (data: any) => {\n      dispatch({ type: ProjectActionType.LOAD_PROJECT_USERS_ACTION, payload: data });\n    },\n    []\n  );\n\n  const follow = useCallback(\n    async () => {\n      await toggleProjectFollowing(project!.id, true);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, following: true }\n      });\n      setUsers({ ...users, followers: [user!, ...users.followers]})\n    },\n    [project, users, user]\n  );\n\n  const unFollow = useCallback(\n    async () => {\n      await toggleProjectFollowing(project!.id, false);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, following: false }\n      });\n      setUsers({ ...users, followers: users.followers.filter((u: any) => user!.id !== u.id)})\n    },\n    [project, users, user]\n  );\n\n  const request = useCallback(\n    async () => {\n      await toggleProjectRequest(project!.id, true);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, requested: true }\n      });\n    },\n    [project]\n  );\n\n  const cancelRequest = useCallback(\n    async () => {\n      await toggleProjectRequest(project!.id, false);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, requested: false }\n      });\n    },\n    [project]\n  );\n\n  const leave = useCallback(\n    async () => {\n      await leaveProject(project!.id);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, participate: false }\n      });\n      setUsers({ ...users, users: users.users.filter((u: any) => user!.id !== u.id)})\n    },\n    [project, users, user],\n  );\n\n\n  return (\n    <div className={s.wrapper}>\n      <div className={s.title}>\n        <Link to={`/project/${project.id}`}>\n          {project.name}{project.draft ? ' ()' : ''}\n        </Link>\n      </div>\n      <div className={s.type}>\n        \n      </div>\n      {isAdmin && (\n        <>\n          <Link className={s.edit} to={`/project/${project.id}/edit`}>\n            <Edit />\n          </Link>\n        </>\n      )}\n      <div className={s.info}>          \n        <div className={s.text}>\n          <img \n            className={s.cover} \n            alt={project.name} \n            src={`${staticBase}/${project.cover.startsWith('images/') ? project.cover : `images/${project.cover}`}`} \n          />\n          <div className={s.menu}>\n            <StructureTree\n              project={project}\n              pages={pages}\n              relative\n              canEdit={user !== null && (user.id === project.user.id || (projectUsers && projectUsers.users.findIndex((u: any) => u.id === user.id) !== -1))}\n              onAdd={async (id?: number) => {\n                const { data: page } = await createPage(project.id, id);\n                await dispatch({ \n                  type: ProjectActionType.LOAD_PROJECT_ACTION, \n                  payload: { ...project, pages: [...(project.pages || []), page] } \n                });\n                history.push(`/project/${project.id}/${page.id}/edit`);\n              }}\n            />\n          </div>\n          <div className={s.center}>\n            <div className={s.likes}> \n              <div\n                className={cx(s.likes, { [s.liked]: project.liked })}\n                onClick={async () => {\n                  if (!user) {\n                    dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n                    return;\n                  }\n                  try {\n                    const { data: { count: likesCount, liked } } = await likeProject(project.id);\n                    dispatch({ \n                      type: ProjectActionType.LOAD_PROJECT_ACTION, \n                      payload: { ...project, likesCount, liked } \n                    });\n                  } catch(err) {\n    \n                  }\n                }}\n              >\n                <Like />\n                <span>\n                  {project.likesCount}\n                </span>\n              </div>\n            </div>\n            <div className={s.centerRight}>\n              <div className={s.created}>{moment.utc(project.created).local().format('DD.MM.YYYY')}</div>\n              {project.user && <div className={s.user}>\n                <Link to={`/users/${project.user.id}`} >{project.user.name}</Link>\n              </div>}\n            </div>\n          </div>\n          <div className={s.users}>\n            {user && !isAdmin && (\n              <div className={s.actions}>\n                {project.following ? (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={unFollow}\n                  >\n                    \n                  </button>\n                ) : (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={follow}\n                  >\n                    \n                  </button>\n                )}\n                {project.participate ? (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={leave}\n                  >\n                    \n                  </button>\n                ) : (project.requested ? (\n                    <button\n                      className={cx('button', 'button-primary')}\n                      onClick={cancelRequest}\n                    >\n                      \n                    </button>\n                ) : (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={request}\n                  >\n                    \n                  </button>\n                ))}\n              </div>\n            )}\n            {users && (\n              <div className={s.users}>\n                <div className={s.usersTitle}>\n                  <span\n                    className={cx({ [s.selectedUsers]: usersIndex === 0 })}\n                    onClick={() => setUsersIndex(0)}\n                  ></span>\n                  <i>/</i>\n                  <span\n                    className={cx({ [s.selectedUsers]: usersIndex === 1 })}\n                    onClick={() => setUsersIndex(1)}\n                  ></span>\n                </div>\n                {usersIndex === 0 && (\n                  <div>\n                    {users.followers.length > 0 ? (\n                        <div>\n                          {users.followers.slice(0, 8).map((u: any) => (\n                            <UserWidget key={u.id} user={u} />\n                          ))}\n                        </div>\n                      ) : (\n                        <div> </div>\n                      )}\n                  </div>\n                )}\n                {usersIndex === 1 && (\n                  <div>\n                    {users.users.length > 0 ? (\n                        <div>\n                          {users.users.slice(0, 8).map((u: any) => (\n                            <UserWidget key={u.id} user={u} />\n                          ))}\n                        </div>\n                      ) : (\n                        <div> </div>\n                      )}\n                  </div>\n                )}\n              </div>\n            )}\n            <div className={s.adminActions}>\n              <button\n                className={cx('button', 'button-primary')}\n                onClick={() => setUsersShowed(true)}\n              >\n                {isAdmin ? '' : ''}\n              </button>\n            </div>\n          </div>\n          <div className={cx('text-content', s.text)} dangerouslySetInnerHTML={{ __html: content }} />\n          {importantPages.length > 0 && (\n            <div className={s.important}>\n              <div className={s.importantTitle}> :</div>\n              <div className={s.importantList}>\n                {sortBy(importantPages, ['id']).map(p => (\n                  <div className={s.importantPage} key={p.id}>\n                    <Link to={`/project/${project.id}/${p.id}`}>\n                      <div className={s.importantPageImage} style={{ backgroundImage: p.image ? `url(${p.image.startsWith('images/') ? `${staticBase}/${p.image}` : p.image})` : undefined }} />\n                      {p.name}\n                    </Link>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      <Comments count={project.commentsCount} projectId={projectId} />\n      {/* {followersShowed && (\n        <Modal onClose={() => setFollowersShowed(false)}>\n          <div className={s.popup}>\n            <div className={s.popupTitle}>Followers:</div>\n            <div className={s.popupList}>\n              {users!.followers.map((user: any) => (\n                <div className={s.popupListRow} key={user.id}>\n                  <UserWidget user={user} />\n                  {isAdmin && (\n                    <div className={s.popupActions}>\n                      <span \n                        onClick={async () => {\n                          try {\n                            await unFollowUser(project.id, user.id);\n                          } catch(e) {\n                          }\n                          setUsers({ ...users, followers: users.followers.filter((u: any) => user != u)})\n                          \n                        }}\n                      >Remove</span>\n                    </div>\n                  )}\n                </div>\n              ))}\n              {users!.followers.length === 0 && (\n                <div className={s.popupListEmpty}>No followers</div>\n              )}\n            </div>\n          </div>\n        </Modal>\n      )} */}\n      \n      {usersShowed && (\n        <Popup width={500} onClose={() => setUsersShowed(false)}>\n        <div className={s.popUpUserList}>\n          <div className={s.usersTitle}>\n            <span\n              className={cx({ [s.selectedUsers]: popupUsersIndex === 0 })}\n              onClick={() => setPopUsersIndex(0)}\n            ></span>\n            <i>/</i>\n            <span\n              className={cx({ [s.selectedUsers]: popupUsersIndex === 1 })}\n              onClick={() => setPopUsersIndex(1)}\n            ></span>\n            {isAdmin && (\n              <>\n                <i>/</i>\n                <span\n                  className={cx({ [s.selectedUsers]: popupUsersIndex === 2 })}\n                  onClick={() => setPopUsersIndex(2)}\n                ></span>\n              </>\n            )}\n          </div>\n          {popupUsersIndex === 0 && (\n            <div>\n              {users.followers.length > 0 ? (\n                  <div>\n                    {users.followers.map((u: any) => (\n                      <div key={u.id} className={s.popupUser}>\n                        {isAdmin && (\n                          <div className={s.popupAdminActions}>\n                            <Decline\n                              onClick={async () => {\n                                try {\n                                  await unFollowUser(project!.id, u.id);\n                                } catch(e) {\n                                }\n                                setUsers({ ...users, followers: users.followers.filter((u: any) => user != u)})\n                                \n                              }}\n                            />\n                          </div>\n                        )}\n                        <UserWidget user={u} />\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div> </div>\n                )}\n            </div>\n          )}\n          {popupUsersIndex === 1 && (\n            <div>\n              {users.users.length > 0 ? (\n                  <div>\n                    {users.users.map((u: any) => (\n                      <div key={u.id} className={s.popupUser}>\n                        {isAdmin && (\n                          <div className={s.popupAdminActions}>\n                            <Decline\n                              onClick={async () => {\n                                try {\n                                  await removeUser(project!.id, u.id);\n                                } catch(e) {\n                                }\n                                setUsers({ ...users, followers: users.followers.filter((u: any) => user !== u)})\n                                \n                              }}\n                            />\n                          </div>\n                        )}\n                        <UserWidget user={u} />\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div> </div>\n                )}\n            </div>\n          )}\n          {popupUsersIndex === 2 && (\n            <div>\n              {users.requests.length > 0 ? (\n                  <div>\n                    {users.requests.map((u: any) => (\n                      <div key={u.id} className={s.popupUser}>\n                        <div className={s.popupAdminActions}>\n                          <Accept\n                            onClick={async () => {\n                              try {\n                                await acceptRequest(project!.id, u.id);\n                                setUsers({ ...users, users: [user, ...users.users], requests: users.requests.filter((u: any) => user !== u)})\n                              } catch(e) {\n                              }\n                            }}\n                          />\n                          <Decline\n                            onClick={async () => {\n                              try {\n                                await declineRequest(project!.id, u.id);\n                                setUsers({ ...users, requests: users.requests.filter((u: any) => user !== u)})\n                              } catch(e) {\n                              }\n                            }}\n                          />\n                        </div>\n                        <UserWidget user={u} />\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div> </div>\n                )}\n            </div>\n          )}\n        </div>\n        \n      </Popup>\n      )}\n    </div>\n  );\n}","import React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport { useDispatch } from 'react-redux';\nimport { UserActionType } from 'store';\nimport ProjectForm from 'components/project/ProjectForm/ProjectForm';\nimport useUser from 'hooks/useUser';\nimport { useSelector } from 'react-redux';\nimport { AppState, ProjectActionType } from 'store';\n\nimport s from './EditProject.module.scss';\n\nexport default function EditProject() {\n  const { user } = useUser();\n  const { project } = useSelector((s: AppState) => s.project);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  \n  useEffect(\n    () => {\n      if (!user) {\n        dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n        history.replace('/');\n      } else if (project!.user.id !== user.id) {\n        history.replace(`/project/${project!.id}`);\n      }\n    },\n    [user], // eslint-disable-line\n  );\n  return (\n    <ProjectForm\n      className={s.form} \n      project={project!} \n      onSave={data => {\n        dispatch({ type: ProjectActionType.LOAD_PROJECT_ACTION, payload: { ...data, pages: project!.pages } });\n        history.push(`/project/${project!.id}`);\n      }}\n      onCancel={() => {\n        history.push(`/project/${project!.id}`);\n      }}\n    />\n    \n  );\n}","import React, { useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link, useHistory } from 'react-router-dom';\nimport cx from 'classnames';\nimport useUser from 'hooks/useUser';\nimport { ProjectActionType, AppState } from 'store';\nimport { createPage } from 'api/project';\nimport Comments from 'components/comment/Comments/Comments';\nimport { staticBase } from 'helpers/constants';\nimport { ReactComponent as Star } from 'icons/star.svg';\nimport { ReactComponent as Edit } from 'icons/edit.svg';\nimport StructureTree from 'components/project/StructureTree/StructureTree';\nimport File from '@material-ui/icons/Description';\n\n\nimport s from './PageMain.module.scss';\n\nexport default function PageMain() {\n  const { page, project, projectUsers } = useSelector((s: AppState) => s.project);\n  const { user } = useUser();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const content = page!.content;\n\n  const pages = useMemo(\n    () => {\n      const list = project?.pages?.map(p => ({ \n        id: p.id,\n        name: p.name,\n        parentId: p.parentId,\n        important: p.important,\n        draft: !!p.draft,\n        children: [] as any[],\n        content: p.content,\n      }));\n      if (list) {\n        list.forEach(page => {\n          if (page.parentId) {\n            const parent = list.find(p => p.id === page.parentId);\n            parent?.children.push(page);\n          }\n        });\n        return list.filter(p => !p.parentId);\n      }\n    },\n    [project?.pages]\n  );\n\n  const isAdmin = user !== null && (user.id === project!.user.id || (projectUsers && projectUsers.users.findIndex((u: any) => u.id === user.id) !== -1));\n  \n  return (\n    <div className={cx(s.wrapper, { [s.draft]: page!.draft })}>\n      {isAdmin && (\n        <>\n          <Link className={s.edit} to={`/project/${project!.id}/${page!.id}/edit`}>\n            <Edit />\n          </Link>\n        </>\n      )}\n      <div className={s.name}>\n        {page!.important && (<Star />)} {page!.name}\n      </div>\n      <div className={s.menu}>\n        <StructureTree\n          project={project!}\n          pages={pages}\n          relative\n          canEdit={user !== null && (user.id === project!.user.id || (projectUsers && projectUsers.users.findIndex((u: any) => u.id === user.id) !== -1))}\n          onAdd={async (id?: number) => {\n            const { data: page } = await createPage(project!.id, id);\n            await dispatch({ \n              type: ProjectActionType.LOAD_PROJECT_ACTION, \n              payload: { ...project, pages: [...(project!.pages || []), page] } \n            });\n            history.push(`/project/${project!.id}/${page.id}/edit`);\n          }}\n        />\n      </div>\n      <div className={cx('text-content', s.content)} dangerouslySetInnerHTML={{ __html: content }} />\n      {page!.files && page!.files.length > 0 && (\n        <div className={s.files}>\n          <div className={s.filesTitle}>:</div>\n          <div className={s.filesList}>\n            {page!.files.map(f => (\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href={`${staticBase}/${f.path}`} className={s.file} key={f.name} title={f.name}>\n                <File />\n                <span>{f.name}</span>\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n      <Comments count={page!.commentsCount} projectId={project!.id} pageId={page!.id} />\n      \n    </div>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport cx from 'classnames';\nimport { useHistory } from 'react-router-dom';\nimport useUser from 'hooks/useUser';\nimport * as SignalR from '@microsoft/signalr';\nimport { AppState, ProjectActionType } from 'store';\nimport File from '@material-ui/icons/Description';\nimport { useDropzone } from 'react-dropzone';\nimport { updatePage, getProjectPages, deleteProjectPage, getDraft, updateDraft, getPage, saveDraftToPage, saveDraftFromPage } from 'api/project';\nimport ConfirmWindow from 'components/common/ConfirmWindow/ConfirmWindow';\nimport { IFile } from 'models/file';\nimport ContentField from 'components/form/ContentField/ContentField';\nimport FormRow from 'components/form/FormRow/FormRow';\nimport Modal from 'components/common/Modal/Modal';\nimport TextField from 'components/form/TextField/TextField';\nimport { getConnectionWS } from 'api/hub';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Popup from 'components/common/Popup/Popup';\nimport { ReactComponent as Close } from 'icons/close.svg';\n\nimport s from './PageEdit.module.scss';\n\nexport default function PageEdit() {\n  const { page, project, projectUsers } = useSelector((s: AppState) => s.project);\n  const [name, setName] = useState<any>('');\n  const { user } = useUser();\n  const [displayDeleteConfirm, setDisplayDeleteConfirm] = useState(false);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  \n  const [important, setImportant] = useState(false);\n  const [published, setPublished] = useState(false);\n  const [content, setContent] = useState<any>(null);\n  const [dt, setData] = useState<any>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [files, setFiles] = useState<IFile[]>([]);\n  const [newFiles, setNewFiles] = useState<File[]>([]);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const [displayDraft, setDisplayDraft] = useState(false);\n  const [draftContent, setDraftContent] = useState<any>(null);\n  const [popupMessage, setPopupMessage] = useState('');\n\n  const isAdmin = user !== null && user.id === project!.user.id;\n  const hasRights = user !== null && (user.id === project!.user.id || (projectUsers && projectUsers.users.findIndex((u: any) => u.id === user.id) !== -1));\n\n  useEffect(\n    () => {\n      if (!page) return;\n      if (!hasRights) {\n        history.replace(`/project/${project!.id}/${page!.id}`);\n        return;\n      }\n      setName(page.name || '');\n      setImportant(!!page.important);\n      setPublished(!page.draft);\n      setFiles(page.files || []);\n      try {\n        setData(JSON.parse(page.data || '{}'));\n      } catch(err) {\n        setData({});\n      }\n      \n      setContent(page.content || '');\n    },\n    [page, user, hasRights], // eslint-disable-line\n  );\n\n  useEffect(\n    () => {\n      if (!project || !page) {\n        return;\n      }\n      const onLoad = async () => {\n        const { data: { drafts }} = (await getDraft(project.id, page.id)) as any;\n        if (drafts.length) {\n          setDraftContent(drafts[0].content || '');\n        } else {\n          setDraftContent('');\n        }\n      }\n      if (displayDraft) {\n        onLoad();\n      } else {\n        setDraftContent(null);\n      }\n    },\n    [displayDraft, project, page]\n  );\n\n  useEffect(\n    () => {\n      if (page && isAdmin) {\n        const handler = async (content: string) => {\n          setPopupMessage(' ');\n        };\n        let expired = false;\n        let connection: SignalR.HubConnection | undefined;\n        const onLoad = async () => {\n          connection = await getConnectionWS();\n          if (!expired && connection) {\n            connection.on(`PageEdit:${page.id}`, handler);\n          }\n        }\n        onLoad();\n        return () => {\n          expired = true;\n          if (connection) {\n            connection.off(`PageEdit:${page.id}`, handler);\n            connection = undefined;\n          }\n        }\n      }\n    },\n    [page, isAdmin]\n  );\n\n  const { \n    acceptedFiles, getRootProps, getInputProps, isDragAccept, isDragReject,\n  } = useDropzone();\n\n  // useDropzone({ accept: 'image/png image/jpg image/jpeg image/gif application/pdf .csv .xlsx .xls .doc .docx .ppt .pptx .txt application/vnd.openxmlformats-officedocument.spreadsheetml.sheet application/vnd.ms-excel' });\n\n  useEffect(\n    () => {\n      if (acceptedFiles.length > 0) {\n        setNewFiles([...newFiles, ...acceptedFiles]);\n      }\n    },\n    [acceptedFiles.length]\n  )\n\n  if (content === null) {\n    return null;\n  }\n\n  const save = async () => {\n    const errors: { [key: string]: string } = {};\n    if (name.trim().length === 0) {\n      errors.name = 'Can\\'t be empty';\n    } else if (name.trim().length > 120) {\n      errors.name = 'Too long';\n    }\n    if (content!.trim().length > 15000) {\n      errors.content = 'Too long';\n    }\n\n    if (content!.trim().length === 0) {\n      errors.content = 'Can\\'t be empty';\n    } else if (content!.trim().length > 15000) {\n      errors.content = 'Too long';\n    }\n\n    setErrors(errors);\n    if (Object.keys(errors).length === 0) {\n      setIsLoading(true);\n      try {\n        const { data } = await updatePage({ ...page!, name, content: content || '', files, important, draft: !published }, dt, newFiles);\n        const { data: pages } = await getProjectPages(project!.id);\n        dispatch({ type: ProjectActionType.LOAD_PROJECT_ACTION, payload: { ...project, pages }});\n        history.push(`/project/${project!.id}/${page!.id}`);\n        dispatch({ type: ProjectActionType.LOAD_PAGE_ACTION, payload: data });          \n      } catch (err) {\n        console.error(err);\n      }\n      setIsLoading(false);\n    }\n  }\n\n \n\n  if (!page) {\n    return null;\n  }\n  \n  return (\n    <div className={s.wrapper}>\n      <div className={s.checkboxes}>\n        <div className={s.checkbox}>\n          <Checkbox\n            checked={important}\n            id=\"important\" \n            onChange={e => {\n              setImportant(e.target.checked);\n            }}\n          />\n          <span></span>\n        </div>\n        <div className={s.checkbox}>\n          <Checkbox\n            checked={published}\n            id=\"published\" \n            onChange={e => {\n              setPublished(e.target.checked);\n            }}\n          />\n          <span></span>\n        </div>\n        \n      </div>\n      <FormRow maxLength={120} length={name.trim().length} className={s.row}>\n        <TextField\n          fullWidth\n          size=\"bg\"\n          name=\"name\"\n          value={name}\n          invalid={!!errors.name}\n          invalidText={errors.name}\n          label=\"\"\n          onChange={e => {\n            setName(e.target.value);\n          }}\n        />\n      </FormRow>\n      \n      <FormRow maxLength={15000} length={content.trim().length} className={s.row}>\n        <ContentField \n          className={s.editor} \n          value={dt} \n          onChange={(data, html) => { \n            setData(data);\n            setContent(html);\n          }}\n          error={errors.content}\n        />\n      </FormRow>\n\n      {isAdmin && (\n        <div className={s.displayDraft}>\n          <span onClick={() => setDisplayDraft(true)}> </span>\n          <span \n            onClick={async () => {\n              await saveDraftFromPage(project!.id, page!.id);\n              setPopupMessage('  ');\n            }}\n          >  </span>\n          <span\n            onClick={async () => {\n              await saveDraftToPage(project!.id, page!.id);\n              const { data } = await getPage(project!.id, page!.id);\n              setContent(null);\n              dispatch({ type: ProjectActionType.LOAD_PAGE_ACTION, payload: data });          \n            }}\n          >  </span>\n        </div>\n      )}\n\n      <div>\n        <div className={s.filesList}>\n          {files.map(file => (\n            <div className={s.file} key={file.name} title={file.name}>\n              <File />\n              <span>{file.name}</span>\n              <Close className={s.removeFile} onClick={() => setFiles(files.filter(f => file !== f))} />\n            </div>\n          ))}\n          {newFiles.map(file => (\n            <div className={s.file} key={file.name} title={file.name}>\n              <File />\n              <span>{file.name}</span>\n              <Close className={s.removeFile} onClick={() => setNewFiles(newFiles.filter(f => file !== f))} />\n            </div>\n          ))}\n        </div>\n        <div\n          {...getRootProps({\n            maxFiles: 0,\n            className: cx('dropzone', s.imageDrop, { [s.rejectImageDrop]: isDragReject, [s.activeImageDrop]: isDragAccept }),\n          })}\n        >\n          <input {...getInputProps()} />\n          <p>  </p>\n        </div>\n      </div>\n      <div className={s.actions}>\n        <div className={s.actionsLeft}>\n          <button\n            disabled={isLoading}\n            onClick={save}\n            className={cx('button', 'button-primary')}\n          >\n            \n          </button>\n        </div>\n        {project && (\n          <div className={s.actionsRight}>\n            <button\n              disabled={isLoading}\n              onClick={() => {\n                history.push(`/project/${project!.id}/${page!.id}`);\n              }}\n              className={cx('button', 'button-secondary')}\n            >\n              \n            </button>\n              <button\n              disabled={isLoading}\n              onClick={() => setDisplayDeleteConfirm(true)}\n              className={cx('button', 'button-danger')}\n            >\n              \n            </button>\n          </div>\n        )}\n        \n      </div>\n      {displayDeleteConfirm && (\n        <ConfirmWindow\n          title=\" ?\"\n          ok={async () => {\n            await deleteProjectPage(project!.id, page!.id);\n            const { data: pages } = await getProjectPages(project!.id);\n            dispatch({ type: ProjectActionType.LOAD_PROJECT_ACTION, payload: { ...project, pages }});\n            history.push(`/project/${project!.id}`);\n          }}\n          cancel={() => setDisplayDeleteConfirm(false)}\n          okText=\"\"\n          cancelText=\"\"\n        />\n      )}\n      {displayDraft && (\n        <Popup width={800} onClose={() => setDisplayDraft(false)}>\n          <div className={s.popup}>\n            <div className={s.popupTitle}></div>\n            <div className={cx('trix-content', s.popupForm)} dangerouslySetInnerHTML={{ __html: draftContent }} />\n          </div>\n        </Popup>\n      )}\n      {popupMessage && (\n        <Popup title={popupMessage} width={320} onClose={() => setPopupMessage('')} />\n      )}\n    </div>\n  );\n}","import React, { useEffect, useState } from 'react';\nimport { useParams, useHistory, Route, useRouteMatch, Switch } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { AppState, ProjectActionType } from 'store';\nimport { Helmet } from 'react-helmet';\nimport PageMain from 'components/project/page/PageMain/PageMain';\nimport PageEdit from 'components/project/page/PageEdit/PageEdit';\nimport { getPage } from 'api/project';\n\nimport s from './PageDetail.module.scss';\n\nexport default function PageDetail() {\n  const { pageId } = useParams<{ pageId: string }>();\n  const history = useHistory();\n  const match = useRouteMatch();\n  const [isLoading, setIsLoading] = useState(true);\n  const dispatch = useDispatch();\n  const { project, page, projectUsers } = useSelector((s: AppState) => s.project);\n\n  useEffect(\n    () => {\n      const onLoad = async () => {\n        setIsLoading(true);\n        try {\n          const { data } = await getPage(project!.id, +pageId);\n          dispatch({ type: ProjectActionType.LOAD_PAGE_ACTION, payload: data });          \n          setIsLoading(false);\n        } catch (err) {\n          console.error(err);\n          history.replace(`/project/${project!.id}`);\n        }\n      };\n      onLoad();\n      return () => {\n        dispatch({ type: ProjectActionType.LOAD_PAGE_ACTION, payload: null });\n      }\n    },\n    [pageId]\n  );\n\n  if (isLoading || projectUsers === null) {\n    return null;\n  }\n  \n  return (\n    <>\n      {page && (\n        <Helmet>\n          <title>Projects & protocols repository: {project!.name} - {page.name}</title>\n        </Helmet>\n      )}\n      <Switch>\n        <Route path={match.url} exact component={PageMain} />\n        <Route path={`${match.url}/edit`} exact component={PageEdit} />\n      </Switch>\n    </>\n  );\n}","import React, { useEffect, useMemo, useCallback, useState } from 'react';\nimport cx from 'classnames';\nimport { useParams , useHistory, Route, useRouteMatch, Switch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport { AppState, ProjectActionType } from 'store';\nimport ProjectMain from 'components/project/ProjectMain/ProjectMain';\nimport EditProject from 'components/project/EditProject/EditProject';\nimport PageDetail from 'components/project/page/PageDetail/PageDetail';\nimport StructureTree from 'components/project/StructureTree/StructureTree';\nimport { getUsers, getFollowers, getRequests, getProject, createPage, getProjectPages } from 'api/project';\nimport { toggleProjectFollowing, toggleProjectRequest, leaveProject, acceptRequest, declineRequest, removeUser, unFollowUser, } from 'api/project';\nimport useUser from 'hooks/useUser';\nimport UserWidget from 'components/common/UserWidget/UserWidget';\nimport Popup from 'components/common/Popup/Popup';\nimport { ReactComponent as Accept } from 'icons/accept.svg';\nimport { ReactComponent as Decline } from 'icons/decline.svg';\n\nimport s from './ProjectDetail.module.scss';\n\nexport default function ProjectDetail() {\n  const { id } = useParams<{ id: string }>();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const match = useRouteMatch();\n  const { user } = useUser();\n  const { project, projectUsers } = useSelector((s: AppState) => s.project);\n  const isAdmin = !!(user && project && (user.id === project.user.id  || user.isAdmin));\n  const users = projectUsers;\n\n  const [usersShowed, setUsersShowed] = useState(false);\n  const [popupUsersIndex, setPopUsersIndex] = useState(0);\n\n  const [usersIndex, setUsersIndex] = useState(0);\n  const [displayArrow, setDisplayArrow] = useState(false);\n\n  useEffect(\n    () => {\n      setUsersShowed(false);\n    },\n    [project?.id]\n  );\n\n  useEffect(\n    () => {\n      setPopUsersIndex(0);\n    },\n    [usersShowed]\n  );\n\n  useEffect(\n    () => {\n      const onScroll = () => {\n        const top = window.scrollY;\n        setDisplayArrow(top > 300);\n      }\n      onScroll();\n      document.addEventListener('scroll', onScroll);\n      return () => {\n        document.removeEventListener('scroll', onScroll);\n      }\n    },\n    []\n  );\n  \n  \n  useEffect(\n    () => {\n      const loadProject = async () => {\n        try {\n          const res = await getProject(+id);\n          const { data: pages } = await getProjectPages(+id);\n          dispatch({ type: ProjectActionType.LOAD_PROJECT_ACTION, payload: { ...res.data, pages }});          \n        } catch (err) {\n          console.error(err);\n          history.replace('/');\n        }\n      }\n      loadProject();\n      return () => {\n        dispatch({ type: ProjectActionType.LOAD_PROJECT_ACTION, payload: null });\n      }\n    },\n    [id, user] // eslint-disable-line\n  );\n\n  useEffect(\n    () => {\n      if (project) {\n        const load = async () => {\n          const { data: users } = await getUsers(project.id);\n          const { data: followers } = await getFollowers(project.id);\n          const data: any = { users, followers, requests: [] };\n          if (isAdmin) {\n            const { data: requests } =  await getRequests(project.id);\n            data.requests = requests;\n          }\n          dispatch({ type: ProjectActionType.LOAD_PROJECT_USERS_ACTION, payload: data });\n        }\n        load();\n        return () => {\n          dispatch({ type: ProjectActionType.LOAD_PROJECT_USERS_ACTION, payload: null });\n        }\n      }\n    },\n    [project]\n  )\n\n  const pages = useMemo(\n    () => {\n      const list = project?.pages?.map(p => ({ \n        id: p.id,\n        name: p.name,\n        parentId: p.parentId,\n        important: p.important,\n        draft: !!p.draft,\n        children: [] as any[],\n        content: p.content,\n      }));\n      if (list) {\n        list.forEach(page => {\n          if (page.parentId) {\n            const parent = list.find(p => p.id === page.parentId);\n            parent?.children.push(page);\n          }\n        });\n        return list.filter(p => !p.parentId);\n      }\n    },\n    [project?.pages]\n  )\n\n  const setUsers = useCallback(\n    (data: any) => {\n      dispatch({ type: ProjectActionType.LOAD_PROJECT_USERS_ACTION, payload: data });\n    },\n    []\n  );\n\n  const follow = useCallback(\n    async () => {\n      await toggleProjectFollowing(project!.id, true);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, following: true }\n      });\n      setUsers({ ...users, followers: [user!, ...users.followers]})\n    },\n    [project, users, user]\n  );\n\n  const unFollow = useCallback(\n    async () => {\n      await toggleProjectFollowing(project!.id, false);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, following: false }\n      });\n      setUsers({ ...users, followers: users.followers.filter((u: any) => user!.id !== u.id)})\n    },\n    [project, users, user]\n  );\n\n  const request = useCallback(\n    async () => {\n      await toggleProjectRequest(project!.id, true);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, requested: true }\n      });\n    },\n    [project]\n  );\n\n  const cancelRequest = useCallback(\n    async () => {\n      await toggleProjectRequest(project!.id, false);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, requested: false }\n      });\n    },\n    [project]\n  );\n\n  const leave = useCallback(\n    async () => {\n      await leaveProject(project!.id);\n      dispatch({ \n        type: ProjectActionType.LOAD_PROJECT_ACTION, \n        payload: { ...project, participate: false }\n      });\n      setUsers({ ...users, users: users.users.filter((u: any) => user!.id !== u.id)})\n    },\n    [project, users, user],\n  );\n    \n\n  return (\n    <div className={s.wrapper}>\n      {project ? (\n        <div className={cx('content', s.inner)}>\n          <Helmet>\n            <title>Projects & protocols repository: {project.name}</title>\n          </Helmet>\n          <div className={s.left}>\n            <StructureTree\n              project={project}\n              pages={pages}\n              canEdit={user !== null && (user.id === project.user.id || (projectUsers && projectUsers.users.findIndex((u: any) => u.id === user.id) !== -1))}\n              onAdd={async (id?: number) => {\n                const { data: page } = await createPage(project.id, id);\n                await dispatch({ \n                  type: ProjectActionType.LOAD_PROJECT_ACTION, \n                  payload: { ...project, pages: [...(project.pages || []), page] } \n                });\n                history.push(`/project/${project.id}/${page.id}/edit`);\n              }}\n            />\n          </div>\n          <div className={s.center}>\n            <Switch>\n              <Route path={match.url} exact component={ProjectMain} />\n              <Route path={`${match.url}/edit`} exact component={EditProject} />\n              <Route path={`${match.url}/:pageId`}  component={PageDetail} />\n            </Switch>\n          </div>\n          <div className={s.right}>\n            {user && !isAdmin && (\n              <div className={s.actions}>\n                {project.following ? (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={unFollow}\n                  >\n                    \n                  </button>\n                ) : (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={follow}\n                  >\n                    \n                  </button>\n                )}\n                {project.participate ? (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={leave}\n                  >\n                    \n                  </button>\n                ) : (project.requested ? (\n                    <button\n                      className={cx('button', 'button-primary')}\n                      onClick={cancelRequest}\n                    >\n                      \n                    </button>\n                ) : (\n                  <button\n                    className={cx('button', 'button-primary')}\n                    onClick={request}\n                  >\n                    \n                  </button>\n                ))}\n              </div>\n            )}\n            {users && (\n              <div className={s.users}>\n                <div className={s.usersTitle}>\n                  <span\n                    className={cx({ [s.selectedUsers]: usersIndex === 0 })}\n                    onClick={() => setUsersIndex(0)}\n                  ></span>\n                  <i>/</i>\n                  <span\n                    className={cx({ [s.selectedUsers]: usersIndex === 1 })}\n                    onClick={() => setUsersIndex(1)}\n                  ></span>\n                </div>\n                {usersIndex === 0 && (\n                  <div>\n                    {users.followers.length > 0 ? (\n                        <div>\n                          {users.followers.slice(0, 8).map((u: any) => (\n                            <UserWidget key={u.id} user={u} />\n                          ))}\n                        </div>\n                      ) : (\n                        <div> </div>\n                      )}\n                  </div>\n                )}\n                {usersIndex === 1 && (\n                  <div>\n                    {users.users.length > 0 ? (\n                        <div>\n                          {users.users.slice(0, 8).map((u: any) => (\n                            <UserWidget key={u.id} user={u} />\n                          ))}\n                        </div>\n                      ) : (\n                        <div> </div>\n                      )}\n                  </div>\n                )}\n              </div>\n            )}\n            <div className={s.adminActions}>\n              <button\n                className={cx('button', 'button-primary')}\n                onClick={() => setUsersShowed(true)}\n              >\n                {isAdmin ? '' : ''}\n              </button>\n            </div>\n          </div>\n          <div \n            onClick={() => window.scrollTo(0, 0)} \n            className={cx(s.arrow, { [s.arrowVisible]: displayArrow })}\n          >\n            <ArrowUpwardIcon />\n            <div></div>\n          </div>\n        </div>\n      ) : <div className=\"spinner overlay-spinner\" />}\n\n\n      {usersShowed && (\n        <Popup width={500} onClose={() => setUsersShowed(false)}>\n          <div className={s.popUpUserList}>\n            <div className={s.usersTitle}>\n              <span\n                className={cx({ [s.selectedUsers]: popupUsersIndex === 0 })}\n                onClick={() => setPopUsersIndex(0)}\n              ></span>\n              <i>/</i>\n              <span\n                className={cx({ [s.selectedUsers]: popupUsersIndex === 1 })}\n                onClick={() => setPopUsersIndex(1)}\n              ></span>\n              {isAdmin && (\n                <>\n                  <i>/</i>\n                  <span\n                    className={cx({ [s.selectedUsers]: popupUsersIndex === 2 })}\n                    onClick={() => setPopUsersIndex(2)}\n                  ></span>\n                </>\n              )}\n            </div>\n            {popupUsersIndex === 0 && (\n              <div>\n                {users.followers.length > 0 ? (\n                    <div>\n                      {users.followers.map((u: any) => (\n                        <div key={u.id} className={s.popupUser}>\n                          {isAdmin && (\n                            <div className={s.popupAdminActions}>\n                              <Decline\n                                onClick={async () => {\n                                  try {\n                                    await unFollowUser(project!.id, u.id);\n                                  } catch(e) {\n                                  }\n                                  setUsers({ ...users, followers: users.followers.filter((u: any) => user !== u)})\n                                  \n                                }}\n                              />\n                            </div>\n                          )}\n                          <UserWidget user={u} />\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div> </div>\n                  )}\n              </div>\n            )}\n            {popupUsersIndex === 1 && (\n              <div>\n                {users.users.length > 0 ? (\n                    <div>\n                      {users.users.map((u: any) => (\n                        <div key={u.id} className={s.popupUser}>\n                          {isAdmin && (\n                            <div className={s.popupAdminActions}>\n                              <Decline\n                                onClick={async () => {\n                                  try {\n                                    await removeUser(project!.id, u.id);\n                                  } catch(e) {\n                                  }\n                                  setUsers({ ...users, followers: users.followers.filter((u: any) => user !== u)})\n                                  \n                                }}\n                              />\n                            </div>\n                          )}\n                          <UserWidget user={u} />\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div> </div>\n                  )}\n              </div>\n            )}\n            {popupUsersIndex === 2 && (\n              <div>\n                {users.requests.length > 0 ? (\n                    <div>\n                      {users.requests.map((u: any) => (\n                        <div key={u.id} className={s.popupUser}>\n                          <div className={s.popupAdminActions}>\n                            <Accept\n                              onClick={async () => {\n                                try {\n                                  await acceptRequest(project!.id, u.id);\n                                  setUsers({ ...users, users: [user, ...users.users], requests: users.requests.filter((u: any) => user != u)})\n                                } catch(e) {\n                                }\n                              }}\n                            />\n                            <Decline\n                              onClick={async () => {\n                                try {\n                                  await declineRequest(project!.id, u.id);\n                                  setUsers({ ...users, requests: users.requests.filter((u: any) => user !== u)})\n                                } catch(e) {\n                                }\n                              }}\n                            />\n                          </div>\n                          <UserWidget user={u} />\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div> </div>\n                  )}\n              </div>\n            )}\n          </div>\n          \n        </Popup>\n      )}\n    </div>\n  );\n}","import React from 'react';\nimport * as Sentry from '@sentry/browser';\n\n\nexport default class ErrorBoundary extends React.Component<any, any> {\n  constructor(props: any) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  componentDidCatch(error: any, info: any) {\n    this.setState({ hasError: true });\n    console.error(error, info)\n    Sentry.captureException(error);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { validateResetToken, resetPassword } from 'api/user';\nimport { UserActionType } from 'store';\nimport cx from 'classnames';\nimport { IUser } from 'models/user';\nimport useUser from 'hooks/useUser';\nimport FormRow from 'components/form/FormRow/FormRow';\nimport TextField from 'components/form/TextField/TextField';\n\nimport s from './ResetPassword.module.scss';\n\ninterface IProps {\n  onSave(user: IUser): any;\n  onClose(): any;\n}\n\nexport default function ResetPassword({ onSave, onClose }: IProps) {\n  const [repeatPassword, setRepeatPassword] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [error, setError] = useState<string>('');\n  const [token, setToken] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(false);\n  const dispatch = useDispatch();\n  const [sent, setSent] = useState(false);\n  const { user } = useUser();\n  const history = useHistory();\n  const location = useLocation();\n  useEffect(\n    () => {\n      const onLoad = async () => {\n        if (user) {\n          history.replace('/');\n          return;\n        }\n        const params = new URLSearchParams(location.search);\n        const token = params.get('token');\n        if (!token) {\n          history.replace('/');\n          return;\n        }\n        try {\n          await validateResetToken(token);\n        } catch(err) {\n          history.replace('/');\n          return;\n        }\n        setToken(token);\n      }\n\n      onLoad();\n      \n    },\n    [user], // eslint-disable-line\n  );\n  return (\n    <div \n      className={s.wrapper}\n    >\n      {sent ? (\n        <div className={s.success}>\n          <div>  .</div>\n        </div>\n      ) : (\n        <div className={s.content}>\n          <div className={s.title}> </div>\n          <div className={s.form}>\n            <FormRow maxLength={20} length={password.trim().length}>\n              <TextField\n                type=\"password\"\n                name=\"password\"\n                label=\"\"\n                size=\"bg\"\n                fullWidth\n                value={password}\n                invalid={!!errors.password}\n                invalidText={errors.password}\n                onChange={e => {\n                  setPassword(e.target.value.trim());\n                }}\n              />\n              <div className={s.passwordHelp}>\n                 , 8-20 \n              </div>\n            </FormRow>\n            <FormRow maxLength={20} length={repeatPassword.trim().length}>\n              <TextField\n                fullWidth\n                size=\"bg\"\n                type=\"password\"\n                label=\" \"\n                name=\"repeat-password\"\n                value={repeatPassword}\n                invalid={!!errors.repeatPassword}\n                invalidText={errors.repeatPassword}\n                onChange={e => {\n                  setRepeatPassword(e.target.value.trim());\n                }}\n              />\n            </FormRow>\n            {error && <div className={s.error}>{error}</div>}\n\n            <div className={s.actions}>\n              <button \n                className={cx('button', 'button-primary')} \n                onClick={\n                  async () => {\n                    setError('');\n                    const errors: { [key: string]: string } = {};\n                    if (password.trim().length < 8 || password.trim().length > 20) {\n                      errors.password = ' ';\n                    }\n                    if (password.trim() !== repeatPassword.trim()) {\n                      errors.repeatPassword = '  ';\n                    }\n                    setErrors(errors);\n                    if (Object.keys(errors).length === 0) {\n                      setIsLoading(true);\n                      try {\n                        const { status } = await resetPassword(password, token);\n                        if (status === 200) {\n                          setSent(true)\n                        } \n                      } catch (err) {\n                        setError('  ,   ')  \n                      }\n                      setIsLoading(false);\n                    }\n                  }\n                }\n              ></button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}","import React from 'react';\nimport cx from 'classnames';\n\nimport s from './Agreement.module.scss';\n\nexport default function Agreement() {\n  return (\n    <div className={cx(s.wrapper, 'content')}>\n      <h1> </h1>\n      <p>\n         ( )     Project021.pw ( Project021  )        .<br />\n       Project021     .<br />\n       ,      .<br />\n             ,    Project021.pw!<br />\n      <h2> </h2>\n               :<br />\n      -  <br />\n      - <br />\n      - <br />\n      - <br />\n      -   ,    <br />\n      <h2>   </h2>\n      <h3>  :</h3>\n      -     <br />\n      -    <br />\n      -    <br />\n      -    <br />\n      -  ,   <br />\n      -   <br />\n      -        <br />\n      -       <br />\n      -         <br />\n      -         <br />\n      <h3>  :</h3>\n      -      , ,  <br />\n      -       <br />\n      - , ,  <br />\n      -   <br />\n      -      <br />\n      <h3> :</h3>\n      -   ,     ,  ,      ,    ,        <br />\n      -    <br />\n      -   ,       <br />\n      -    , ,    ,    ,         <br />\n      -    ()     /      <br />\n      <h3> :</h3>\n      -      ,        .<br />\n      -      <br />\n      -  ,              ,  <br />\n      -              ,  <br />\n      <h2> </h2>\n      -         <br />\n      -        ,    <br />\n      -            <br />\n      -       ,   <br />\n      -    -  ( ,  ,    . .)     ,  ,      <br />\n      <h2>  </h2>\n              .<br />\n        .<br />\n                   .<br />\n             .<br />\n      </p>\n    </div>\n  );\n}","import React, { useEffect, useState } from 'react';\nimport throttle from 'lodash/throttle';\nimport qs from 'query-string';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { AppState, ProjectActionType } from 'store';\nimport TextField from 'components/form/TextField/TextField';\nimport ProjectsList from 'components/project/ProjectsList/ProjectsList';\nimport { searchProjects, likeProject } from 'api/project';\nimport useUser from 'hooks/useUser';\nimport { UserActionType } from 'store';\nimport { IProject } from 'models/project';\n\nimport cx from 'classnames';\n\nimport s from './Search.module.scss';\nimport { onLoad } from '@sentry/react';\n\nexport default function Search() {\n  const location = useLocation();\n  const history = useHistory();\n  const [search, setSearch] = useState('');\n  const [projectLoaded, setProjectLoaded] = useState(false);\n  const [moreLoading, setMoreLoading] = useState(false);\n  const dispatch = useDispatch();\n  const [page, setPage] = useState(0);\n  const { projects } = useSelector((s: AppState) => s.project);\n  const { user } = useUser();\n  useEffect(\n    () => {\n      const params = qs.parse(location.search) as any;\n      if (params.q !== search) {\n        setSearch((params.q || '').trim());\n      }\n    },\n    [location.search]\n  );\n\n  useEffect(\n    () => {\n      \n      if (search) {\n        let request: any = null;\n        const onLoad = async () => {\n          setProjectLoaded(false);\n          try {\n            request = searchProjects(search);\n            const { data } = await request;\n            dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: data });\n          } catch(err) {\n            console.error(err);\n            dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n          }\n          request = null;\n          setProjectLoaded(true);\n        }\n        onLoad();\n        return () => {\n          if (request) {\n            request.cancel();\n          }\n          dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [] });\n        }\n      }\n    },\n    [search]\n  );\n\n  return (<div className={s.wrapper}>\n    <div className={s.title}></div>\n    <form\n        className={s.form}\n      >\n        <TextField\n          fullWidth\n          className={s.field}\n          size=\"bg\"\n          name=\"seacrh\"\n          value={search}\n          label=\"\"\n          onChange={e => {\n            setSearch(e.target.value.substring(0, 100));\n          }}\n        /> \n        \n    </form>\n\n    {projectLoaded ? (\n      <ProjectsList\n        className={s.projects}\n        projects={projects}\n        hasMore={projects.length >= (page + 1) * 8}\n        disabled={moreLoading}\n        onMoreLoad={async () => {\n          try {\n            setMoreLoading(true);\n            const { data } = await searchProjects(search, page + 1);\n            setPage(page + 1);\n            dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects, ...data] });\n          } catch(err) {\n            console.error(err);\n          }\n          setMoreLoading(false);\n        }}\n        onLike={async (project: IProject) => {\n          if (!user) {\n            dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: true });\n            return;\n          }\n          try {\n            const { data: { count, liked } } = await likeProject(project.id);\n            const index = projects.indexOf(project);\n            projects[index] = { ...project, likesCount: count, liked };\n            dispatch({ type: ProjectActionType.LOAD_PROJECTS_ACTION, payload: [...projects] });\n            \n          } catch(err) {\n\n          }\n        }}\n      />\n    ) : (\n      <div className=\"spinner overlay-spinner\" />\n    )}\n  </div>)\n}","import React, { useEffect, useState, useCallback }  from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport * as SignalR from '@microsoft/signalr';\n\nimport { UserActionType } from 'store';\nimport { refreshToken } from 'api/request';\nimport { getAccount, getEvents } from 'api/user';\nimport { User } from 'models/user';\nimport useUser from 'hooks/useUser';\nimport { useHistory } from 'react-router-dom';\nimport Header from 'components/common/Header/Header';\nimport Footer from 'components/common/Footer/Footer';\nimport Home from 'components/Home/Home';\nimport LoginForm from 'components/auth/LoginForm/LoginForm';\nimport RegisterForm from 'components/auth/RegisterForm/RegisterForm';\nimport ForgetPasswordForm from 'components/auth/ForgetPasswordForm/ForgetPasswordForm';\nimport ConfirmSuccess from 'components/auth/ConfirmSuccess/ConfirmSuccess';\nimport Account from 'components/account/Account/Account';\nimport AccountEdit from 'components/account/AccountEdit/AccountEdit';\n\nimport CreateProject from 'components/project/CreateProject/CreateProject';\nimport MyProjects from 'components/project/MyProjects/MyProjects';\nimport ProjectDetail from 'components/project/ProjectDetail/ProjectDetail';\nimport ErrorBoundary from 'components/ErrorBoundary/ErrorBoundary';\nimport UserPage from 'components/common/UserPage/UserPage';\nimport ResetPassword from 'components/auth/ResetPassword/ResetPassword';\n// import { connectWS, disconnectWS } from 'api/hub';\nimport Agreement from 'components/Agreement/Agreement';\nimport Search from 'components/Search/Search';\nimport ContentField from 'components/form/ContentField/ContentField';\n\nimport s from './App.module.scss';\n\nfunction App() {\n  const [userLoaded, setUserLoaded] = useState(false);\n  const dispatch = useDispatch();\n  const { user, loginShowed, registerShowed, forgetPasswordShowed } = useUser();\n  const history = useHistory();\n\n  useEffect(() => history.listen(() => window.scrollTo(0, 0)), []); // eslint-disable-line\n  \n  useEffect(\n    () => {\n      const onLoad = async () => {\n        try {\n          await refreshToken();\n          const { data } = await getAccount();\n          dispatch({ \n            type: UserActionType.LOAD_USER_ACTION, \n            payload: User.FromResponse(data),\n          });\n          dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: false });\n        } catch (err) {\n          if (window.opener) {\n            const params = new URLSearchParams(window.location.search);\n            const code = params.get('code');\n            const pathname = window.location.pathname;\n            switch (pathname) {\n              case '/fb/':\n                window.opener.setFbCode(code);\n                window.close();\n                break;\n              case '/vk/':\n                window.opener.setVkCode(code);\n                window.close();\n                break;\n              case '/google/':\n                window.opener.setGoogleCode(code);\n                window.close();\n                break;\n            }\n          }\n          console.error(err);\n        }\n        setUserLoaded(true);\n      }\n      onLoad();\n    },\n    [], // eslint-disable-line\n  );\n\n  const loadEvents = useCallback(\n    async () => {\n      const { data } = await getEvents();\n      dispatch({\n        type: UserActionType.EVENTS_LOADED_ACTION,\n        payload: data.map((d: string) => JSON.parse(d)),\n      });\n    },\n    [],\n  );\n\n  // useEffect(\n  //   () => {\n  //     let expired = false;\n  //     let init = false;\n  //     let connection:  any;\n  //     const onLoad = async () => {\n  //       connection = await connectWS(user ? user.id : undefined);\n  //       init = true;\n  //       if (expired) {\n  //         disconnectWS();\n  //       } else if (connection) {\n  //         connection.on('NewEvent', loadEvents);\n  //       }\n  //     }\n  //     onLoad();\n  //     return () => {\n  //       if (init) {\n  //         disconnectWS();\n  //         if (connection) {\n  //           connection.off('NewEvent', loadEvents);\n  //         }\n  //       }\n  //       expired = true;\n  //     }\n  //   },\n  //   [user],\n  // );\n\n  \n\n  useEffect(\n    () => {\n      if (user) {\n        loadEvents();\n      }\n    },\n    [user],\n  );\n\n  return (\n    <ErrorBoundary>\n      <Helmet>\n        <title>Projects & protocols repository</title>\n      </Helmet>\n      <div className={s.wrapper}>\n        {userLoaded ? (\n          <>\n            <Header />\n            <div className={s.content}>\n              <Switch>\n                <Route path=\"/\" exact component={Home} />\n                <Route path=\"/create-project\" exact component={CreateProject} />\n                <Route path=\"/my-projects\" exact component={MyProjects} />\n                <Route path=\"/account\" exact component={Account} />\n                <Route path=\"/account/edit\" exact component={AccountEdit} />\n                <Route path=\"/users/:id\" exact component={UserPage} />\n                <Route path=\"/project/:id\" component={ProjectDetail} />\n                <Route path=\"/confirm-success\" exact component={ConfirmSuccess} />\n                <Route path=\"/reset-password\" exact component={ResetPassword} />\n                <Route path=\"/agreement\" exact component={Agreement} />\n                <Route path=\"/search\" exact component={Search} />\n              </Switch>\n            </div>\n            <Footer />\n          </>\n        ) : (\n          <div className=\"spinner overlay-spinner\" />\n        )}\n        {loginShowed && (\n          <LoginForm \n            onSave={(data) => {\n              dispatch({ \n                type: UserActionType.LOAD_USER_ACTION, \n                payload: User.FromResponse(data),\n              });\n              dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: false });\n            }} \n            onClose={() => dispatch({ type: UserActionType.LOGIN_VISIBILITY_ACTION, payload: false })}\n          />\n        )}\n\n        {registerShowed && (\n          <RegisterForm \n            onClose={() => dispatch({ type: UserActionType.REGISTER_VISIBILITY_ACTION, payload: false })}\n          />\n        )}\n\n        {forgetPasswordShowed && (\n          <ForgetPasswordForm\n            onClose={() => dispatch({ type: UserActionType.FORGET_PASSWORD_VISIBILITY_ACTION, payload: false })}\n          />\n        )}\n        \n      </div>\n      <ContentField \n          value={[]}\n          className=\"hidden\"\n          onChange={(data, html) => {\n\n          }}\n        />\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport { MuiThemeProvider, StylesProvider } from '@material-ui/core/styles';\n\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport * as Sentry from \"@sentry/react\"\n\nimport './reset.css';\nimport './index.scss';\nimport App from 'components/App/App';\nimport store from 'store';\nimport * as serviceWorker from './serviceWorker';\n\nif (process.env.NODE_ENV === 'production') {\n  Sentry.init({ dsn: 'https://ebce09db3c6c414389ceb71b7ff97247@o469034.ingest.sentry.io/5497764' });\n}\n\n\nconst theme = createMuiTheme({\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 600,\n      md: 960,\n      lg: 1280,\n      xl: 1850,\n    }\n  },\n  typography: {\n    fontFamily: `\n      'SF Pro', 'Arial', 'Roboto', 'Oxygen';\n    `,\n  },\n  palette: {\n    primary: {\n      main: '#88CAF7',\n    },\n    secondary: {\n      main: '#88CAF7',\n    },\n  },\n  overrides: {\n  },\n\n});\n\nReactDOM.render(\n    <StylesProvider injectFirst>\n      <MuiThemeProvider theme={theme}>\n        <Provider store={store}>\n          <Router>\n            <App />\n          </Router>\n        </Provider>\n      </MuiThemeProvider>\n    </StylesProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"MyProjects_wrapper__21GHG\",\"spinner\":\"MyProjects_spinner__5_SZV\",\"section\":\"MyProjects_section__3Br1L\",\"sectionTitle\":\"MyProjects_sectionTitle__2yKkE\",\"navigation\":\"MyProjects_navigation__213GL\",\"active\":\"MyProjects_active__1s6qG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"LoginForm_form__3qIjH\",\"error\":\"LoginForm_error__2lnVX\",\"bottom\":\"LoginForm_bottom__39fXl\",\"buttons\":\"LoginForm_buttons__2PIiz\",\"link\":\"LoginForm_link__2NAzg\",\"message\":\"LoginForm_message__3DrUi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"RegisterForm_form__gjEkc\",\"error\":\"RegisterForm_error__1OFgA\",\"bottom\":\"RegisterForm_bottom__1h16y\",\"buttons\":\"RegisterForm_buttons__3vc-0\",\"link\":\"RegisterForm_link__TAqcs\",\"passwordHelp\":\"RegisterForm_passwordHelp__1ptAq\",\"message\":\"RegisterForm_message__1w2ap\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"PageMain_wrapper__261P4\",\"name\":\"PageMain_name__25i5u\",\"content\":\"PageMain_content__20DpM\",\"important\":\"PageMain_important__nIxUN\",\"files\":\"PageMain_files__Vf_KO\",\"filesList\":\"PageMain_filesList__-Zucc\",\"filesTitle\":\"PageMain_filesTitle__143qM\",\"file\":\"PageMain_file__3Ek4Y\",\"edit\":\"PageMain_edit__Gz5w0\",\"menu\":\"PageMain_menu__3_7q4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AddCommentForm_wrapper__1IxoR\",\"title\":\"AddCommentForm_title__ZzQQs\",\"guest\":\"AddCommentForm_guest__tvO9g\",\"field\":\"AddCommentForm_field__2F0tx\",\"errors\":\"AddCommentForm_errors__1D8ae\",\"error\":\"AddCommentForm_error__257Lj\",\"bottom\":\"AddCommentForm_bottom__11tn9\",\"anonymous\":\"AddCommentForm_anonymous__l6Iy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Comments_wrapper__HNbmi\",\"top\":\"Comments_top__8LRjd\",\"title\":\"Comments_title__3tGxb\",\"list\":\"Comments_list__QjjqA\",\"comment\":\"Comments_comment__-Mn4A\",\"empty\":\"Comments_empty__1lM1d\",\"addCommentIcon\":\"Comments_addCommentIcon__buotC\",\"spinner\":\"Comments_spinner__J8hIu\",\"reply\":\"Comments_reply__8BCpJ\",\"hideNegative\":\"Comments_hideNegative__BIDVh\",\"addComment\":\"Comments_addComment__3tOTz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ResetPassword_wrapper__3VRn2\",\"title\":\"ResetPassword_title__1AtBs\",\"form\":\"ResetPassword_form__2_gVt\",\"actions\":\"ResetPassword_actions__3HUbP\",\"passwordHelp\":\"ResetPassword_passwordHelp__DFmxS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"SocialAuth_wrapper__1Fh9Q\",\"link\":\"SocialAuth_link__12bCV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"TextField_label__2ND1_\",\"fullWidth\":\"TextField_fullWidth__32-pv\",\"input\":\"TextField_input__1gZos\",\"invalid\":\"TextField_invalid__HSJZo\",\"invalidText\":\"TextField_invalidText__bjRmR\",\"big\":\"TextField_big__161wo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"projects\":\"ProjectsList_projects__q1qMR\",\"more\":\"ProjectsList_more__2Y9HU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Popup_wrapper__3NHtS\",\"overlay\":\"Popup_overlay__2NtUY\",\"title\":\"Popup_title__1Wiyt\",\"content\":\"Popup_content__Dgt4v\",\"close\":\"Popup_close__v9CH9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ForgetPasswordForm_form__1ZYZS\",\"error\":\"ForgetPasswordForm_error__32x4P\",\"bottom\":\"ForgetPasswordForm_bottom__1i8he\",\"buttons\":\"ForgetPasswordForm_buttons__39HDD\",\"link\":\"ForgetPasswordForm_link__2sAxW\",\"message\":\"ForgetPasswordForm_message__1kNYW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Search_form__1ch7D\",\"projects\":\"Search_projects__3QYZG\",\"title\":\"Search_title__2DSpS\",\"wrapper\":\"Search_wrapper__16aXF\"};"],"sourceRoot":""}